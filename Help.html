<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Cygwin User's Guide</title><link rel="stylesheet" type="text/css" href="docbook.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><meta name="description" content="Cygwin User's Guide"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book"><div class="titlepage"><div><div><h1 class="title"><a name="cygwin-ug-net"></a>Cygwin User's Guide</h1></div><div><div class="legalnotice"><a name="legal"></a><p>Copyright © Cygwin authors</p><p>Permission is granted to make and distribute verbatim copies of
this documentation provided the copyright notice and this permission
notice are preserved on all copies.</p><p>Permission is granted to copy and distribute modified versions
of this documentation under the conditions for verbatim copying,
provided that the entire resulting derived work is distributed under
the terms of a permission notice identical to this one.</p><p>Permission is granted to copy and distribute translations of
this documentation into another language, under the above conditions
for modified versions, except that this permission notice may be
stated in a translation approved by the Free Software
Foundation.</p></div></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>Cygwin User's Guide</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="chapter"><a href="#overview">1. Cygwin Overview</a></span></dt><dd><dl><dt><span class="sect1"><a href="#what-is-it">What is it?</a></span></dt><dt><span class="sect1"><a href="#ov-ex-win">Quick Start Guide for those more experienced with Windows</a></span></dt><dt><span class="sect1"><a href="#ov-ex-unix">Quick Start Guide for those more experienced with UNIX</a></span></dt><dt><span class="sect1"><a href="#are-free">Are the Cygwin tools free software?</a></span></dt><dt><span class="sect1"><a href="#brief-history">A brief history of the Cygwin project</a></span></dt><dt><span class="sect1"><a href="#highlights">Highlights of Cygwin Functionality</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ov-hi-intro">Introduction</a></span></dt><dt><span class="sect2"><a href="#ov-hi-perm">Permissions and Security</a></span></dt><dt><span class="sect2"><a href="#ov-hi-files">File Access</a></span></dt><dt><span class="sect2"><a href="#ov-hi-textvsbinary">Text Mode vs. Binary Mode</a></span></dt><dt><span class="sect2"><a href="#ov-hi-ansiclib">ANSI C Library</a></span></dt><dt><span class="sect2"><a href="#ov-hi-process">Process Creation</a></span></dt><dt><span class="sect2"><a href="#ov-hi-signals">Signals</a></span></dt><dt><span class="sect2"><a href="#ov-hi-sockets">Sockets</a></span></dt><dt><span class="sect2"><a href="#ov-hi-select">Select</a></span></dt></dl></dd><dt><span class="sect1"><a href="#ov-new">What's new and what changed in Cygwin</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ov-new3.6">What's new and what changed in 3.6</a></span></dt><dt><span class="sect2"><a href="#ov-new3.5">What's new and what changed in 3.5</a></span></dt><dt><span class="sect2"><a href="#ov-new3.4">What's new and what changed in 3.4</a></span></dt><dt><span class="sect2"><a href="#ov-new3.3">What's new and what changed in 3.3</a></span></dt><dt><span class="sect2"><a href="#ov-new3.2">What's new and what changed in 3.2</a></span></dt><dt><span class="sect2"><a href="#ov-new3.1">What's new and what changed in 3.1</a></span></dt><dt><span class="sect2"><a href="#ov-new3.0">What's new and what changed in 3.0</a></span></dt><dt><span class="sect2"><a href="#ov-new2.11">What's new and what changed in 2.11</a></span></dt><dt><span class="sect2"><a href="#ov-new2.10">What's new and what changed in 2.10</a></span></dt><dt><span class="sect2"><a href="#ov-new2.9">What's new and what changed in 2.9</a></span></dt><dt><span class="sect2"><a href="#ov-new2.8">What's new and what changed in 2.8</a></span></dt><dt><span class="sect2"><a href="#ov-new2.7">What's new and what changed in 2.7</a></span></dt><dt><span class="sect2"><a href="#ov-new2.6">What's new and what changed in 2.6</a></span></dt><dt><span class="sect2"><a href="#ov-new2.5">What's new and what changed in 2.5</a></span></dt><dt><span class="sect2"><a href="#ov-new2.4">What's new and what changed in 2.4</a></span></dt><dt><span class="sect2"><a href="#ov-new2.3">What's new and what changed in 2.3</a></span></dt><dt><span class="sect2"><a href="#ov-new2.2">What's new and what changed in 2.2</a></span></dt><dt><span class="sect2"><a href="#ov-new2.1">What's new and what changed in 2.1</a></span></dt><dt><span class="sect2"><a href="#ov-new2.0">What's new and what changed in 2.0</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.35">What's new and what changed in 1.7.35</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.34">What's new and what changed in 1.7.34</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.33">What's new and what changed in 1.7.33</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.32">What's new and what changed in 1.7.32</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.31">What's new and what changed in 1.7.31</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.29">What's new and what changed in 1.7.29</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.28">What's new and what changed in 1.7.28</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.27">What's new and what changed in 1.7.27</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.26">What's new and what changed in 1.7.26</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.25">What's new and what changed in 1.7.25</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.24">What's new and what changed in 1.7.24</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.23">What's new and what changed in 1.7.23</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.22">What's new and what changed in 1.7.22</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.21">What's new and what changed in 1.7.21</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.19">What's new and what changed in 1.7.19</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.18">What's new and what changed in 1.7.18</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.17">What's new and what changed in 1.7.17</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.16">What's new and what changed in 1.7.16</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.15">What's new and what changed in 1.7.15</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.14">What's new and what changed in 1.7.14</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.13">What's new and what changed in 1.7.13</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.12">What's new and what changed in 1.7.12</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.11">What's new and what changed in 1.7.11</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.10">What's new and what changed in 1.7.10</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.9">What's new and what changed in 1.7.9</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.8">What's new and what changed in 1.7.8</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.7">What's new and what changed in 1.7.7</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.6">What's new and what changed in 1.7.6</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.5">What's new and what changed in 1.7.5</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.3">What's new and what changed in 1.7.3</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.2">What's new and what changed in 1.7.2</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.1">What's new and what changed from 1.5 to 1.7</a></span></dt><dd><dl><dt><span class="sect3"><a href="#ov-new1.7-os">OS related changes</a></span></dt><dt><span class="sect3"><a href="#ov-new1.7-file">File Access related changes</a></span></dt><dt><span class="sect3"><a href="#ov-new1.7-net">Network related changes</a></span></dt><dt><span class="sect3"><a href="#ov-new1.7-device">Device related changes</a></span></dt><dt><span class="sect3"><a href="#ov-new1.7-posix">Other POSIX related changes</a></span></dt><dt><span class="sect3"><a href="#ov-new1.7-sec">Security related changes</a></span></dt><dt><span class="sect3"><a href="#ov-new1.7-misc">Miscellaneous</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="chapter"><a href="#setup-net">2. Setting Up Cygwin</a></span></dt><dd><dl><dt><span class="sect1"><a href="#internet-setup">Internet Setup</a></span></dt><dd><dl><dt><span class="sect2"><a href="#setup-download">Download Source</a></span></dt><dt><span class="sect2"><a href="#setup-dir">Selecting an Install Directory</a></span></dt><dt><span class="sect2"><a href="#setup-localdir">Local Package Directory</a></span></dt><dt><span class="sect2"><a href="#setup-connection">Connection Method</a></span></dt><dt><span class="sect2"><a href="#setup-mirror">Choosing Mirrors</a></span></dt><dt><span class="sect2"><a href="#setup-packages">Choosing Packages</a></span></dt><dt><span class="sect2"><a href="#setup-progress">Download and Installation Progress</a></span></dt><dt><span class="sect2"><a href="#setup-icons">Shortcuts</a></span></dt><dt><span class="sect2"><a href="#setup-postinstall">Post-Install Scripts</a></span></dt><dt><span class="sect2"><a href="#setup-troubleshooting">Troubleshooting</a></span></dt></dl></dd><dt><span class="sect1"><a href="#setup-env">Environment Variables</a></span></dt><dd><dl><dt><span class="sect2"><a href="#setup-env-ov">Overview</a></span></dt><dt><span class="sect2"><a href="#setup-env-win32">Restricted Win32 environment</a></span></dt></dl></dd><dt><span class="sect1"><a href="#setup-maxmem">Changing Cygwin's Maximum Memory</a></span></dt><dt><span class="sect1"><a href="#setup-locale">Internationalization</a></span></dt><dd><dl><dt><span class="sect2"><a href="#setup-locale-ov">Overview</a></span></dt><dt><span class="sect2"><a href="#setup-locale-how">How to set the locale</a></span></dt><dt><span class="sect2"><a href="#setup-locale-console">The Windows Console character set</a></span></dt><dt><span class="sect2"><a href="#setup-locale-problems">Potential Problems when using Locales</a></span></dt><dt><span class="sect2"><a href="#setup-locale-charsetlist">List of supported character sets</a></span></dt></dl></dd><dt><span class="sect1"><a href="#setup-files">Customizing bash</a></span></dt></dl></dd><dt><span class="chapter"><a href="#using">3. Using Cygwin</a></span></dt><dd><dl><dt><span class="sect1"><a href="#using-pathnames">Mapping path names</a></span></dt><dd><dl><dt><span class="sect2"><a href="#pathnames-intro">Introduction</a></span></dt><dt><span class="sect2"><a href="#mount-table">The Cygwin Mount Table</a></span></dt><dt><span class="sect2"><a href="#unc-paths">UNC paths</a></span></dt><dt><span class="sect2"><a href="#cygdrive">The cygdrive path prefix</a></span></dt><dt><span class="sect2"><a href="#usertemp">The usertemp file system type</a></span></dt><dt><span class="sect2"><a href="#pathnames-symlinks">Symbolic links</a></span></dt><dt><span class="sect2"><a href="#pathnames-win32">Using native Win32 paths</a></span></dt><dt><span class="sect2"><a href="#pathnames-win32-api">Using the Win32 file API in Cygwin applications</a></span></dt><dt><span class="sect2"><a href="#pathnames-additional">Additional Path-related Information</a></span></dt></dl></dd><dt><span class="sect1"><a href="#using-textbinary">Text and Binary modes</a></span></dt><dd><dl><dt><span class="sect2"><a href="#textbin-issue">The Issue</a></span></dt><dt><span class="sect2"><a href="#textbin-default">The default Cygwin behavior</a></span></dt><dt><span class="sect2"><a href="#textbin-question">Binary or text?</a></span></dt><dt><span class="sect2"><a href="#textbin-devel">Programming</a></span></dt></dl></dd><dt><span class="sect1"><a href="#using-filemodes">File permissions</a></span></dt><dt><span class="sect1"><a href="#using-specialnames">Special filenames</a></span></dt><dd><dl><dt><span class="sect2"><a href="#pathnames-etc">Special files in /etc</a></span></dt><dt><span class="sect2"><a href="#pathnames-dosdevices">Invalid filenames</a></span></dt><dt><span class="sect2"><a href="#pathnames-specialchars">Forbidden characters in filenames</a></span></dt><dt><span class="sect2"><a href="#pathnames-unusual">Filenames with unusual (foreign) characters</a></span></dt><dt><span class="sect2"><a href="#pathnames-casesensitive">Case sensitive filenames</a></span></dt><dt><span class="sect2"><a href="#pathnames-casesensitivedirs">Case sensitive directories</a></span></dt><dt><span class="sect2"><a href="#pathnames-posixdevices">POSIX devices</a></span></dt><dt><span class="sect2"><a href="#pathnames-exe">The .exe extension</a></span></dt><dt><span class="sect2"><a href="#pathnames-proc">The /proc filesystem</a></span></dt><dt><span class="sect2"><a href="#pathnames-proc-registry">The /proc/registry filesystem</a></span></dt><dt><span class="sect2"><a href="#pathnames-at">The @pathnames</a></span></dt></dl></dd><dt><span class="sect1"><a href="#using-cygwinenv">The <code class="envar">CYGWIN</code> environment
variable</a></span></dt><dd><dl><dt><span class="sect2"><a href="#cygwinenv-implemented-options">Implemented options</a></span></dt><dt><span class="sect2"><a href="#cygwinenv-removed-options">Obsolete options</a></span></dt></dl></dd><dt><span class="sect1"><a href="#ntsec">POSIX accounts, permission, and security</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ntsec-common">Brief overview of Windows security</a></span></dt><dt><span class="sect2"><a href="#ntsec-mapping">Mapping Windows accounts to POSIX accounts</a></span></dt><dd><dl><dt><span class="sect3"><a href="#ntsec-mapping-how">Mapping Windows SIDs to POSIX uid/gid values</a></span></dt><dt><span class="sect3"><a href="#ntsec-mapping-caching">Caching account information</a></span></dt><dt><span class="sect3"><a href="#ntsec-mapping-passwdinfo">Cygwin user names, home dirs, login shells</a></span></dt><dt><span class="sect3"><a href="#ntsec-mapping-nsswitch">The <code class="filename">/etc/nsswitch.conf</code> file</a></span></dt><dd><dl><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-syntax">The <code class="filename">/etc/nsswitch.conf</code> syntax</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-pwdgrp">The <code class="literal">passwd:</code> and <code class="literal">group:</code> settings</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-enum">The <code class="literal">db_enum:</code> setting</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-passwd">Settings defining how to create the <code class="literal">passwd</code> entry</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-home">The <code class="literal">db_home</code> setting</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-shell">The <code class="literal">db_shell</code> setting</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-gecos">The <code class="literal">db_gecos</code> setting</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-cygwin">The <code class="literal">cygwin</code> schema</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-posix">The <code class="literal">unix</code> schema</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-desc">The <code class="literal">desc</code> schema</a></span></dt></dl></dd><dt><span class="sect3"><a href="#ntsec-mapping-nfs">NFS account mapping</a></span></dt><dt><span class="sect3"><a href="#ntsec-mapping-samba">Samba account mapping</a></span></dt></dl></dd><dt><span class="sect2"><a href="#ntsec-files">File permissions</a></span></dt><dt><span class="sect2"><a href="#ntsec-setuid-overview">Switching the user context</a></span></dt><dd><dl><dt><span class="sect3"><a href="#ntsec-logonuser">Switching the user context with password authentication</a></span></dt><dt><span class="sect3"><a href="#ntsec-nopasswd1">Switching the user context without password, Method 1: Kerberos/MsV1_0 S4U authentication</a></span></dt><dt><span class="sect3"><a href="#ntsec-nopasswd3">Switching the user context without password, Method 2: With password</a></span></dt><dt><span class="sect3"><a href="#ntsec-setuid-impl">Switching the user context, how does it all fit together?</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#using-cygserver">Cygserver</a></span></dt><dd><dl><dt><span class="sect2"><a href="#what-is-cygserver">What is Cygserver?</a></span></dt><dt><span class="sect2"><a href="#cygserver-command-line">Cygserver command line options</a></span></dt><dt><span class="sect2"><a href="#install-cygserver">How to install Cygserver</a></span></dt><dt><span class="sect2"><a href="#start-cygserver">How to start Cygserver</a></span></dt><dt><span class="sect2"><a href="#cygserver-config">The Cygserver configuration file</a></span></dt></dl></dd><dt><span class="sect1"><a href="#using-utils">Cygwin Utilities</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#chattr">chattr</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#cygcheck">cygcheck</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#cygpath">cygpath</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#dumper">dumper</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#getconf">getconf</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#getfacl">getfacl</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#gmondump">gmondump</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#kill">kill</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#ldd">ldd</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#locale">locale</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#lsattr">lsattr</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#minidumper">minidumper</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#mkgroup">mkgroup</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#mkpasswd">mkpasswd</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#mount">mount</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#newgrp">newgrp</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#passwd">passwd</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#pldd">pldd</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#profiler">profiler</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#ps">ps</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#regtool">regtool</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#setfacl">setfacl</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#setmetamode">setmetamode</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#ssp">ssp</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#strace">strace</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#tzset">tzset</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#umount">umount</a></span><span class="refpurpose"></span></dt></dl></dd><dt><span class="sect1"><a href="#using-effectively">Using Cygwin effectively with Windows</a></span></dt><dd><dl><dt><span class="sect2"><a href="#using-pathnames-effectively">Pathnames</a></span></dt><dt><span class="sect2"><a href="#using-net">Cygwin and Windows Networking</a></span></dt><dt><span class="sect2"><a href="#using-shortcuts">Creating shortcuts</a></span></dt><dt><span class="sect2"><a href="#using-printing">Printing</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#programming">4. Programming with Cygwin</a></span></dt><dd><dl><dt><span class="sect1"><a href="#gcc">Using GCC with Cygwin</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gcc-default">Standard Usage</a></span></dt><dt><span class="sect2"><a href="#gcc-64">Building applications for 64 bit Cygwin</a></span></dt><dt><span class="sect2"><a href="#gcc-gui">GUI Mode Applications</a></span></dt></dl></dd><dt><span class="sect1"><a href="#gdb">Debugging Cygwin Programs</a></span></dt><dt><span class="sect1"><a href="#dll">Building and Using DLLs</a></span></dt><dd><dl><dt><span class="sect2"><a href="#dll-build">Building DLLs</a></span></dt><dt><span class="sect2"><a href="#dll-link">Linking Against DLLs</a></span></dt></dl></dd><dt><span class="sect1"><a href="#windres">Defining Windows Resources</a></span></dt><dt><span class="sect1"><a href="#gprof">Profiling Cygwin Programs</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gprof-intro">Introduction</a></span></dt><dt><span class="sect2"><a href="#gprof-ex">Examples</a></span></dt><dt><span class="sect2"><a href="#gprof-ss">Special situations</a></span></dt><dd><dl><dt><span class="sect3"><a href="#gprof-mt">Profiling multi-threaded programs</a></span></dt><dt><span class="sect3"><a href="#gprof-fork">Profiling programs that fork</a></span></dt><dt><span class="sect3"><a href="#gprof-res">Getting better profiling resolution</a></span></dt><dt><span class="sect3"><a href="#gprof-lib">Profiling programs with their libraries</a></span></dt><dt><span class="sect3"><a href="#gprof-cyg">Profiling Cygwin itself</a></span></dt></dl></dd></dl></dd></dl></dd></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>3.1. <a href="#pathnames-mount-ex">Displaying the current set of mount points</a></dt><dt>3.2. <a href="#pathnames-mount-dir">Displaying Windows mount points as cygdrives</a></dt><dt>3.3. <a href="#pathnames-at-ex"> Using @pathname</a></dt><dt>3.4. <a href="#utils-cygcheck-eiex">Example <span class="command">cygcheck</span> -e/-i
      usage</a></dt><dt>3.5. <a href="#utils-cygcheck-ex">Example <span class="command">cygcheck</span> -f/-l
      usage</a></dt><dt>3.6. <a href="#utils-search-ex">Searching all packages for a
      file</a></dt><dt>3.7. <a href="#utils-cygpath-ex">Example <span class="command">cygpath</span> usage</a></dt><dt>3.8. <a href="#utils-kill-ex">Using the kill command</a></dt><dt>3.9. <a href="#utils-mkgroup-ex">Setting up group entry for current user with different
        domain/group separator</a></dt><dt>3.10. <a href="#utils-althome-ex">Using an alternate home root</a></dt><dt>3.11. <a href="#utils-mount-ex">Displaying the current set of mount points</a></dt><dt>3.12. <a href="#utils-mount-add-ex">Adding mount points</a></dt><dt>3.13. <a href="#utils-cygdrive-ex">Changing the default prefix</a></dt><dt>3.14. <a href="#utils-cygdrive-ex2">Changing the default prefix with specific mount options</a></dt><dt>4.1. <a href="#gcc-hello-world">Building Hello World with GCC</a></dt><dt>4.2. <a href="#gcc-64-ex1">64bit-programming, Using ReadFile, 1st try</a></dt><dt>4.3. <a href="#gcc-64-ex2">64bit-programming, Using ReadFile, 2nd try</a></dt><dt>4.4. <a href="#gdb-g">Compiling with -g</a></dt><dt>4.5. <a href="#gdb-break">"break" in gdb</a></dt><dt>4.6. <a href="#gdb-cliargs">Debugging with command line arguments</a></dt><dt>4.7. <a href="#gprof-flat">Flat profile</a></dt><dt>4.8. <a href="#gprof-cg">Call graph</a></dt><dt>4.9. <a href="#gprof-line">Source line profile</a></dt><dt>4.10. <a href="#gprof-prefix"></a></dt></dl></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="overview"></a>Chapter 1. Cygwin Overview</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#what-is-it">What is it?</a></span></dt><dt><span class="sect1"><a href="#ov-ex-win">Quick Start Guide for those more experienced with Windows</a></span></dt><dt><span class="sect1"><a href="#ov-ex-unix">Quick Start Guide for those more experienced with UNIX</a></span></dt><dt><span class="sect1"><a href="#are-free">Are the Cygwin tools free software?</a></span></dt><dt><span class="sect1"><a href="#brief-history">A brief history of the Cygwin project</a></span></dt><dt><span class="sect1"><a href="#highlights">Highlights of Cygwin Functionality</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ov-hi-intro">Introduction</a></span></dt><dt><span class="sect2"><a href="#ov-hi-perm">Permissions and Security</a></span></dt><dt><span class="sect2"><a href="#ov-hi-files">File Access</a></span></dt><dt><span class="sect2"><a href="#ov-hi-textvsbinary">Text Mode vs. Binary Mode</a></span></dt><dt><span class="sect2"><a href="#ov-hi-ansiclib">ANSI C Library</a></span></dt><dt><span class="sect2"><a href="#ov-hi-process">Process Creation</a></span></dt><dt><span class="sect2"><a href="#ov-hi-signals">Signals</a></span></dt><dt><span class="sect2"><a href="#ov-hi-sockets">Sockets</a></span></dt><dt><span class="sect2"><a href="#ov-hi-select">Select</a></span></dt></dl></dd><dt><span class="sect1"><a href="#ov-new">What's new and what changed in Cygwin</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ov-new3.6">What's new and what changed in 3.6</a></span></dt><dt><span class="sect2"><a href="#ov-new3.5">What's new and what changed in 3.5</a></span></dt><dt><span class="sect2"><a href="#ov-new3.4">What's new and what changed in 3.4</a></span></dt><dt><span class="sect2"><a href="#ov-new3.3">What's new and what changed in 3.3</a></span></dt><dt><span class="sect2"><a href="#ov-new3.2">What's new and what changed in 3.2</a></span></dt><dt><span class="sect2"><a href="#ov-new3.1">What's new and what changed in 3.1</a></span></dt><dt><span class="sect2"><a href="#ov-new3.0">What's new and what changed in 3.0</a></span></dt><dt><span class="sect2"><a href="#ov-new2.11">What's new and what changed in 2.11</a></span></dt><dt><span class="sect2"><a href="#ov-new2.10">What's new and what changed in 2.10</a></span></dt><dt><span class="sect2"><a href="#ov-new2.9">What's new and what changed in 2.9</a></span></dt><dt><span class="sect2"><a href="#ov-new2.8">What's new and what changed in 2.8</a></span></dt><dt><span class="sect2"><a href="#ov-new2.7">What's new and what changed in 2.7</a></span></dt><dt><span class="sect2"><a href="#ov-new2.6">What's new and what changed in 2.6</a></span></dt><dt><span class="sect2"><a href="#ov-new2.5">What's new and what changed in 2.5</a></span></dt><dt><span class="sect2"><a href="#ov-new2.4">What's new and what changed in 2.4</a></span></dt><dt><span class="sect2"><a href="#ov-new2.3">What's new and what changed in 2.3</a></span></dt><dt><span class="sect2"><a href="#ov-new2.2">What's new and what changed in 2.2</a></span></dt><dt><span class="sect2"><a href="#ov-new2.1">What's new and what changed in 2.1</a></span></dt><dt><span class="sect2"><a href="#ov-new2.0">What's new and what changed in 2.0</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.35">What's new and what changed in 1.7.35</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.34">What's new and what changed in 1.7.34</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.33">What's new and what changed in 1.7.33</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.32">What's new and what changed in 1.7.32</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.31">What's new and what changed in 1.7.31</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.29">What's new and what changed in 1.7.29</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.28">What's new and what changed in 1.7.28</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.27">What's new and what changed in 1.7.27</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.26">What's new and what changed in 1.7.26</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.25">What's new and what changed in 1.7.25</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.24">What's new and what changed in 1.7.24</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.23">What's new and what changed in 1.7.23</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.22">What's new and what changed in 1.7.22</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.21">What's new and what changed in 1.7.21</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.19">What's new and what changed in 1.7.19</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.18">What's new and what changed in 1.7.18</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.17">What's new and what changed in 1.7.17</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.16">What's new and what changed in 1.7.16</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.15">What's new and what changed in 1.7.15</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.14">What's new and what changed in 1.7.14</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.13">What's new and what changed in 1.7.13</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.12">What's new and what changed in 1.7.12</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.11">What's new and what changed in 1.7.11</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.10">What's new and what changed in 1.7.10</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.9">What's new and what changed in 1.7.9</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.8">What's new and what changed in 1.7.8</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.7">What's new and what changed in 1.7.7</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.6">What's new and what changed in 1.7.6</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.5">What's new and what changed in 1.7.5</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.3">What's new and what changed in 1.7.3</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.2">What's new and what changed in 1.7.2</a></span></dt><dt><span class="sect2"><a href="#ov-new1.7.1">What's new and what changed from 1.5 to 1.7</a></span></dt><dd><dl><dt><span class="sect3"><a href="#ov-new1.7-os">OS related changes</a></span></dt><dt><span class="sect3"><a href="#ov-new1.7-file">File Access related changes</a></span></dt><dt><span class="sect3"><a href="#ov-new1.7-net">Network related changes</a></span></dt><dt><span class="sect3"><a href="#ov-new1.7-device">Device related changes</a></span></dt><dt><span class="sect3"><a href="#ov-new1.7-posix">Other POSIX related changes</a></span></dt><dt><span class="sect3"><a href="#ov-new1.7-sec">Security related changes</a></span></dt><dt><span class="sect3"><a href="#ov-new1.7-misc">Miscellaneous</a></span></dt></dl></dd></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="what-is-it"></a>What is it?</h2></div></div></div><p>
Cygwin is a Linux-like environment for Windows. It consists of a DLL
(<code class="filename">cygwin1.dll</code>), which acts as an emulation layer
providing substantial <a class="ulink" href="http://www.pasc.org/#POSIX" target="_top">POSIX</a>
(Portable Operating System Interface) system call functionality, and a
collection of tools, which provide a Linux look and feel. The Cygwin DLL
works with all AMD64 versions of Windows NT since Windows Vista/Server 2008.
The API follows the
<a class="ulink" href="http://www.opengroup.org/onlinepubs/009695399/nfindex.html" target="_top">Single
Unix Specification</a> as much as possible, and then Linux practice.
The major differences between Cygwin and Linux is the C library
(<code class="literal">newlib</code> instead of <code class="literal">glibc</code>).
</p><p>
With Cygwin installed, users have access to many standard UNIX
utilities.  They can be used from one of the provided shells such
as <span class="command"><strong>bash</strong></span> or from the Windows Command Prompt.
Additionally, programmers may write Win32 console or GUI applications
that make use of the standard Microsoft Win32 API and/or the Cygwin API.
As a result, it is possible to easily port many significant UNIX
programs without the need for extensive changes to the source code.
This includes configuring and building most of the available GNU
software (including the development tools included with the Cygwin
distribution). 
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ov-ex-win"></a>Quick Start Guide for those more experienced with Windows</h2></div></div></div><p>
If you are new to the world of UNIX, you may find it difficult to
understand at first. This guide is not meant to be comprehensive,
so we recommend that you use the many available Internet resources
to become acquainted with UNIX basics (search for "UNIX basics" or
"UNIX tutorial"). 
</p><p>
To install a basic Cygwin environment, run the Cygwin Setup program from
the <a class="ulink" href="https://cygwin.com/" target="_top">Cygwin homepage</a> and click
<code class="literal">Next</code>
at each page.  The default settings are correct for most users. If you
want to know more about what each option means, see 
<a class="xref" href="#internet-setup" title="Internet Setup">the section called &#8220;Internet Setup&#8221;</a>. Use the Cygwin Setup program
any time you want to update or install a Cygwin package.  If you are
installing Cygwin for a specific purpose, use it to install the tools
that you need. For example, if you want to compile C++ programs, you 
need the <code class="systemitem">gcc-g++</code> package and probably a text
editor like <code class="systemitem">nano</code>.  When running Cygwin Setup,
clicking on categories and packages in the package installation screen
will provide you with the ability to control what is installed or updated. 
</p><p>
After installation, you can find Cygwin-specific documentation in
the <code class="literal">/usr/share/doc/Cygwin/</code> directory.
</p><p>
Developers coming from a Windows background will be able to write 
console or GUI executables that rely on the Microsoft Win32 API instead
of Cygwin using the mingw32 or mingw64 cross-compiler toolchains.  The
<span class="command"><strong>-shared</strong></span> option to GCC allows to write Windows Dynamically
Linked Libraries (DLLs).  The resource compiler <span class="command"><strong>windres</strong></span>
is also provided.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ov-ex-unix"></a>Quick Start Guide for those more experienced with UNIX</h2></div></div></div><p>
If you are an experienced UNIX user who misses a powerful command-line
environment, you will enjoy Cygwin.
Developers coming from a UNIX background will find a set of utilities
they are already comfortable using, including a working UNIX shell.  The
compiler tools are the standard GNU compilers most people will have previously
used under UNIX, only ported to the Windows host.  Programmers wishing to port
UNIX software to Windows NT will find that the Cygwin library provides
an easy way to port many UNIX packages, with only minimal source code
changes.
</p><p>
Note that there are some workarounds that cause Cygwin to behave differently
than most UNIX-like operating systems; these are described in more detail in 
<a class="xref" href="#using-effectively" title="Using Cygwin effectively with Windows">the section called &#8220;Using Cygwin effectively with Windows&#8221;</a>.
</p><p>
Use the graphical Cygwin Setup program (available from the
<a class="ulink" href="https://cygwin.com/" target="_top">Cygwin homepage</a>)
any time you want to update or install a Cygwin package.  This program must
be run manually every time you want to check for updated packages since Cygwin
does not currently include a mechanism for automatically detecting
package updates.
</p><p>
By default, the Cygwin Setup program only installs a minimal subset of
packages.  Add any other packages by clicking on the <code class="literal">+</code>
next to the Category name and selecting the package from the displayed
list.  You may search for specific tools by using the
<a class="ulink" href="https://cygwin.com/packages/" target="_top">Setup Package Search</a>
at the Cygwin web site.
</p><p>
After installation, you can find Cygwin-specific documentation in
the <code class="literal">/usr/share/doc/Cygwin/</code> directory.
</p><p>
For more information about what each option in Cygwin Setup means,
see <a class="xref" href="#internet-setup" title="Internet Setup">the section called &#8220;Internet Setup&#8221;</a>.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="are-free"></a>Are the Cygwin tools free software?</h2></div></div></div><p>Yes. Parts are <a class="ulink" href="http://www.gnu.org/" target="_top">GNU</a> software 
(<span class="command"><strong>gcc</strong></span>, <span class="command"><strong>gas</strong></span>, <span class="command"><strong>ld</strong></span>, etc.),
parts are covered by the standard 
<a class="ulink" href="http://www.x.org/Downloads_terms.html" target="_top">X11 license</a>, 
some of it is public domain, some of it was written by Red Hat and placed under
the <a class="ulink" href="http://www.gnu.org/licenses/gpl.html" target="_top">GNU General Public 
License</a> (GPL) or <a class="ulink" href="http://www.gnu.org/licenses/lgpl.html" target="_top">
GNU Lesser General Public License</a> (LGPL). None of it is shareware.
You don't have to pay anyone to use it but you should be sure to read the
copyright section of the FAQ for more information on how the GNU GPL may
affect your use of these tools.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="brief-history"></a>A brief history of the Cygwin project</h2></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
A historical look into the first years of Cygwin development is
Geoffrey J. Noer's 1998 paper, "Cygwin32: A Free Win32 Porting Layer for
UNIX® Applications" which can be found at the <a class="ulink" href="http://www.usenix.org/publications/library/proceedings/usenix-nt98/technical.html" target="_top">
2nd USENIX Windows NT Symposium Online Proceedings</a>.
</p></div><p>
Cygwin began development in 1995 at Cygnus Solutions (now part of Red Hat,
Inc.).  The first thing done was to enhance the development tools 
(<span class="command"><strong>gcc</strong></span>, <span class="command"><strong>gdb</strong></span>, <span class="command"><strong>gas</strong></span>, 
etc.) so that they could generate and interpret Win32 native
object files.
The next task was to port the tools to Win NT/9x. We could have
done this by rewriting large portions of the source to work within the
context of the Win32 API. But this would have meant spending a huge
amount of time on each and every tool. Instead, we took a
substantially different approach by writing a shared library
(the Cygwin DLL) that adds the necessary UNIX-like functionality
missing from the Win32 API (<code class="function">fork</code>,
<code class="function">spawn</code>, <code class="function">signals</code>,
<code class="function">select</code>, <code class="function">sockets</code>, etc.).  We call this
new interface the Cygwin API. Once written, it was possible to build working
Win32 tools using UNIX-hosted cross-compilers, linking against this
library.</p><p>From this point, we pursued the goal of producing Windows-hosted tools
capable of rebuilding themselves under Windows 9x and NT (this is
often called self-hosting). Since neither OS ships with standard UNIX
user tools (fileutils, textutils, bash, etc...), we had to get the GNU
equivalents working with the Cygwin API. Many of these tools were
previously only built natively so we had to modify their configure
scripts to be compatible with cross-compilation. Other than the
configuration changes, very few source-level changes had to be
made since Cygwin provided a UNIX-like API. Running bash with the development tools and user tools in place,
Windows 9x and NT looked like a flavor of UNIX from the perspective of
the GNU configure mechanism. Self hosting was achieved as of the beta
17.1 release in October 1996.</p><p>
The entire Cygwin toolset was available as a monolithic install. In
April 2000, the project announced a
<a class="ulink" href="https://www.cygwin.com/ml/cygwin/2000-04/msg00269.html" target="_top">
New Cygwin Net Release</a> which provided a graphical non-Cygwin
Setup program to install and upgrade each package separately. Since then,
the Cygwin DLL and the Setup tool have seen continuous development.
</p><p>
The biggest major improvement in this development was the 1.7 release in
2009, which dropped Windows 95/98/Me support in favor of using Windows
NT features more extensively.  It adds a lot of new features like
case-sensitive filenames, NFS interoperability, IPv6 support and much
more.</p><p>The latest big improvement is the 64 bit Cygwin DLL which
allows to run natively on AMD64 Windows machines.  The first release
available in a 64 bit version was 1.7.19.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="highlights"></a>Highlights of Cygwin Functionality</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-hi-intro"></a>Introduction</h3></div></div></div><p>When a binary linked
against the library is executed, the Cygwin DLL is loaded into the
application's text segment.  Because we are trying to emulate a UNIX kernel
which needs access to all processes running under it, the first Cygwin DLL to
run creates shared memory areas and global synchronization objects that other
processes using separate instances of the DLL can access.  This is used to keep track of open file descriptors and to assist fork and exec, among other
purposes.  Every process also has a per_process structure that contains
information such as process id, user id, signal masks, and other similar
process-specific information.</p><p>The DLL is implemented as a standard DLL in the Win32 subsystem.  Under
the hood it's using the Win32 API, as well as the native NT API, where
appropriate.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Some restrictions apply for calls to the Win32 API.
For details, see <a class="xref" href="#setup-env-win32" title="Restricted Win32 environment">the section called &#8220;Restricted Win32 environment&#8221;</a>,
as well as <a class="xref" href="#pathnames-win32-api" title="Using the Win32 file API in Cygwin applications">the section called &#8220;Using the Win32 file API in Cygwin applications&#8221;</a>.</p></div><p>The native NT API is used mainly for speed, as well as to access
NT capabilities which are useful to implement certain POSIX features, but
are hidden to the Win32 API.
</p><p>Due to some restrictions in Windows, it's not always possible
to strictly adhere to existing UNIX standards like POSIX.1.  Fortunately
these are mostly corner cases.</p><p>Note that many of the things that Cygwin does to provide POSIX
compatibility do not mesh well with the native Windows API.  If you mix
POSIX calls with Windows calls in your program it is possible that you
will see uneven results.  In particular, Cygwin signals will not work
with Windows functions which block and Windows functions which accept
filenames may be confused by Cygwin's support for long filenames.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-hi-perm"></a>Permissions and Security</h3></div></div></div><p>Windows NT includes a sophisticated security model based on Access
Control Lists (ACLs).  Cygwin maps Win32 file ownership and permissions to
ACLs by default, on file systems supporting them (usually NTFS).  Solaris
style ACLs and accompanying function calls are also supported.
The chmod call maps UNIX-style permissions back to the Win32 equivalents. 
Because many programs expect to be able to find the
<code class="filename">/etc/passwd</code> and
<code class="filename">/etc/group</code> files, we provide <a class="ulink" href="https://cygwin.com/cygwin-ug-net/using-utils.html" target="_top">utilities</a>
that can be used to construct them from the user and group information
provided by the operating system.</p><p>Users with Administrator rights are permitted to chown files.
With version 1.1.3 Cygwin introduced a mechanism for setting real and
effective UIDs. This is described in <a class="xref" href="#ntsec" title="POSIX accounts, permission, and security">the section called &#8220;POSIX accounts, permission, and security&#8221;</a>.  As
of version 1.5.13, the Cygwin developers are not aware of any feature in
the Cygwin DLL that would allow users to gain privileges or to access
objects to which they have no rights under Windows.  However there is no
guarantee that Cygwin is as secure as the Windows it runs on. Cygwin
processes share some variables and are thus easier targets of denial of
service type of attacks.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-hi-files"></a>File Access</h3></div></div></div><p>Cygwin supports
both POSIX- and Win32-style paths, using either forward or back slashes as the
directory delimiter.  Paths coming into the DLL are translated from POSIX to
native NT as needed.  From the application perspective, the file system is
a POSIX-compliant one.  The implementation details are safely hidden in the
Cygwin DLL.  UNC pathnames (starting with two slashes) are supported for
network paths.</p><p>The layout of this POSIX view of the Windows file system space is
stored in the <code class="filename">/etc/fstab</code> file.  Actually, there is a
system-wide <code class="filename">/etc/fstab</code> file as well as a user-specific
fstab file <code class="filename">/etc/fstab.d/${USER}</code>.</p><p>At startup the DLL has to find out where it can find the
<code class="filename">/etc/fstab</code> file.  The mechanism used for this is simple.
First it retrieves it's own path, for instance
<code class="filename">C:\Cygwin\bin\cygwin1.dll</code>.  From there it deduces
that the root path is <code class="filename">C:\Cygwin</code>.  So it looks for the
<code class="filename">fstab</code> file in <code class="filename">C:\Cygwin\etc\fstab</code>. 
The layout of this file is very similar to the layout of the
<code class="filename">fstab</code> file on Linux.  Just instead of block devices,
the mount points point to Win32 paths.  On installation, a default
<code class="filename">fstab</code> file is created, which can easily be changed
using the editor of your choice.</p><p>The <code class="filename">fstab</code> file allows mounting arbitrary Win32
paths into the POSIX file system space.  A special case is the so-called
cygdrive prefix.
It's the path under which every available drive in the system is mounted
under its drive letter.  The default value is <code class="filename">/cygdrive</code>,
so you can access the drives as <code class="filename">/cygdrive/c</code>,
<code class="filename">/cygdrive/d</code>, etc...  The cygdrive prefix can be set to
some other value (<code class="filename">/mnt</code> for instance) in the
<code class="filename">fstab</code> file(s).</p><p>The library exports several Cygwin-specific functions that can be used
by external programs to convert a path or path list from Win32 to POSIX or vice
versa.  Shell scripts and Makefiles cannot call these functions directly.
Instead, they can do the same path translations by executing the
<span class="command"><strong>cygpath</strong></span> utility program that we provide with Cygwin.</p><p>Win32 applications handle filenames in a case preserving, but case
insensitive manner.  Cygwin supports case sensitivity on file systems
supporting that.  Windows only supports case sensitivity when a specific
registry value is changed.  Therefore, case sensitivity is not usually the
default.</p><p>Cygwin supports creating and reading symbolic links, even on Windows
filesystems and OS versions which don't support them.
See <a class="xref" href="#pathnames-symlinks" title="Symbolic links">the section called &#8220;Symbolic links&#8221;</a> for details.</p><p>Hard links are fully supported on NTFS and NFS file systems.  On FAT
and other file systems which don't support hardlinks, the call returns with
an error, just like on other POSIX systems.</p><p>On file systems which don't support unique persistent file IDs (FAT,
older Samba shares) the inode number for a file is calculated by hashing its
full Win32 path.  The inode number generated by the stat call always matches
the one returned in <code class="literal">d_ino</code> of the <code class="literal">dirent</code>
structure.  It is worth noting that the number produced by this method is not
guaranteed to be unique.  However, we have not found this to be a significant
problem because of the low probability of generating a duplicate inode number.
</p><p>Cygwin supports Extended Attributes (EAs) via the linux-specific function
calls <code class="function">getxattr</code>, <code class="function">setxattr</code>,
<code class="function">listxattr</code>, and <code class="function">removexattr</code>.  All EAs
on Samba or NTFS are treated as user EAs, so, if the name of an EA is "foo"
from the Windows perspective, it's transformed into "user.foo" within Cygwin.
This allows Linux-compatible EA operations and keeps tools like
<span class="command"><strong>attr</strong></span>, or <span class="command"><strong>setfattr</strong></span> happy.
</p><p><code class="function">chroot</code> is supported.  Kind of.  Chroot is not a
concept known by Windows.  This implies some serious restrictions.  First of
all, the <code class="function">chroot</code> call isn't a privileged call.  Any user
may call it.  Second, the chroot environment isn't safe against native windows
processes.  Given that, chroot in Cygwin is only a hack which pretends security
where there is none.  For that reason the usage of chroot is discouraged.
Don't use it unless you really, really know what you're doing.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-hi-textvsbinary"></a>Text Mode vs. Binary Mode</h3></div></div></div><p>It is often important that files created by native Windows
applications be interoperable with Cygwin applications.  For example, a
file created by a native Windows text editor should be readable by a
Cygwin application, and vice versa.</p><p>Unfortunately, UNIX and Win32 have different end-of-line
conventions in text files.  A UNIX text file will have a single newline
character (LF) whereas a Win32 text file will instead use a two
character sequence (CR+LF).  Consequently, the two character sequence
must be translated on the fly by Cygwin into a single character newline
when reading in text mode.</p><p>This solution addresses the newline interoperability concern at
the expense of violating the POSIX requirement that text and binary mode
be identical.  Consequently, processes that attempt to lseek through
text files can no longer rely on the number of bytes read to be an
accurate indicator of position within the file.  For this reason, Cygwin
allows you to choose the mode in which a file is read in several ways.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-hi-ansiclib"></a>ANSI C Library</h3></div></div></div><p>We chose to include Red Hat's own existing ANSI C library
"newlib" as part of the library, rather than write all of the lib C
and math calls from scratch.  Newlib is a BSD-derived ANSI C library,
previously only used by cross-compilers for embedded systems
development.  Other functions, which are not supported by newlib have
been added to the Cygwin sources using BSD implementations as much as
possible.</p><p>The reuse of existing free implementations of such things
as the glob, regexp, and getopt libraries saved us considerable
effort.  In addition, Cygwin uses Doug Lea's free malloc
implementation that successfully balances speed and compactness.  The
library accesses the malloc calls via an exported function pointer.
This makes it possible for a Cygwin process to provide its own
malloc if it so desires.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-hi-process"></a>Process Creation</h3></div></div></div><p>The <code class="function">fork</code> call in Cygwin is particularly interesting
because it does not map well on top of the Win32 API.  This makes it very
difficult to implement correctly.  Currently, the Cygwin fork is a
non-copy-on-write implementation similar to what was present in early
flavors of UNIX.</p><p>As the child process is created as new process, both the main
executable and all the dlls loaded either statically or dynamically have
to be identical as to when the parent process has started or loaded a dll.
While Windows does not allow to remove binaries in use from the file
system, they still can be renamed or moved into the recycle bin, as
outlined for unlink(2) in <a class="xref" href="#ov-new1.7-file" title="File Access related changes">the section called &#8220;File Access related changes&#8221;</a>.
To allow an existing process to fork, the original binary files need to be
available via their original file names, but they may reside in a
different directory when using the <a class="ulink" href="https://social.msdn.microsoft.com/search/en-US?query=dotlocal%20dll%20redirection" target="_top">DotLocal (.local) Dll Redirection</a> feature.
Since NTFS does support hardlinks, when the fork fails we try again, but
create a private directory containing hardlinks to the original files as
well as the <code class="literal">.local</code> file now.  The base directory for the
private hardlink directory is <code class="literal">/var/run/cygfork/</code>, which
you have to create manually for now if you need to protect fork against
updates to executables and dlls on your Cygwin instance.  As hardlinks
cannot be used across multiple NTFS file systems, please make sure your
executable and dll replacing operations operate on the same single NTFS file
system as your Cygwin instance and the <code class="literal">/var/run/cygfork/</code>
directory.  Note that this private hardlink directory also does help for
when a wrong dll is found in the parent process' current working directory.
To enable creating the hardlinks, you need to stop all currently running
Cygwin processes after creating this directory, once per Cygwin installation:
</p><div class="literallayout"><p>$ mkdir --mode=a=rwxt /var/run/cygfork</p></div><p>We create one hardlink directory per user, application and application
age, and remove it when no more processes use that directory.  To indicate
whether a directory still is in use, we define a mutex name similar to
the directory name.  As mutexes are destroyed when no process holds a
handle open any more, we can clean up even after power loss or similar:
Both the parent and child process, at exit they lock the mutex with
almost no timeout and close it, to get the closure promoted synchronously.
If the lock succeeded before closing, directory cleanup is started:
For each directory found, the corresponding mutex is created with lock.
If that succeeds, the directory is removed, as it is unused now, and the
corresponding mutex handle is closed.</p><p>Before fork, when about to create hardlinks for the first time, the
mutex is opened and locked with infinite timeout, to wait for the cleanup
that may run at the same time.  Once locked, the mutex is unlocked
immediately, but the mutex handle stays open until exit, and the hardlinks
are created.  It is fine for multiple processes to concurrently create
the same hardlinks, as the result really should be identical.  Once the
mutex is open, we can create more hardlinks within this one directory
without the need to lock the mutex again.</p><p>The first thing that happens when a parent process
forks a child process is that the parent initializes a space in the
Cygwin process table for the child.  It then creates a suspended
child process using the Win32 CreateProcess call.  Next, the parent
process calls setjmp to save its own context and sets a pointer to
this in a Cygwin shared memory area (shared among all Cygwin
tasks).  It then fills in the child's .data and .bss sections by
copying from its own address space into the suspended child's address
space.  After the child's address space is initialized, the child is
run while the parent waits on a mutex.  The child discovers it has
been forked and longjumps using the saved jump buffer.  The child then
sets the mutex the parent is waiting on and blocks on another mutex.
This is the signal for the parent to copy its stack and heap into the
child, after which it releases the mutex the child is waiting on and
returns from the fork call.  Finally, the child wakes from blocking on
the last mutex, recreates any memory-mapped areas passed to it via the
shared area, and returns from fork itself.</p><p>While we have some
ideas as to how to speed up our fork implementation by reducing the
number of context switches between the parent and child process, fork
will almost certainly always be inefficient under Win32.  Fortunately,
in most circumstances the spawn family of calls provided by Cygwin
can be substituted for a fork/exec pair with only a little effort.
These calls map cleanly on top of the Win32 API.  As a result, they
are much more efficient.  Changing the compiler's driver program to
call spawn instead of fork was a trivial change and increased
compilation speeds by twenty to thirty percent in our
tests.</p><p>However, spawn and exec present their own set of
difficulties.  Because there is no way to do an actual exec under
Win32, Cygwin has to invent its own Process IDs (PIDs).  As a
result, when a process performs multiple exec calls, there will be
multiple Windows PIDs associated with a single Cygwin PID.  In some
cases, stubs of each of these Win32 processes may linger, waiting for
their exec'd Cygwin process to exit.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ov-hi-process-problems"></a>Problems with process creation</h4></div></div></div><p>The semantics of <code class="literal">fork</code> require that a forked
child process have <span class="emphasis"><em>exactly</em></span> the same address
space layout as its parent. However, Windows provides no native
support for cloning address space between processes and several
features actively undermine a reliable <code class="literal">fork</code>
implementation. Three issues are especially prevalent:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>DLL base address collisions. Unlike *nix shared
libraries, which use "position-independent code", Windows shared
libraries assume a fixed base address. Whenever the hard-wired
address ranges of two DLLs collide (which occurs quite often), the
Windows loader must "rebase" one of them to a different
address. However, it may not resolve collisions consistently, and
may rebase a different dll and/or move it to a different address
every time. Cygwin can usually compensate for this effect when it
involves libraries opened dynamically, but collisions among
statically-linked dlls (dependencies known at compile time) are
resolved before <code class="literal">cygwin1.dll</code> initializes and
cannot be fixed afterward. This problem can only be solved by
removing the base address conflicts which cause the problem,
usually using the <code class="literal">rebaseall</code> tool.</p></li><li class="listitem" style="list-style-type: disc"><p>Address space layout randomization (ASLR). Starting with
Vista, Windows implements ASLR, which means that thread stacks,
heap, memory-mapped files, and statically-linked dlls are placed
at different (random) locations in each process. This behaviour
interferes with a proper <code class="literal">fork</code>, and if an
unmovable object (process heap or system dll) ends up at the wrong
location, Cygwin can do nothing to compensate (though it will
retry a few times automatically).</p></li><li class="listitem" style="list-style-type: disc"><p>DLL injection by
<a class="ulink" href="https://cygwin.com/faq/faq.html#faq.using.bloda" target="_top">
BLODA</a>. Badly-behaved applications which
inject dlls into other processes often manage to clobber important
sections of the child's address space, leading to base address
collisions which rebasing cannot fix. The only way to resolve this
problem is to remove (usually uninstall) the offending app.</p></li></ul></div><p>In summary, current Windows implementations make it
impossible to implement a perfectly reliable fork, and occasional
fork failures are inevitable.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-hi-signals"></a>Signals</h3></div></div></div><p>When
a Cygwin process starts, the library starts a secondary thread for
use in signal handling.  This thread waits for Windows events used to
pass signals to the process.  When a process notices it has a signal,
it scans its signal bitmask and handles the signal in the appropriate
fashion.</p><p>Several complications in the implementation arise from the
fact that the signal handler operates in the same address space as the
executing program.  The immediate consequence is that Cygwin system
functions are interruptible unless special care is taken to avoid
this.   We go to some lengths to prevent the sig_send function that
sends signals from being interrupted.  In the case of a process
sending a signal to another process, we place a mutex around sig_send
such that sig_send will not be interrupted until it has completely
finished sending the signal.</p><p>In the case of a process sending
itself a signal, we use a separate semaphore/event pair instead of the
mutex.  sig_send starts by resetting the event and incrementing the
semaphore that flags the signal handler to process the signal.  After
the signal is processed, the signal handler signals the event that it
is done.  This process keeps intraprocess signals synchronous, as
required by POSIX.</p><p>Most standard UNIX signals are provided.  Job
control works as expected in shells that support
it.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-hi-sockets"></a>Sockets</h3></div></div></div><p>Socket-related calls in Cygwin basically call the functions by the
same name in Winsock, Microsoft's implementation of Berkeley sockets, but
with lots of tweaks.  All sockets are non-blocking under the hood to allow
to interrupt blocking calls by POSIX signals.  Additional bookkeeping is
necessary to implement correct socket sharing POSIX semantics and especially
for the select call.  Some socket-related functions are not implemented at
all in Winsock, as, for example, socketpair.  Starting with Windows Vista,
Microsoft removed the legacy calls <code class="function">rcmd(3)</code>,
<code class="function">rexec(3)</code> and <code class="function">rresvport(3)</code>.
Recent versions of Cygwin now implement all these calls internally.</p><p>An especially troublesome feature of Winsock is that it must be
initialized before the first socket function is called.  As a result, Cygwin
has to perform this initialization on the fly, as soon as the first
socket-related function is called by the application.  In order to support
sockets across fork calls, child processes initialize Winsock if any
inherited file descriptor is a socket.</p><p>AF_UNIX (AF_LOCAL) sockets are not available in Winsock.  They are
implemented in Cygwin by using local AF_INET sockets instead.  This is
completely transparent to the application.  Cygwin's implementation also
supports the getpeereid BSD extension.  However, Cygwin does not yet support
descriptor passing.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-hi-select"></a>Select</h3></div></div></div><p>The UNIX <code class="function">select</code> function is another
call that does not map cleanly on top of the Win32 API.  Much to our
dismay, we discovered that the Win32 select in Winsock only worked on
socket handles.  Our implementation allows select to function normally
when given different types of file descriptors (sockets, pipes,
handles, and a custom /dev/windows Windows messages
pseudo-device).</p><p>Upon entry into the select function, the first
operation is to sort the file descriptors into the different types.
There are then two cases to consider.  The simple case is when at
least one file descriptor is a type that is always known to be ready
(such as a disk file).  In that case, select returns immediately as
soon as it has polled each of the other types to see if they are
ready.  The more complex case involves waiting for socket or pipe file
descriptors to be ready.  This is accomplished by the main thread
suspending itself, after starting one thread for each type of file
descriptor present.  Each thread polls the file descriptors of its
respective type with the appropriate Win32 API call.  As soon as a
thread identifies a ready descriptor, that thread signals the main
thread to wake up.  This case is now the same as the first one since
we know at least one descriptor is ready.  So select returns, after
polling all of the file descriptors one last time.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ov-new"></a>What's new and what changed in Cygwin</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new3.6"></a>What's new and what changed in 3.6</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
New API calls: tcgetwinsize, tcsetwinsize.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API call: getlocalename_l.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API calls: fdclosedir, posix_getdents.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API call: setproctitle.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API call: timespec_get.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API calls: tcgetwinsize, tcsetwinsize.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API call: posix_close.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New POSIX-defined entry points posix_spawn_file_actions_addchdir and
posix_spawn_file_actions_addfchdir.  These are the same as the already
exported posix_spawn_file_actions_addchdir_np and
posix_spawn_file_actions_addfchdir_np.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add FS_IOC_[GS]ETFLAGS FS_PINNED_FL and FS_UNPINNED_FL flags to handle
Windows attributes FILE_ATTRIBUTE_PINNED and FILE_ATTRIBUTE_UNPINNED.
Add matching 'p' and 'u' mode bits in chattr(1) and lsattr(1).
</p></li><li class="listitem" style="list-style-type: disc"><p>
New libaio.a provided for projects checking for POSIX aio support by
looking for this library at configure time.
</p></li><li class="listitem" style="list-style-type: disc"><p>
cygpath -r option allows to generate all Windows paths with root-local
path prefix \\?\.
</p></li><li class="listitem" style="list-style-type: disc"><p>
ps -f now prints the commandline rather than the full path to the
executable.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Drop workarounds for connecting with NT4 and Samba &lt; 3.0.22 shares.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Now that SMBv1 is ultimately deprecated and not installed by default on
latest Windows versions, use Network Discovery (i. e. WSD, "Web Service
Discovery") for enumerating network servers in //, just like Windows
Explorer.
</p></li><li class="listitem" style="list-style-type: disc"><p>
If "server" is given as FQDN, and if "server" is an NFS server, ls
//server now also enumerates NFS shares.  If "server" is given as a flat
name, only SMB shares are enumerated.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Expose WebDav shares, //tsclient (Microsoft Terminal Services) shares as
well as //wsl$ (Plan 9 Network Provider) shares, i. e., WSL installation
root dirs.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Redesign pipe handling to minimize toggling blocking mode.  The
query_hdl stuff is no longer needed in new implementation.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Now using AVX/AVX2/AVX-512 instructions in signal handler does not break
their context.
</p></li><li class="listitem" style="list-style-type: disc"><p>
nice(2), setpriority(2) and sched_setparam(2) now fail with EACCES or
EPERM if Windows would silently set a lower priority
(HIGH_PRIORITY_CLASS instead of REALTIME_PRIORITY_CLASS) due to missing
administrator privileges.
</p></li><li class="listitem" style="list-style-type: disc"><p>
nice(2) now returns the new nice value instead of 0 on success and sets
errno to EPERM instead of EACCES on failure.  This confirms to POSIX and
Linux (glibc &gt;= 2.2.4) behavior.
</p></li><li class="listitem" style="list-style-type: disc"><p>
sched_setscheduler(2) now emulates changes between SCHED_OTHER,
SCHED_BATCH, SCHED_IDLE, SCHED_FIFO and SCHED_RR.  If SCHED_OTHER or
SCHED_BATCH is selected, the Windows priority is set according to the
nice value where SCHED_BATCH sets a one step lower priority.  If
SCHED_IDLE is selected, the nice value is preserved and the Windows
priority is set to IDLE_PRIORITY_CLASS.  If SCHED_FIFO or SCHED_RR is
selected, the nice value is preserved and the Windows priority is set
according to the realtime priority.  If the SCHED_RESET_ON_FORK flag is
set, SCHED_FIFO and SCHED_RR are reset to SCHED_OTHER and negative nice
values are reset to zero in each child process created with fork(2).
Note: Windows does not offer alternative scheduling policies so this
could only emulate API behavior.
</p></li><li class="listitem" style="list-style-type: disc"><p>
If SCHED_FIFO or SCHED_RR is selected, the /proc/&lt;PID&gt;/stat field '(18)
priority' is now set to the negated sched_policy minus one.  If
SCHED_IDLE is selected, this field is set to 39.  The '(19) nice' field
is now set to the originally requested nice value.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Raise maximum pid from 65536 to 4194304 to account for scenarios with
lots of CPUs and lots of tasks.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Allow mmap with MAP_FIXED to succeed on an address range contained in
the chunk of an existing anonymous mapping, provided the
MAP_SHARED/MAP_PRIVATE flags agree and MAP_NORESERVE is not set for
either mapping.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Fix a long-standing hang issue when running on ARM64 under emulation.
This was due to a thread being terminated while the emulation was
holding an internal lock.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add a host machine tag to uname(2)'s sysname field.  This echoes what
used to be done with -WOW64 (when that was supported), but now with
-ARM64 when running on an ARM64 host under emulation.  The Cygwin DLL's
own architecture continues to be reported in the machine field.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Escape special characters in /proc/&lt;PID&gt;/mount*.  This allows the
contents to be parsed consistently, and matches what is done on Linux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Expose all Windows volume mount points via getmntent(3).  This also
exposes them via /proc/&gt;PID&gt;/mount*.  A change in behavior from
previous Cygwin versions is that volumes whose root is mounted
explicitly in Cygwin will now also show up as mounted under the cygdrive
prefix, whereas before that entry would have been suppressed.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new3.5"></a>What's new and what changed in 3.5</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Drop support for Windows 7, Windows 8, Server 2008 R2 and Server 2012.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Console devices (/dev/consN) are now accessible by processes attached to other
consoles or ptys. Thanks to this new feature, GNU screen and tmux now work in
the console.
</p></li><li class="listitem" style="list-style-type: disc"><p>
newgrp(1) tool.
</p></li><li class="listitem" style="list-style-type: disc"><p>
cygcheck has new options searching for available packages in the
cygwin distro, as well as getting extended info on available and
installed packages.
</p></li><li class="listitem" style="list-style-type: disc"><p>
fnmatch(3) and glob(3) now support named character classes, equivalence
class expressions, and collating symbols in the search pattern, i.e.,
[:alnum:], [=a=], [.aa.].
</p></li><li class="listitem" style="list-style-type: disc"><p>
Introduce /dev/disk directory with various by-* subdirectories which
provide symlinks to disk and partition raw devices:
  </p><pre class="screen">
  by-drive/DRIVE_LETTER -&gt;  ../../sdXN
  by-label/VOLUME_LABEL -&gt;  ../../sdXN
  by-id/BUSTYPE-[VENDOR_]PRODUCT_[SERIAL|0xHASH][-partN] -&gt; ../../sdX[N]
  by-partuuid/MBR_SERIAL-OFFSET -&gt; ../../sdXN
  by-partuuid/GPT_GUID -&gt; ../../sdXN
  by-uuid/VOLUME_SERIAL -&gt; ../../sdXN
  by-voluuid/MBR_SERIAL-OFFSET -&gt; ../../sdXN
  by-voluuid/VOLUME_GUID -&gt; ../../sdXN
  </pre><p>
The subdirectories by-drive and by-voluuid are Cygwin specific.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Introduce /proc/codesets and /proc/locales with information on supported
codesets and locales for all interested parties.  Locale(1) opens these
files and uses the info for printing locale info like any other process
could do.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add support for GB18030 codeset.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add support for lseek flags SEEK_DATA and SEEK_HOLE, a GNU extension.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API calls: posix_spawn_file_actions_addchdir_np,
posix_spawn_file_actions_addfchdir_np.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API calls: c8rtomb, c16rtomb, c32rtomb, mbrtoc8, mbrtoc16, mbrtoc32.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API call: close_range (available on FreeBSD and Linux).
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API call: fallocate (Linux-specific).
</p></li><li class="listitem" style="list-style-type: disc"><p>
posix_spawnp no longer falls back to starting the shell for unrecognized
files as execvp.  For the reasoning, see
https://www.austingroupbugs.net/view.php?id=1674
</p></li><li class="listitem" style="list-style-type: disc"><p>
FIFOs now also work on NFS filesystems.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Enable automatic sparsifying of files on SSDs, independent of the
"sparse" mount mode.
</p></li><li class="listitem" style="list-style-type: disc"><p>
When RLIMIT_CORE is more than 1MB, a core dump file which can be loaded by gdb
is now written on a fatal error. Otherwise, if it's greater than zero, a text
format .stackdump file is written, as previously.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The default RLIMIT_CORE is now 0, disabling the generation of core dump or
stackdump files. Use e.g. <code class="code">ulimit -c unlimited</code> or <code class="code">ulimit -c
1024</code> to enable them again.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new3.4"></a>What's new and what changed in 3.4</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Drop support for Vista and Server 2008.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Drop support for 32 bit Windows and WOW64.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Allow to run with full ASLR enabled and enable on Cygwin DLL by default.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Remove any special handling for the .com filename suffix. It has to
be used always explicitely.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add code to handle setrlimit(RLIMIT_AS).
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add code to handle signal masks in /proc/&lt;PID&gt;/status.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The CYGWIN=pipe_byte option is now set by default, so that pipes are
opened in byte mode rather than message mode.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Handle UDP_SEGMENT and UDP_GRO socket options.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The stdio input functions no longer try again to read after EOF.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The default values of FD_SETSIZE and NOFILE are now 1024 and 3200,
respectively.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new3.3"></a>What's new and what changed in 3.3</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
An IP-sampling profiler named 'profiler' has been added.  It can be used
to profile any Cygwin program along with any DLLs loaded.
</p></li><li class="listitem" style="list-style-type: disc"><p>
A new tool 'gmondump' has been added.  It can dump the raw information
of any "gmon.out" file created by profiler, ssp, or use of the gcc/g++
option '-pg'.  (Continue using gprof to get symbolic profile displays.)
</p></li><li class="listitem" style="list-style-type: disc"><p>
New GNU-specific APIs, slated to become part of the next POSIX standard:
pthread_cond_clockwait, pthread_mutex_clocklock, pthread_rwlock_clockrdlock,
pthread_rwlock_clockwrlock, sem_clockwait.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New Solaris-specific APIs, slated to become part of the next POSIX standard:
sig2str, str2sig.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The speed argument to cfsetspeed(3) can now be a numerical baud rate
rather than a Bnnn constant, as on Linux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The internal implementation of pipes has been overhauled; this should
result in improved performance.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new3.2"></a>What's new and what changed in 3.2</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Revamped pseudo console support.  Conditionally activating it only when
a non-cygwin application is run.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New C11 threads API: call_once, cnd_broadcast, cnd_destroy, cnd_init,
cnd_signal, cnd_timedwait, cnd_wait, mtx_destroy, mtx_init, mtx_lock,
mtx_timedlock, mtx_trylock, mtx_unlock, thrd_create, thrd_current,
thrd_detach, thrd_equal, thrd_exit, thrd_join, thrd_sleep, thrd_yield,
tss_create, tss_delete, tss_get, tss_set.
</p></li><li class="listitem" style="list-style-type: disc"><p>
In cygwin console, new thread which handles special keys/signals such
as Ctrl-Z (VSUSP), Ctrl-\ (VQUIT), Ctrl-S (VSTOP), Ctrl-Q (VSTART) and
SIGWINCH has been introduced. There have been a long standing issue
that these keys/signals are handled only when app calls read() or
select(). Now, these work even if app does not call read() or select().
</p></li><li class="listitem" style="list-style-type: disc"><p>
Allow ~5000 child processes per process on 64 bit, ~1200 child processes
per process on 32 bit.  So far, only 256 child processes per process were
supported.
</p></li><li class="listitem" style="list-style-type: disc"><p>
A few FAQ updates.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Have tmpfile(3) make use of Win32 FILE_ATTRIBUTE_TEMPORARY via open(2)
flag O_TMPFILE.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Utilize Windows 10 1809 FILE_DISPOSITION_IGNORE_READONLY_ATTRIBUTE flag
to allow simpler unlink of files with DOS readonly flags set.
</p></li><li class="listitem" style="list-style-type: disc"><p>
fchmodat(2) now has limited support for the AT_SYMLINK_NOFOLLOW flag.
</p></li><li class="listitem" style="list-style-type: disc"><p>
getdtablesize(3), sysconf(_SC_OPEN_MAX), and getrlimit(RLIMIT_NOFILE)
now return the true limit on the number of open descriptors, 3200.
Previously they returned the current size of Cygwin's internal file
descriptor table, which can grow dynamically.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Cygwin now recognizes native Windows AF_UNIX sockets (as regular
files, not as socket files).  This allows tools like 'ls' and 'rm' to
work.
</p></li><li class="listitem" style="list-style-type: disc"><p>
facl(2) now fails with EBADF on a file opened with O_PATH.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Allow to start Windows Store executables via their "app execution
aliases".  Handle these aliases (which are special reparse points)
as symlinks to the actual executables.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The speed argument to cfsetspeed(3) can now be a numerical baud rate
rather than a Bnnn constant, as on Linux.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new3.1"></a>What's new and what changed in 3.1</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
FIFOs can now be opened multiple times for writing.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add 24 bit color support using xterm compatibility mode in Windows 10
1703 or later.  Add fake 24 bit color support for legacy console, which
uses the nearest color from 16 system colors.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support pseudo console in PTY. Pseudo console is a new feature
in Windows 10 1809, which provides console APIs on virtual
terminal. With this patch, native console applications can work
in PTYs such as mintty, ssh, gnu screen or tmux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Eliminate a header file name collision with &lt;X11/XLocale.h&gt; on
case insensitive filesystems by reverting &lt;xlocale.h&gt; back to
&lt;sys/_locale.h&gt;.
</p></li><li class="listitem" style="list-style-type: disc"><p>
If a SA_SIGINFO signal handler changes the ucontext_t pointed to by the
third parameter, follow it after returning from the handler.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: sched_getaffinity, sched_setaffinity, pthread_getaffinity_np,
pthread_setaffinity_np, plus CPU_SET macros.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: dbm_clearerr, dbm_close, dbm_delete, dbm_dirfno, dbm_error,
dbm_fetch, dbm_firstkey, dbm_nextkey, dbm_open, dbm_store.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Allow times(2) to have a NULL argument, as on Linux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Improve /proc/cpuinfo output and align more closely with Linux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Allow symlinks to be opened with O_PATH | O_NOFOLLOW.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Allow the pathname argument to readlinkat(2) to be an empty string,
provided the dirfd argument refers to a symlink opened with O_PATH |
O_NOFOLLOW.  The readlinkat call then operates on that symlink.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support the Linux-specific AT_EMPTY_PATH flag for fchownat(2) and
fstatat(2).
</p></li><li class="listitem" style="list-style-type: disc"><p>
Allow AF_LOCAL sockets to be opened with O_PATH.  If that flag is not
set, or if an attempt is made to open a different type of socket, the
errno is now EOPNOTSUPP instead of ENXIO.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The new locale modifier @cjksingle allows enforcing of single-width
character property for usually double-widthed characters.  This will
be supported by upcoming mintty releases.  For the reasoning, see
https://gitlab.freedesktop.org/terminal-wg/specifications/issues/9.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support WSL symlinks.  Create those by default now.
</p></li><li class="listitem" style="list-style-type: disc"><p>
FIFOs can now be opened multiple times for reading.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support more IPPROTO_TCP socket options: TCP_FASTOPEN, TCP_KEEPIDLE,
TCP_KEEPCNT, TCP_KEEPINTVL, TCP_QUICKACK, TCP_USER_TIMEOUT.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new3.0"></a>What's new and what changed in 3.0</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Updated era and message locale data, in particular add era data for
the new Tenn&#333;.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support for CLOCK_REALTIME_COARSE, CLOCK_MONOTONIC_COARSE,
CLOCK_MONOTONIC_RAW, CLOCK_BOOTTIME, CLOCK_REALTIME_ALARM,
CLOCK_BOOTTIME_ALARM clocks.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support for case sensitive directories via chattr(1).  This feature requires
Windows 10 1803 or later and WSL installed.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New file ioctls's FS_IOC_GETFLAGS and FS_IOC_SETFLAGS.  The actual inode
flags are Cygwin-specific.  This allows to set or reset DOS attributes,
file sparseness, FS level encryption and compression, as well as
directory case sensitivity programatically.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New tools chattr(1) and lsattr(1) to utilize setting and viewing the
aforementioned new ioctl's on the command line.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support for exFAT.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support Linux-specific open(2) flag O_PATH.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support Linux-specific linkat(2) flag AT_EMPTY_PATH.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support overrun counter for posix timers (via timer_getoverrun() or
siginfo_t::si_overrun).
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: secure_getenv, signalfd, timerfd_create, timerfd_gettime,
timerfd_settime, timer_getoverrun.
</p></li><li class="listitem" style="list-style-type: disc"><p>
clock_nanosleep, pthread_condattr_setclock and timer_create now support
all clocks, except CLOCK_PROCESS_CPUTIME_ID and CLOCK_THREAD_CPUTIME_ID.
</p></li><li class="listitem" style="list-style-type: disc"><p>
clock_setres is a no-op now.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Use the new POSIX unlink semantics on NTFS starting with Windows 10
1709.  Deleting an in-use file now actually removes the file, rather
than moving it to the recycler bin.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Use the new POSIX rename semantics on NTFS starting with Windows 10
1809.  Renaming a file to another in-use file now actually removes the
other file, rather than moving it to the recycler bin.
</p></li><li class="listitem" style="list-style-type: disc"><p>
open(..., O_TMPFILE) now moves the file to the trash bin immediately,
to free the parent directory.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Wctype functions updated to Unicode 11.0.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Remove matherr, and SVID and X/Open math library configurations.
Default math library configuration is now IEEE.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Improve uname(2) for newly built applications.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Kerberos/MSV1_0 S4U authentication replaces two old methods:
Creating a token from scratch and Cygwin LSA authentication package.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Cygwin PIDs have been decoupled from Windows PID.  Cygwin PIDs are now
incrementally dealt in the range from 2 up to 65535, POSIX-like.
Native Windows processes not started by Cygwin processes are mapped
into the range beyond 65535.
</p></li><li class="listitem" style="list-style-type: disc"><p>
fork(2) now is able to recover from when an in-use executable/dll is
removed or replaced during process runtime.  This feature is disabled by
default and limited to exes/dlls on the same NTFS partition as the Cygwin
installation.  For more information and how to enable, please refer to
<a class="xref" href="#ov-hi-process" title="Process Creation">the section called &#8220;Process Creation&#8221;</a>.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Improve /proc/&lt;PID&gt;/cmdline and /proc/&lt;PID&gt;/stat handling to allow
all processes access to basic process information of foreign processes.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new2.11"></a>What's new and what changed in 2.11</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
SO_RCVTIMEO and SO_SNDTIMEO socket options are now honored.
</p></li><li class="listitem" style="list-style-type: disc"><p>
/proc/cpuinfo now reports L3 cache size on Intel CPUs.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: clearenv, pthread_tryjoin_np, pthread_timedjoin_np, sched_getcpu.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs for POSIX Asynchronous I/O: aio_cancel, aio_error, aio_fsync,
aio_read, aio_return, aio_suspend, aio_write, lio_listio.
New Header: &lt;aio.h&gt;.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Drop denormal-operand exception from FE_ALL_EXCEPT, as on Linux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Rename the --file option of setfacl(1) to --set-file, as on Linux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support Unicode 10.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Following glibc, `union wait' has now been removed.  Applications
using union wait and these macros will have to migrate to the
POSIX-specified int status type.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new2.10"></a>What's new and what changed in 2.10</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
New open(2) flags O_TMPFILE and O_NOATIME.
</p></li><li class="listitem" style="list-style-type: disc"><p>
scanf/wscanf now handle the POSIX %m modifier.
</p></li><li class="listitem" style="list-style-type: disc"><p>
scanf now handles the %l[ conversion.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Improved hostprogs compatibility for cross-compiling the Linux kernel.
New headers: &lt;asm/bitsperlong.h&gt;, &lt;asm/posix_types.h&gt;.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Built-in implementation of Stack Smashing Protection compiler feature.
New APIs: __stack_chk_fail, __stack_chk_guard.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Built-in implementation of _FORTIFY_SOURCE guards for functions in
&lt;stdio.h&gt;, &lt;stdlib.h&gt;, &lt;string.h&gt;, &lt;strings.h&gt;,
&lt;unistd.h&gt;, &lt;wchar.h&gt;, &lt;sys/poll.h&gt;, and &lt;sys/socket.h&gt;.
New APIs:  __chk_fail, __gets_chk, __memcpy_chk, __memmove_chk, __mempcpy_chk,
__memset_chk, __snprintf_chk, __sprintf_chk, __stpcpy_chk, __stpncpy_chk,
__strcat_chk, __strcpy_chk, __strncat_chk, __strncpy_chk, __vsnprintf_chk,
__vsprintf_chk.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Built-in implementation of POSIX.1-2001 message catalog support.
New APIs: catclose, catgets, catopen.  New tool: gencat.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: sigtimedwait, wmempcpy.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new2.9"></a>What's new and what changed in 2.9</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
New APIs: explicit_bzero, strnstr.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: pthread_mutex_timedwait, pthread_rwlock_timedrdlock,
pthread_rwlock_timedwrlock.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: renameat2.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Improved implementation of &lt;elf.h&gt;.
</p></li><li class="listitem" style="list-style-type: disc"><p>
strptime(3) supports %s (seconds since Epoch) now, analogue to strftime.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new2.8"></a>What's new and what changed in 2.8</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
New API: timingsafe_bcmp, timingsafe_memcmp
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: dladdr
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: getloadavg
</p></li><li class="listitem" style="list-style-type: disc"><p>
Cygcheck and strace now always generate output with Unix LF line endings,
rather than with DOS/Windows CR LF line endings.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Fork now preserves the load order of unrelated dlopen'd modules.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Pthread_cond_wait now acts like Linux and BSD: Resume waiting for the
condition variable as if it was not interrupted, rather than returning 0.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The internal &lt;sys/_locale.h&gt; header was renamed to &lt;xlocale.h&gt; for
source compatibility with other systems.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Try harder supporting Netapp drives.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new2.7"></a>What's new and what changed in 2.7</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Support for /proc/&lt;PID&gt;/environ.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: getentropy, getrandom.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new2.6"></a>What's new and what changed in 2.6</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Support for POSIX-1.2008 locale objects and per-thread locales.
</p><p>
New API per POSIX-1.2008: newlocale, freelocale, duplocale, uselocale,
nl_langinfo_l, isalnum_l, isalpha_l, isblank_l, iscntrl_l, isdigit_l,
isgraph_l, islower_l, isprint_l, ispunct_l, isspace_l, isupper_l, iswalnum_l,
iswalpha_l, iswblank_l, iswcntrl_l, iswctype_l, iswdigit_l, iswgraph_l,
iswlower_l, iswprint_l, iswpunct_l, iswspace_l, iswupper_l, iswxdigit_l,
isxdigit_l, tolower_l, toupper_l, towctrans_l, towlower_l, towupper_l,
wctrans_l, wctype_l, strcasecmp_l, strcoll_l, strerror_l, strfmon_l,
strftime_l, strncasecmp_l, strxfrm_l, wcscasecmp_l, wcscoll_l, wcstrncasecmp_l,
wcstrxfrm_l.
</p><p>
New API, GNU extensions: isascii_l, toascii_l, strptime_l, strtod_l, strtof_l,
strtol_l, strtold_l, strtoll_l, strtoul_l, strtoull_l, wcsftime_l, wcstod_l,
wcstof_l, wcstol_l, wcstold_l, wcstoll_l, wcstoul_l, wcstoull_l.
</p></li><li class="listitem" style="list-style-type: disc"><p>
locale(1) now supports a -i/--input option to fetch the current input locale
(this is basically equivalent to the current keyboard layout setting).
</p></li><li class="listitem" style="list-style-type: disc"><p>
Drop support for Windows XP and Windows Server 2003/2003 R2.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Drop support for very old SUNWNFS filesystem.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Raise number of supported partitions per disk (for raw access) to 63.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Further header file improvements in terms of feature test macros.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add a workaround for filesystems not supporting the FileAllInformation
info class.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support AzureAD accounts.
</p></li><li class="listitem" style="list-style-type: disc"><p>
"nobody" account support for WinFSP.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: pthread_getname_np, pthread_setname_np.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new2.5"></a>What's new and what changed in 2.5</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Full set of POSIX.1e ACL API functions now implemented.
New APIs: acl_add_perm, acl_calc_mask, acl_clear_perms, acl_copy_entry,
acl_copy_ext, acl_copy_int, acl_create_entry, acl_delete_def_file,
acl_delete_entry, acl_delete_perm, acl_dup, acl_free, acl_from_text,
acl_get_entry, acl_get_fd, acl_get_file, acl_get_permset, acl_get_qualifier,
acl_get_tag_type, acl_init, acl_set_fd, acl_set_file, acl_set_permset,
acl_set_qualifier, acl_set_tag_type, acl_size, acl_to_text, acl_valid.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Most libacl extensions now implemented, too:
New APIs: acl_check, acl_cmp, acl_entries, acl_equiv_mode, acl_error,
acl_extended_fd, acl_extended_file, acl_extended_file_nofollow,
acl_from_mode, acl_get_perm, acl_to_any_text.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Including &lt;sys/acl.h&gt; now *only* includes the POSIX ACL API.  To include
the old Solaris API, include &lt;cygwin/acl.h&gt;.
</p></li><li class="listitem" style="list-style-type: disc"><p>
First implementation of pthread_barrier/pthread_barrierattr functions.
New APIs: pthread_barrierattr_init, pthread_barrierattr_setpshared,
pthread_barrierattr_getpshared, pthread_barrierattr_destroy,
pthread_barrier_init, pthread_barrier_destroy, pthread_barrier_wait.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Enabled console reports requested by escape sequences: Requesting primary
and secondary device attributes, requesting cursor position report;
see https://cygwin.com/ml/cygwin-patches/2012-q3/msg00019.html
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: clog10, clog10f, nexttoward, nexttowardf, nexttowardl.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add missing long double functions.  New APIs:
acoshl, acosl, asinhl, asinl, atan2l, atanhl, atanl, cacoshl, cacosl, cargl,
casinhl, casinl, catanhl, catanl, ccoshl, ccosl, ceill, cexpl, clog10l,
clogl, conjl, copysignl, coshl, cosl, cpowl, cprojl, csinhl, csinl, csqrtl,
ctanhl, ctanl, dreml, erfcl, erfl, exp10l, exp2l, expl, expm1l, fabsl,
fdiml, floorl, fmal, fmaxl, fminl, fmodl, frexpl, ilogbl, isinfl, isnanl,
ldexpl, lgammal, lgammal_r, llroundl, log10l, log1pl, log2l, logbl, logl,
lroundl, modfl, nearbyintl, nextafterl, pow10l, powl, remainderl, remquol,
roundl, scalbl, scalblnl, scalbnl, sincosl, sinhl, sinl, tanhl, tanl,
tgammal, truncl.
</p></li><li class="listitem" style="list-style-type: disc"><p>
In calls to chmod treat ACLs with extra ACEs *only* for Admins and
SYSTEM like a trivial ACL.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Bump POSIX option macros to POSIX.1-2008.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Profiling data, specifically pc sampling, now covers all threads of a
program and not just the main thread.  Environment variable GMON_OUT_PREFIX
enables multiple gmon.out files to preserve profiling data after fork or
from multiple program runs.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Feature test macros, which control which symbols are exposed in the standard
headers, have been completely overhauled for compatibility with glibc.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The isinf, isinff, and isinfl functions are signed, returning -1 for
negative infinity for compatibility with glibc.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new2.4"></a>What's new and what changed in 2.4</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
New, unified implementation of POSIX permission and ACL handling.  The
new ACLs now store the POSIX ACL MASK/CLASS_OBJ permission mask, and
they allow to inherit the S_ISGID bit.  ACL inheritance now really
works as desired, in a limited, but theoretically equivalent fashion
even for non-Cygwin processes.</p><p>To accommodate standard Windows ACLs, the POSIX permissions of
the owner and all other users in the ACL are computed using the Windows
AuthZ API.  This may slow down the computation of POSIX permissions
noticably in some circumstances, but is generally more correct.
The new code also ignores SYSTEM and Administrators group permissions
when computing the MASK/CLASS_OBJ permission mask on old ACLs, and it
doesn't deny access to SYSTEM and Administrators group based on the
value of MASK/CLASS_OBJ when creating the new ACLs.</p><p>The new code now handles the S_ISGID bit on directories as on Linux:
Setting S_ISGID on a directory causes new files and subdirs created
within to inherit its group, rather than the primary group of the user
who created the file.  This only works for files and directories
created by Cygwin processes.
</p></li><li class="listitem" style="list-style-type: disc"><p>
cygpath has a new -U option, which creates cygdrive paths using the
unambiguous /proc/cygdrive prefix.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: rpmatch.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Align setfacl(1) usage a bit closer to the usage on Linux.  Rename -d option
to -x, --substitute to --set.  Add --no-mask and --mask options.  Allow to
use the -b and -k option combined to allow reducing an ACL to only reflect
standard POSIX permissions.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Fix (numeric and monetary) decimal point and thousands separator in
fa_IR and ps_AF locales to be aligned with Linux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
utmpname/utmpxname are now defined as int functions as on Linux.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new2.3"></a>What's new and what changed in 2.3</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
strftime(3) supports %s (seconds since Epoch) now.
</p></li><li class="listitem" style="list-style-type: disc"><p>
posix_madvise(POSIX_MADV_WILLNEED) now utilizes OS functionality available
starting with Windows 8/Server 2012.
</p><p>
posix_madvise(POSIX_MADV_DONTNEED) now utilizes OS functionality available
starting with Windows 8.1/Server 2012R2.
</p></li><li class="listitem" style="list-style-type: disc"><p>
sysconf() now supports returning CPU cache information:
  </p><pre class="screen">
  _SC_LEVEL1_ICACHE_SIZE, _SC_LEVEL1_ICACHE_ASSOC, _SC_LEVEL1_ICACHE_LINESIZE,
  _SC_LEVEL1_DCACHE_SIZE, _SC_LEVEL1_DCACHE_ASSOC, _SC_LEVEL1_DCACHE_LINESIZE,
  _SC_LEVEL2_CACHE_SIZE, _SC_LEVEL2_CACHE_ASSOC, _SC_LEVEL2_CACHE_LINESIZE,
  _SC_LEVEL3_CACHE_SIZE, _SC_LEVEL3_CACHE_ASSOC, _SC_LEVEL3_CACHE_LINESIZE,
  _SC_LEVEL4_CACHE_SIZE, _SC_LEVEL4_CACHE_ASSOC, _SC_LEVEL4_CACHE_LINESIZE
  </pre><p>
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: aligned_alloc, at_quick_exit, quick_exit.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add support for Parallels Desktop FS (prlfs).
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new2.2"></a>What's new and what changed in 2.2</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
New APIs: getcontext, setcontext, makecontext, swapcontext.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New functions: sigsetjmp, siglongjmp.
</p><p>
These were only available as macros up to now, but POSIX requires that
siglongjmp has to be available as function.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new2.1"></a>What's new and what changed in 2.1</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Handle pthread stacksizes as in GLibc:  Default to RLIMIT_STACK resource.
Allow to set RLIMIT_STACK via setrlimit.  Default RLIMIT_STACK to value
from executable header as described on the MSDN website
<a class="ulink" href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms686774.aspx" target="_top">Thread Stack Size</a>
Default stacksize to 2 Megs in case RLIMIT_STACK is set to RLIM_INFINITY.
</p></li><li class="listitem" style="list-style-type: disc"><p>
First cut of an implementation to allow signal handlers running on an
alternate signal stack. 
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API sigaltstack, plus definitions for SA_ONSTACK, SS_ONSTACK,
SS_DISABLE, MINSIGSTKSZ, SIGSTKSZ.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: sethostname.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new2.0"></a>What's new and what changed in 2.0</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
basename(3) now comes in two flavors, POSIX and GNU.  The POSIX version is
the default.  You get the GNU version after

</p><pre class="screen">
  #define _GNU_SOURCE
  #include &lt;string.h&gt;
</pre><p>
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.35"></a>What's new and what changed in 1.7.35</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Performance improvements of the new account DB handling.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Since 1.7.34, chmod does not always affect the POSIX permission mask as
returned by stat(2) or printed by ls(1), due to the improved POSIX ACL
handling.  However, that's still far from perfect, so, as a temporary
workaround, chmod now checks if secondary groups and users in the ACL
have more permissions than the primary group.  If so, the permissions of
the secondary users and groups will be reduced according to the mask
given by the new primary group permissions.  I.e, chmod 600 will remove
all permissions from the primary group as well as all secondary user and
group entries in the ACL.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Change handling of group permissions if owner SID == group SID.  Now the
group permissions don't mirror the user permissions anymore, thus
leading to less hassle with security-conscious applications.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Allow group SID to be the same as owner SID for "Microsoft Accounts".
Those have the group in their user token set to the owner SID by
default.  Drop the workaround to change their primary group to "Users".
It's not required anymore due to the aforementioned changes.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Change getfacl long options from --all to --access and from --dir to
--default, along the lines of the Linux getfacl tool.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Don't raise a SIGSYS signal in the XSI IPC functions if cygserver is not
running.  Just return -1 with errno set to ENOSYS.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: cabsl, cimagl, creall, finitel, hypotl, sqrtl.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: issetugid.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.34"></a>What's new and what changed in 1.7.34</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Cygwin can now generate passwd/group entries directly from Windows user
databases (local SAM or Active Directory), thus allowing to run Cygwin
without having to create /etc/passwd and /etc/group files.  Introduce
/etc/nsswitch.conf file to configure passwd/group handling.
</p><p>
For bordercase which require to use /etc/passwd and /etc/group files,
change mkpasswd/mkgroup to generate passwd/group entries compatible with
the entries read from SAM/AD.
</p><p>For a description of this exciting new feature see
<a class="xref" href="#ntsec" title="POSIX accounts, permission, and security">the section called &#8220;POSIX accounts, permission, and security&#8221;</a>.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add -b/--remove-all option to setfacl to reduce the ACL to only the entries
representing POSIX permission bits.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add -k/--remove-default option to setfacl to remove all default ACL entries
from an ACL.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add restore action to regtool.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Make gethostbyname2 handle numeric host addresses as well as the
reserved domain names "localhost" and "invalid" per RFC 6761.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Revamp Solaris ACL implementation to more closely work like POSIX ACLs
are supposed to work.  Finally implement a CLASS_OBJ emulation.  Update
getfacl(1)/setfacl(1) accordingly.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The xdr functions are no longer exported for newly built executables.
Use libtirpc-devel instead.
</p></li><li class="listitem" style="list-style-type: disc"><p>
32 bit only: Change default values for socket buffer size to raise
performance on 10Gb networks.
</p></li><li class="listitem" style="list-style-type: disc"><p>
When spawning a process under another user account, merge the user's
default Windows environment into the new process' environment.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: qsort_r, __bsd_qsort_r.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: wcstold.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: __fbufsize, __flbf, __fpending, __freadable, __freading,
__fsetlocking, __fwritable, __fwriting.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: clearerr_unlocked, feof_unlocked, ferror_unlocked, fflush_unlocked,
fgetc_unlocked, fgets_unlocked, fgetwc_unlocked, fgetws_unlocked,
fileno_unlocked, fputc_unlocked, fputs_unlocked, fputwc_unlocked,
fputws_unlocked, fread_unlocked, fwrite_unlocked, getwc_unlocked,
getwchar_unlocked, putwc_unlocked, putwchar_unlocked.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: sockatmark.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.33"></a>What's new and what changed in 1.7.33</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
/proc/cygdrive is a new symlink pointing to the current cygdrive prefix.
This can be utilized in scripts to access paths via cygdrive prefix,
even if the cygdrive prefix has been changed by the user.
</p></li><li class="listitem" style="list-style-type: disc"><p>
/proc/partitions now prints the windows mount points the device is
mounted on.  This allows to recognize the underlying Windows devices of
the Cygwin raw device names.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: quotactl, designed after the Linux/BSD function, but severely
restricted:  Windows only supports user block quotas on NTFS, no group
quotas, no inode quotas, no time constraints.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: ffsl, ffsll (glibc extensions).
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: stime (SVr4).
</p></li><li class="listitem" style="list-style-type: disc"><p>
Provide Cygwin documentation (PDFs and HTML) for offline usage in
<code class="filename">/usr/share/doc/cygwin-${version}</code>.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New internal exception handling based on SEH on 64 bit Cygwin.
</p></li><li class="listitem" style="list-style-type: disc"><p>
When exec'ing applications, check if $PATH exists and is non-empty.  If
not, add PATH variable with Cygwin installation directory as content to
Windows environment to allow loading of Cygwin system DLLs.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Disable CYGWIN "dosfilewarning" option by default.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Improve various header files for C++- and standards-compliance.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Doug Lea malloc implementation update from 2.8.3 to the latest 2.8.6.
</p></li><li class="listitem" style="list-style-type: disc"><p>
atexit(3) is now exported as statically linked function from libcygwin.a.
This allows reliable access to the DSO handle of the caller for newly
built executables.  The former atexit entry point into the DLL remains
for backward compatibility only.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.32"></a>What's new and what changed in 1.7.32</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Export __cxa_atexit and __cxa_finalize to allow C++ standards-compliant
destructor handling in libstdc++ and g++ compiled code.

Please note that, in order to benefit from this new feature, C++ code
must be recompiled with the upcoming gcc 4.8.3-3 release which will
enable the -fuse-cxa-atexit flag by default, and that C++ applications
using this feature will not run on older Cygwin releases.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support more recent CPU flags in /proc/cpuinfo.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.31"></a>What's new and what changed in 1.7.31</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Improve performance of send(2), sendto(2), sendmsg(2) when using small
input buffers.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The default pthread_mutex type is now PTHREAD_MUTEX_NORMAL, rather than
PTHREAD_MUTEX_ERRORCHECK, just as on Linux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Align pthread_attr stack functions more closely to Linux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Mark pthread_attr_getstackaddr and pthread_attr_setstackaddr as deprecated,
as on Linux.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.29"></a>What's new and what changed in 1.7.29</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Allow quoting of arguments to the CYGWIN environment variable, i.e.,
set CYGWIN=error_start="c:\bin\someprogram -T"
</p></li><li class="listitem" style="list-style-type: disc"><p>
Console screen clearing works more like xterm or mintty.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.28"></a>What's new and what changed in 1.7.28</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
popen now supports the Glibc 'e' flag to set the FD_CLOEXEC flag on the pipe
in a thread-safe way.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New netinet/ip6.h header.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Switch to BSD FILE stream fopen/exit semantics, as in all BSD variants
and Linux/GLibc:  Don't fflush/lseek a FILE stream on fclose and exit,
if it only has been read from.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.27"></a>What's new and what changed in 1.7.27</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Don't create native symlinks with target paths having long path prefixes
"\\?\" if the target path is shorter than MAX_PATH characters.  This works
around a Windows 8.1 bug:  The ShellExecuteW fails if the lpFile parameter
points to a native NTFS symlink with a target path prefixed with "\\?\".
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.26"></a>What's new and what changed in 1.7.26</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
getaddrinfo now supports glibc-specific International Domain Name (IDN)
extension flags: AI_IDN, AI_CANONIDN, AI_IDN_ALLOW_UNASSIGNED,
AI_IDN_USE_STD3_ASCII_RULES.
</p></li><li class="listitem" style="list-style-type: disc"><p>
getnameinfo now supports glibc-specific International Domain Name (IDN)
extension flags: NI_IDN, NI_IDN_ALLOW_UNASSIGNED, NI_IDN_USE_STD3_ASCII_RULES.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Slightly improve randomness of /dev/random emulation.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Allow to use advisory locking on any device.  POSIX fcntl and lockf locking
works with any device, BSD flock locking only with devices backed by an OS
handle.  Right now this excludes console windows on pre Windows 8, as well as
almost all virtual files under /proc from BSD flock locking.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The header /usr/include/exceptions.h, containing implementation details for
32 bit Windows' exception handling only, has been removed.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Preliminary, experimental support of the posix_spawn family of functions.
New associated header /usr/include/spawn.h.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.25"></a>What's new and what changed in 1.7.25</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Change magic number associated with process information block so that 32-bit
Cygwin processes don't try to interpret 64-bit information and vice-versa.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Redefine content of mtget tape info struct to allow fetching the number of
partitions on a tape.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.24"></a>What's new and what changed in 1.7.24</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Allow application override of posix_memalign.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.23"></a>What's new and what changed in 1.7.23</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Added CYGWIN environment variable keyword "wincmdln" which causes Cygwin to
send the full windows command line to any subprocesses.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.22"></a>What's new and what changed in 1.7.22</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Support for /dev/mem, /dev/kmem and /dev/port removed, since OS support
was limited to 32 bit Windows XP only.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Added cygwin GetCommandLine wrappers which will allow Cygwin programs to
(appear to) use the Windows command line functions.
</p></li><li class="listitem" style="list-style-type: disc"><p>
regcomp(3) now allows character values &gt;= 0x80 if the current codeset is
ASCII (default codeset in the "C"/"POSIX" locale).  This allows patterns
containing arbitrary byte values as GLibc's regcomp.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.21"></a>What's new and what changed in 1.7.21</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
New API: rawmemchr.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.19"></a>What's new and what changed in 1.7.19</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Drop support for Windows 2000 and Windows XP pre-SP3.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add support for building a 64 bit version of Cygwin on x86_64 natively.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add support for creating native NTFS symlinks starting with Windows Vista
by setting the CYGWIN=winsymlinks:native or CYGWIN=winsymlinks:nativestrict
option.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add support for AFS filesystem.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Preliminary support for mandatory locking via fcntl/flock/lockf, using Windows
locking semantics.  New F_LCK_MANDATORY fcntl command.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: __b64_ntop, __b64_pton, arc4random, arc4random_addrandom,
arc4random_buf, arc4random_stir, arc4random_uniform.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.18"></a>What's new and what changed in 1.7.18</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>Added Windows console cursor appearance support.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
  Show/Hide Cursor mode (DECTCEM): "ESC[?25h" / "ESC[?25l"
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  Set cursor style (DECSCUSR): "ESC[n q" (note the space before the q);
  where n is 0, 1, 2 for block cursor, 3, 4 for underline cursor (all
  disregarding blinking mode), or &gt; 4 to set the cursor height to a
  percentage of the cell height.
  </p></li></ul></div></li><li class="listitem" style="list-style-type: disc"><p>
For performance reasons, Cygwin does not try to create sparse files
automatically anymore, unless you use the new "sparse" mount option.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: cfsetspeed.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.17"></a>What's new and what changed in 1.7.17</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Support the "e" flag to fopen(3).  This is a Glibc extension which
allows to fopen the file with the O_CLOEXEC flag set.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support the "x" flag to fopen(3).  This is a Glibc/C11 extension which
allows to open the file with the O_EXCL flag set.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.16"></a>What's new and what changed in 1.7.16</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
New API: getmntent_r, memrchr.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Recognize ReFS filesystem.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.15"></a>What's new and what changed in 1.7.15</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
CYGWIN=pipe_byte option now forces the opening of pipes in byte mode rather than message mode.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.14"></a>What's new and what changed in 1.7.14</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Add mouse reporting modes 1005, 1006 and 1015 to console window.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.13"></a>What's new and what changed in 1.7.13</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
mkpasswd and mkgroup now try to print an entry for the TrustedInstaller
account existing since Windows Vista/Server 2008.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Terminal typeahead when switching from canonical to non-canonical mode
is now properly flushed.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.12"></a>What's new and what changed in 1.7.12</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Cygwin now automatically populates the /dev directory with all existing
POSIX devices.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add virtual /proc/PID/mountinfo file.
</p></li><li class="listitem" style="list-style-type: disc"><p>
flock now additionally supports the following scenario, which requires
  to propagate locks to the parent process:
   </p><pre class="screen">
    (
      flock -n 9 || exit 1
      # ... commands executed under lock ...
    } 9&gt;/var/lock/mylockfile
   </pre><p>
  Only propagation to the direct parent process is supported so far,
  not to grand parents or sibling processes.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add a "detect_bloda" setting for the CYGWIN environment variable to help
finding potential BLODAs.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.11"></a>What's new and what changed in 1.7.11</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
New <span class="command"><strong>pldd</strong></span> command for listing DLLs loaded by a process.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: scandirat.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Change the way remote shares mapped to drive letters are recognized when
creating the cygdrive directory.  If Windows claims the drive is
unavailable, don't show it in the cygdrive directory listing.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Raise default stacksize of pthreads from 512K to 1 Meg.  It can still be
changed using the pthread_attr_setstacksize call.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.10"></a>What's new and what changed in 1.7.10</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Drop support for Windows NT4.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The CYGWIN environment variable options "envcache", "strip_title", "title",
"tty", and "upcaseenv" have been removed.
</p></li><li class="listitem" style="list-style-type: disc"><p>
If the executable (and the system) is large address aware, the application heap
will be placed in the large memory area.  The <span class="command"><strong>peflags</strong></span> tool
from the <code class="literal">rebase</code> package can be used to set the large
address awareness flag in the executable file header.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The registry setting "heap_chunk_in_mb" has been removed, in favor of a new
per-executable setting in the executable file header which can be set using the
<span class="command"><strong>peflags</strong></span> tool.  See <a class="xref" href="#setup-maxmem" title="Changing Cygwin's Maximum Memory">the section called &#8220;Changing Cygwin's Maximum Memory&#8221;</a>
for more information.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The CYGWIN=tty mode using pipes to communicate with the console in a pseudo
tty-like mode has been removed.  Either just use the normal Windows console
as is, or use a terminal application like <span class="command"><strong>mintty</strong></span>.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New <span class="command"><strong>getconf</strong></span> command for querying confstr(3), pathconf(3),
sysconf(3), and limits.h configuration.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New <span class="command"><strong>tzset</strong></span> utility to generate a POSIX-compatible TZ
environment variable from the Windows timezone settings.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The passwd command now allows an administrator to use the -R command for
other user accounts:  passwd -R username.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Pthread spinlocks.  New APIs: pthread_spin_destroy, pthread_spin_init,
pthread_spin_lock, pthread_spin_trylock, pthread_spin_unlock.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Pthread stack address management.  New APIs: pthread_attr_getstack,
pthread_attr_getstackaddr, pthread_attr_getguardsize, pthread_attr_setstack,
pthread_attr_setstackaddr, pthread_attr_setguardsize, pthread_getattr_np.
</p></li><li class="listitem" style="list-style-type: disc"><p>
POSIX Clock Selection option.  New APIs: clock_nanosleep,
pthread_condattr_getclock, pthread_condattr_setclock.
</p></li><li class="listitem" style="list-style-type: disc"><p>
clock_gettime(3) and clock_getres(3) accept per-process and per-thread CPU-time
clocks, including CLOCK_PROCESS_CPUTIME_ID and CLOCK_THREAD_CPUTIME_ID.
New APIs: clock_getcpuclockid, pthread_getcpuclockid.
</p></li><li class="listitem" style="list-style-type: disc"><p>
GNU/glibc error.h error reporting functions.  New APIs: error, error_at_line.
New exports: error_message_count, error_one_per_line, error_print_progname.
Also, perror and strerror_r no longer clobber strerror storage.
</p></li><li class="listitem" style="list-style-type: disc"><p>
C99 &lt;tgmath.h&gt; type-generic macros.
</p></li><li class="listitem" style="list-style-type: disc"><p>
/proc/loadavg now shows the number of currently running processes and the
total number of processes.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Added /proc/devices and /proc/misc, which lists supported device types and
their device numbers.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Added /proc/swaps, which shows the location and size of Windows paging file(s).
</p></li><li class="listitem" style="list-style-type: disc"><p>
Added /proc/sysvipc/msg, /proc/sysvipc/sem, and /proc/sysvipc/shm which
provide information about System V IPC message queues, semaphores, and
shared memory.
</p></li><li class="listitem" style="list-style-type: disc"><p>
/proc/version now shows the username of whomever compiled the Cygwin DLL
as well as the version of GCC used when compiling.
</p></li><li class="listitem" style="list-style-type: disc"><p>
dlopen now supports the Glibc-specific RTLD_NODELETE and RTLD_NOOPEN flags.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The printf(3) and wprintf(3) families of functions now handle the %m
conversion flag.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Other new API: clock_settime, __fpurge, getgrouplist, get_current_dir_name,
getpt, ppoll, psiginfo, psignal, ptsname_r, sys_siglist, pthread_setschedprio,
pthread_sigqueue, sysinfo.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.9"></a>What's new and what changed in 1.7.9</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
New API: strchrnul.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.8"></a>What's new and what changed in 1.7.8</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Drop support for Windows NT4 prior to Service Pack 4.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Reinstantiate Cygwin's ability to delete an empty directory which is the
current working directory of the same or another process.  Same for any
other empty directory which has been opened by the same or another process.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Cygwin now ships the C standard library fenv.h header file, and implements the
related APIs (including GNU/glibc extensions): feclearexcept, fedisableexcept,
feenableexcept, fegetenv, fegetexcept, fegetexceptflag, fegetprec, fegetround,
feholdexcept, feraiseexcept, fesetenv, fesetexceptflag, fesetprec, fesetround,
fetestexcept, feupdateenv, and predefines both default and no-mask FP
environments.  See the
<a class="ulink" href="http://www.gnu.org/software/libc/manual/html_node/Arithmetic.html" target="_top">
GNU C Library manual</a> for full details of this functionality.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support for the C99 complex functions, except for the "long double"
implementations.  New APIs: cacos, cacosf, cacosh, cacoshf, carg, cargf, casin,
casinf, casinh, casinhf, catan, catanf, catanh, catanhf, ccos, ccosf, ccosh,
ccoshf, cexp, cexpf, cimag, cimagf, clog, clogf, conj, conjf, cpow, cpowf,
cproj, cprojf, creal, crealf, csin, csinf, csinh, csinhf, csqrt, csqrtf, ctan,
ctanf, ctanh, ctanhf.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Fix the width of "CJK Ambiguous Width" characters to 1 for singlebyte charsets
and 2 for East Asian multibyte charsets. (For UTF-8, it remains dependent on
the specified language, and the "@cjknarrow" locale modifier can still be used
to force width 1.)
</p></li><li class="listitem" style="list-style-type: disc"><p>
The strerror_r interface now has two flavors; if _GNU_SOURCE is
defined, it retains the previous behavior of returning char *
(but the result is now guaranteed to be NUL-terminated); otherwise
it now obeys POSIX semantics of returning int.
</p></li><li class="listitem" style="list-style-type: disc"><p>
/proc/sys now allows unfiltered access to the native NT namespace.  Access
restrictions still apply.  Direct device access via /proc/sys is not yet
supported.  File system access via block devices works.  For instance
(note the trailing slash!)
</p><pre class="screen">
bash$ cd /proc/sys/Device/HarddiskVolumeShadowCopy1/
</pre><p>
</p></li><li class="listitem" style="list-style-type: disc"><p>
Other new APIs: llround, llroundf, madvise, pthread_yield.
Export program_invocation_name, program_invocation_short_name.
Support TIOCGPGRP, TIOCSPGRP ioctls.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.7"></a>What's new and what changed in 1.7.7</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Partially revert the 1.7.6 change to set the Win32 current working directory
(CWD) always to an invalid directory, since it breaks backward compatibility
too much.  The Cygwin CWD and the Win32 CWD are now kept in sync again, unless
the Cygwin CWD is not usable as Win32 CWD.  See the reworked
<a class="xref" href="#pathnames-win32-api" title="Using the Win32 file API in Cygwin applications">the section called &#8220;Using the Win32 file API in Cygwin applications&#8221;</a> for details.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Make sure to follow the Microsoft security advisory concerning DLL hijacking.
See the <a class="ulink" href="http://www.microsoft.com/technet/security/advisory/2269637.mspx" target="_top">Microsoft Security Advisory (2269637) "Insecure Library Loading Could Allow Remote Code Execution"</a> for details.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Allow to link against -lbinmode instead of /lib/binmode.o.  Same for
-ltextmode, -ltextreadmode and -lautomode. 
See <a class="xref" href="#textbin-devel" title="Programming">the section called &#8220;Programming&#8221;</a> for details.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.6"></a>What's new and what changed in 1.7.6</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Add new mount options "dos" and "ihash" to allow overriding Cygwin default
behaviour on broken filesystems not recognized by Cygwin.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add new mount option "bind" to allow remounting parts of the POSIX file
hirarchy somewhere else.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Ttys and ptys are handled as securable objects using file-like permissions
and owner/group information.  <span class="command"><strong>chmod</strong></span> and
<span class="command"><strong>chown</strong></span> now work on ttys/ptys.  A new mechanism is used
to propagate pty handles safely to other processes, which does not require
to use Cygserver.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Pass on coresize settings made with setrlimit(2).  This allows shells to
disable creating stackdump files in child processes via
</p><pre class="screen">ulimit -c 0</pre><p> in bash or </p><pre class="screen">limit coredumpsize 0</pre><p>
in tcsh.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Locale categories contain all localization strings additionally as wide-char
strings.  locale(1) prints these values just as on Linux.  nl_langinfo(3)
allows to fetch them.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New interfaces mkostemp(3) and mkostemps(3) are added.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New virtual file /proc/filesystems.
</p></li><li class="listitem" style="list-style-type: disc"><p>
clock_gettime(3) and clock_getres(3) accept CLOCK_MONOTONIC.
</p></li><li class="listitem" style="list-style-type: disc"><p>
DEPRECATED with 1.7.7: Cygwin handles the current working directory entirely
on its own.  The Win32 current working directory is set to an invalid path to
be out of the way.  [...]
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.5"></a>What's new and what changed in 1.7.5</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Support for DEC Backarrow Key Mode escape sequences (ESC [ ? 67 h, ESC [ ? 67 l)
in Windows console.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.3"></a>What's new and what changed in 1.7.3</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Support for GB2312/EUC-CN.  These charsets are implemented as aliases to GBK.
GB2312 is now the default charset name for the locales zh_CN and zh_SG, just
as on Linux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Modification and access timestamps of devices reflect the current time.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.2"></a>What's new and what changed in 1.7.2</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>Localization support has been much improved.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
  Cygwin now handles locales using the underlying Windows locale
  support.  The locale must exist in Windows to be recognized.
  Locale aliases from the file /usr/share/locale/locale.alias are also
  allowed, as long as their replacement is supported by the underlying Windows.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  New tool "locale" to fetch locale information and default locales based on
  the Windows default settings as well as lists of all supported locales
  and character sets.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  Default charset for locales without explicit charset is now chosen
  from a list of Linux-compatible charsets.
  </p><p>
  For instance: en_US -&gt; ISO-8859-1, ja_JP -&gt; EUC-JP, zh_TW -&gt; Big5.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  Added support for the charsets GEORGIAN-PS, PT154, and TIS-620.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  Support for the various locale modifiers to switch charsets as on Linux.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  Default charset in the "C" or "POSIX" locale has been changed back
  from UTF-8 to ASCII, to avoid problems with applications
  expecting a singlebyte charset in the "C"/"POSIX" locale.  Still use
  UTF-8 internally for filename conversion in this case.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  LC_COLLATE, LC_MONETARY, LC_NUMERIC, and LC_TIME localization is
  enabled via Windows locale support.  LC_MESSAGES is enabled via a big
  table with localized strings.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  fnmatch(3), regcomp(3), regexec(3) calls are now multibyte-aware.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  printf(3), wprintf(3) families of functions now handle the grouping
  flag, the apostrophe <code class="literal">'</code>, per POSIX-1.2008.  The
  integer portion of the result of a decimal conversion (%i, %d, %u, %f,
  %F, %g, %G) will be formatted with thousands' grouping characters.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  strftime(3), wcsftime(3), and strptime(3) now handle the E and O format
  modifiers to print/scan alternative date and time representations or to
  use alternative digits in locales which support this.  Additionally these
  functions now also support the padding modifiers '0' and '+', as well as
  a field width per POSIX-1.2008.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  New strfmon(3) call.
  </p></li></ul></div></li><li class="listitem" style="list-style-type: disc"><p>
Support open(2) flags O_CLOEXEC and O_TTY_INIT flags.  Support fcntl
flag F_DUPFD_CLOEXEC.  Support socket flags SOCK_CLOEXEC and SOCK_NONBLOCK.
Add new Linux-compatible API calls accept4(2), dup3(2), and pipe2(2).
Support the signal SIGPWR.
</p></li><li class="listitem" style="list-style-type: disc"><p>Enhanced Windows console support.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
  The console's backspace keycode can be changed using 'stty erase'.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  Function keys send distinguished escape sequences compatible with rxvt.
  Keypad keys send distinguished escape sequences, xterm-style.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  Support of combining Alt and AltGr modifiers in console window
  (compatible with xterm and mintty), so that e.g. Alt-@ sends ESC @
  also on keyboards where @ is mapped to an AltGr combination.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  Report mouse wheel scroll events in mouse reporting mode 1000 (note:
  this doesn't seem to work on all systems, assumedly due to driver
  interworking issues).
  Add mouse reporting mode 1002 to report mouse drag movement.
  Add mouse reporting mode 1003 to report any mouse movement.
  Add focus event reporting (mode 1004), compatible with xterm and mintty.
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  Add escape sequences for not bold (22), not invisible (28), not
  blinking (25) (compatible with xterm and mintty).
  </p></li><li class="listitem" style="list-style-type: disc"><p>
  Support VT100 line drawing graphics mode in console window (compatible
  with xterm and mintty).
  </p></li></ul></div></li><li class="listitem" style="list-style-type: disc"><p>
Handle native DOS paths always as if mounted with "posix=0,noacl".
</p></li><li class="listitem" style="list-style-type: disc"><p>
Handle UNC paths starting with slashes identical to /cygdrive paths.
In other words, use the /cygdrive mount flags for these paths as well.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Recognize NWFS filesystem and workaround broken OS call.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New support for eXtensible Data Record (XDR) encoding and decoding,
as defined by RFCs 1014, 1832, and 4506.  The XDR protocol and
functions are useful for cross-platfrom data exchange, and are
commonly used as the core data interchange format for Remote
Procedure Call (RPC) and NFS.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ov-new1.7.1"></a>What's new and what changed from 1.5 to 1.7</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ov-new1.7-os"></a>OS related changes</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Windows 95, 98 and Me are not supported anymore.  The new Cygwin 1.7 DLL
will not run on any of these systems.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add support for Windows 7 and Windows Server 2008 R2.
</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ov-new1.7-file"></a>File Access related changes</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Mount points are no longer stored in the registry.  Use /etc/fstab and
/etc/fstab.d/$USER instead.  Mount points created with mount(1) are only
local to the current session and disappear when the last Cygwin process
in the session exits.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Cygwin creates the mount points for /, /usr/bin, and /usr/lib
automatically from it's own position on the disk.  They don't have to be
specified in /etc/fstab.
</p></li><li class="listitem" style="list-style-type: disc"><p>
If a filename cannot be represented in the current character set, the
character will be converted to a sequence Ctrl-X + UTF-8 representation
of the character.  This allows to access all files, even those not
having a valid representation of their filename in the current character
set.  To always have a valid string, use the UTF-8 charset by
setting the environment variable $LANG, $LC_ALL, or $LC_CTYPE to a valid
POSIX value, such as "en_US.UTF-8".
</p></li><li class="listitem" style="list-style-type: disc"><p>
PATH_MAX is now 4096.  Internally, path names can be as long as the
underlying OS can handle (32K).
</p></li><li class="listitem" style="list-style-type: disc"><p>
struct dirent now supports d_type, filled out with DT_REG or DT_DIR.
All other file types return as DT_UNKNOWN for performance reasons.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The CYGWIN environment variable options "ntsec" and "smbntsec" have been
replaced by the per-mount option "acl"/"noacl".
</p></li><li class="listitem" style="list-style-type: disc"><p>
The CYGWIN environment variable option "ntea" has been removed without
substitute.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The CYGWIN environment variable option "check_case" has been removed in
favor of real case-sensitivity on file systems supporting it.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Creating filenames with special DOS characters '"', '*', ':', '&lt;',
'&gt;', '|' is supported.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Creating files with special DOS device filename components ("aux",
"nul", "prn") is supported.
</p></li><li class="listitem" style="list-style-type: disc"><p>
File names are case sensitive if the OS and the underlying file system
supports it.  Works on NTFS and NFS.  Does not work on FAT and Samba
shares.  Requires to change a registry key (see the User's Guide).  Can
be switched off on a per-mount basis.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Due to the above changes, managed mounts have been removed.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Incoming DOS paths are always handled case-insensitive and get no POSIX
permission, as if they are mounted with noacl,posix=0 mount flags.
</p></li><li class="listitem" style="list-style-type: disc"><p>
unlink(2) and rmdir(2) try very hard to remove files/directories even if
they are currently accessed or locked.  This is done by utilizing the
hidden recycle bin directories and marking the files for deletion.
</p></li><li class="listitem" style="list-style-type: disc"><p>
rename(2) rewritten to be more POSIX conformant.
</p></li><li class="listitem" style="list-style-type: disc"><p>
access(2) now performs checks using the real user ID, as required by
POSIX; the old behavior of querying based on effective user ID is
available through the new faccessat(2) and euidaccess(2) APIs.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add st_birthtim member to struct stat.
</p></li><li class="listitem" style="list-style-type: disc"><p>
File locking is now advisory, not mandatory anymore.  The fcntl(2) and
the new lockf(2) APIs create and maintain locks with POSIX semantics,
the flock(2) API creates and maintains locks with BSD semantics.  POSIX
and BSD locks are independent of each other.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Implement atomic O_APPEND mode.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New open(2) flags O_DIRECTORY, O_EXEC and O_SEARCH.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Make the "plain file with SYSTEM attribute set" style symlink default
again when creating symlinks.  Only create Windows shortcut style
symlinks if CYGWIN=winsymlinks is set in the environment.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Symlinks now use UTF-16 encoding for the target filename for better
internationalization support.  Cygwin 1.7 can read all old style
symlinks, but the new style is not compatible with older Cygwin
releases.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Handle NTFS native symlinks available since Vista/2008 as symlinks (but
don't create Vista/2008 symlinks due to unfortunate OS restrictions).
</p></li><li class="listitem" style="list-style-type: disc"><p>
Recognize NFS shares and handle them using native mechanisms.  Recognize
and create real symlinks on NFS shares.  Get correct stat(2) information
and set real mode bits on open(2), mkdir(2) and chmod(2).
</p></li><li class="listitem" style="list-style-type: disc"><p>
Recognize MVFS and workaround problems manipulating metadata and handling
DOS attributes.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Recognize Netapp DataOnTap drives and fix inode number handling.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Recognize Samba version beginning with Samba 3.0.28a using the new
extended version information negotiated with the Samba developers.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Stop faking hardlinks by copying the file on filesystems which don't
support hardlinks natively (FAT, FAT32, etc.).  Just return an error
instead, just like Linux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
List servers of all accessible domains and workgroups in // instead of
just the servers in the own domain/workgroup.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support Linux-like extended attributes ([fl]getxattr, [fl]listxattr,
[fl]setxattr, [fl]removexattr).
</p></li><li class="listitem" style="list-style-type: disc"><p>
New file conversion API for conversion from Win32 to POSIX path and vice
versa (cygwin_conv_path, cygwin_create_path, cygwin_conv_path_list).
</p></li><li class="listitem" style="list-style-type: disc"><p>
New openat family of functions: openat, faccessat, fchmodat, fchownat,
fstatat, futimesat, linkat, mkdirat, mkfifoat, mknodat, readlinkat,
renameat, symlinkat, unlinkat.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Other new APIs: posix_fadvise, posix_fallocate, funopen, fopencookie,
open_memstream, open_wmemstream, fmemopen, fdopendir, fpurge, mkstemps,
eaccess, euidaccess, canonicalize_file_name, fexecve, execvpe.
</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ov-new1.7-net"></a>Network related changes</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
New implementation for blocking sockets and select on sockets which is
supposed to allow POSIX-compatible sharing of sockets between threads
and processes.
</p></li><li class="listitem" style="list-style-type: disc"><p>
send/sendto/sendmsg now send data in 64K chunks to circumvent an
internal buffer problem in WinSock (KB 201213).
</p></li><li class="listitem" style="list-style-type: disc"><p>
New send/recv option MSG_DONTWAIT.
</p></li><li class="listitem" style="list-style-type: disc"><p>
IPv6 support.  New APIs getaddrinfo, getnameinfo, freeaddrinfo,
gai_strerror, in6addr_any, in6addr_loopback.  On IPv6-less systems,
replacement functions are available for IPv4.  On systems with IPv6
enabled, the underlying WinSock functions are used.  While I tried hard
to get the functionality as POSIXy as possible, keep in mind that a
*fully* conformant implementation of getaddrinfo and other stuff is only
available starting with Windows Vista/2008.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Resolver functions (res_init, res_query, res_search, res_querydomain,
res_mkquery, res_send, dn_comp, dn_expand) are now part of Cygwin.
Applications don't have to link against minires anymore.  Actually, this
*is* the former libminires.a.
</p></li><li class="listitem" style="list-style-type: disc"><p>
rcmd is now implemented inside of Cygwin, instead of calling the WinSock
function.  This allows rsh(1) usage on Vista/2008 and later, which
dropped this function from WinSock.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Define multicast structures in netinet/in.h.  Note that fully conformant
multicast support is only available beginning with Vista/2008.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Improve get_ifconf.  Redefine struct ifreq and subsequent datastructures
to be able to keep more information.  Support SIOCGIFINDEX,
SIOCGIFDSTADDR and the Cygwin specific SIOCGIFFRNDLYNAM.  Support real
interface flags on systems supporting them.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Other new APIs: bindresvport, bindresvport_sa, gethostbyname2,
iruserok_sa, rcmd_af, rresvport_af.  getifaddrs, freeifaddrs,
if_nametoindex, if_indextoname, if_nameindex, if_freenameindex.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add /proc/net/if_inet6.
</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ov-new1.7-device"></a>Device related changes</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Reworked pipe implementation which uses overlapped IO to create more
reliable interruptible pipes and fifos.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The CYGWIN environment variable option "binmode" has been removed.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Improved fifo handling by using native Windows named pipes.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Detect when a stdin/stdout which looks like a pipe is really a tty.
Among other things, this allows a debugged application to recognize that
it is using the same tty as the debugger.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support UTF-8 in console window.
</p></li><li class="listitem" style="list-style-type: disc"><p>
In the console window the backspace key now emits DEL (0x7f) instead of
BS (0x08), Alt-Backspace emits ESC-DEL (0x1b,0x7f) instead of DEL
(0x7f), same as the Linux console and xterm.  Control-Space now emits an
ASCII NUL (0x0) character.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support up to 64 serial interfaces using /dev/ttyS0 - /dev/ttyS63.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support up to 128 raw disk drives /dev/sda - /dev/sddx.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API: cfmakeraw, get_avphys_pages, get_nprocs, get_nprocs_conf,
get_phys_pages, posix_openpt.
</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ov-new1.7-posix"></a>Other POSIX related changes</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
A lot of character sets are supported now via a call to setlocale().
The setting of the environment variables $LANG, $LC_ALL or $LC_CTYPE
will be used.  For instance, setting $LANG to "de_DE.ISO-8859-15" before
starting a Cygwin session will use the ISO-8859-15 character set in the
entire session.  The default locale in the absence of one of the
aforementioned environment variables is "C.UTF-8".
</p><p>
The full list of supported character sets: "ASCII", "ISO-8859-x" with x
in 1-16, except 12, "UTF-8", Windows codepages "CPxxx", with xxx in
(437, 720, 737, 775, 850, 852, 855, 857, 858, 862, 866, 874, 1125, 1250,
1251, 1252, 1253, 1254, 1255, 1256, 1257, 1258), "KOI8-R", "KOI8-U",
"SJIS", "GBK", "eucJP", "eucKR", and "Big5".
</p></li><li class="listitem" style="list-style-type: disc"><p>
Allow multiple concurrent read locks per thread for pthread_rwlock_t.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Implement pthread_kill(thread, 0) as per POSIX.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New API for POSIX IPC: Named semaphores: sem_open, sem_close,
sem_unlink.  Message queues: mq_open, mq_getattr, mq_setattr, mq_notify,
mq_send, mq_timedsend, mq_receive, mq_timedreceive, mq_close, mq_unlink.
Shared memory: shm_open, shm_unlink.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Only declare expected functions in &lt;strings.h&gt;, don't include
&lt;string.h&gt; from here.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Support for WCONTINUED, WIFCONTINUED() added to waitpid and wait4.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New APIs: _Exit, confstr, insque, remque, sys_sigabbrev, posix_madvise,
posix_memalign, reallocf, exp10, exp10f, pow10, pow10f, lrint, lrintf,
rint, rintf, llrint, llrintf, llrintl, lrintl, rintl, mbsnrtowcs,
strcasestr, stpcpy, stpncpy, wcpcpy, wcpncpy, wcsnlen, wcsnrtombs,
wcsftime, wcstod, wcstof, wcstoimax, wcstok, wcstol, wcstoll, wcstoul,
wcstoull, wcstoumax, wcsxfrm, wcscasecmp, wcsncasecmp, fgetwc, fgetws,
fputwc, fputws, fwide, getwc, getwchar, putwc, putwchar, ungetwc,
asnprintf, dprintf, vasnprintf, vdprintf, wprintf, fwprintf, swprintf,
vwprintf, vfwprintf, vswprintf, wscanf, fwscanf, swscanf, vwscanf,
vfwscanf, vswscanf.
</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ov-new1.7-sec"></a>Security related changes</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Getting a domain user's groups is hopefully more bulletproof now.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Cygwin now comes with a real LSA authentication package.  This must be
manually installed by a privileged user using the /bin/cyglsa-config
script.  The advantages and disadvantages are noted in
https://cygwin.com/ml/cygwin-developers/2006-11/msg00000.html
</p></li><li class="listitem" style="list-style-type: disc"><p>
Cygwin now allows storage and use of user passwords in a hidden area of
the registry.  This is tried first when Cygwin is called by privileged
processes to switch the user context.  This allows, for instance, ssh
public key sessions with full network credentials to access shares on
other machines.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New options have been added to the mkpasswd and mkgroup tools to ease
use in multi-machine and multi-domain environments.  The existing
options have a slightly changed behaviour.
</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ov-new1.7-misc"></a>Miscellaneous</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
New ldd utility, similar to Linux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
New link libraries libdl.a, libresolv.a, librt.a.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Fallout from the long path names: If the current working directory is
longer than 260 bytes, or if the current working directory is a virtual
path (like /proc, /cygdrive, //server), don't call native Win32 programs
since they don't understand these paths.
</p></li><li class="listitem" style="list-style-type: disc"><p>
On the first usage of a DOS path (C:\foo, \\foo\bar), the Cygwin DLL
emits a scary warning that DOS paths shouldn't be used.  This warning
may be disabled via the new CYGWIN=nodosfilewarning setting.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The CYGWIN environment variable option "server" has been removed.
Cygwin automatically uses cygserver if it's available.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Allow environment of arbitrary size instead of a maximum of 32K.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Don't force uppercase environment when started from a non-Cygwin
process.  Except for certain Windows and POSIX variables which are
always uppercased, preserve environment case.  Switch back to old
behaviour with the new CYGWIN=upcaseenv setting.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Detect and report a missing DLL on process startup.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add /proc/registry32 and /proc/registry64 paths to access 32 bit and 64
bit registry on 64 bit systems.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add the ability to distinguish registry keys and registry values with
the same name in the same registry subtree.  The key is called "foo" and
the value will be called "foo%val" in this case.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Align /proc/cpuinfo more closly to Linux content.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Add /proc/$PID/mounts entries and a symlink /proc/mounts pointing to
/proc/self/mounts as on Linux.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Optimized strstr and memmem implementation.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Remove backwards compatibility with old signal masks.  (Some *very* old
programs which use signal masks may no longer work correctly).
</p></li><li class="listitem" style="list-style-type: disc"><p>
Cygwin now exports wrapper functions for libstdc++ operators new and
delete, to support the toolchain in implementing full C++ standards
conformance when working with shared libraries.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Different Cygwin installations in different paths can be run in parallel
without knowing of each other.  The path of the Cygwin DLL used in a
process is a key used when creating IPC objects.  So different Cygwin
DLLs are running in different namespaces.
</p></li><li class="listitem" style="list-style-type: disc"><p>
Each Cygwin DLL stores its path and installation key in the registry.
This allows troubleshooting of problems which could be a result of
having multiple concurrent Cygwin installations.
</p></li></ul></div></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="setup-net"></a>Chapter 2. Setting Up Cygwin</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#internet-setup">Internet Setup</a></span></dt><dd><dl><dt><span class="sect2"><a href="#setup-download">Download Source</a></span></dt><dt><span class="sect2"><a href="#setup-dir">Selecting an Install Directory</a></span></dt><dt><span class="sect2"><a href="#setup-localdir">Local Package Directory</a></span></dt><dt><span class="sect2"><a href="#setup-connection">Connection Method</a></span></dt><dt><span class="sect2"><a href="#setup-mirror">Choosing Mirrors</a></span></dt><dt><span class="sect2"><a href="#setup-packages">Choosing Packages</a></span></dt><dt><span class="sect2"><a href="#setup-progress">Download and Installation Progress</a></span></dt><dt><span class="sect2"><a href="#setup-icons">Shortcuts</a></span></dt><dt><span class="sect2"><a href="#setup-postinstall">Post-Install Scripts</a></span></dt><dt><span class="sect2"><a href="#setup-troubleshooting">Troubleshooting</a></span></dt></dl></dd><dt><span class="sect1"><a href="#setup-env">Environment Variables</a></span></dt><dd><dl><dt><span class="sect2"><a href="#setup-env-ov">Overview</a></span></dt><dt><span class="sect2"><a href="#setup-env-win32">Restricted Win32 environment</a></span></dt></dl></dd><dt><span class="sect1"><a href="#setup-maxmem">Changing Cygwin's Maximum Memory</a></span></dt><dt><span class="sect1"><a href="#setup-locale">Internationalization</a></span></dt><dd><dl><dt><span class="sect2"><a href="#setup-locale-ov">Overview</a></span></dt><dt><span class="sect2"><a href="#setup-locale-how">How to set the locale</a></span></dt><dt><span class="sect2"><a href="#setup-locale-console">The Windows Console character set</a></span></dt><dt><span class="sect2"><a href="#setup-locale-problems">Potential Problems when using Locales</a></span></dt><dt><span class="sect2"><a href="#setup-locale-charsetlist">List of supported character sets</a></span></dt></dl></dd><dt><span class="sect1"><a href="#setup-files">Customizing bash</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="internet-setup"></a>Internet Setup</h2></div></div></div><p>To install the Cygwin net release, go to <a class="ulink" href="https://cygwin.com/" target="_top">https://cygwin.com/</a> and run
<a class="ulink" href="https://cygwin.com/setup-x86_64.exe" target="_top">setup-x86_64.exe</a>
to install the 64 bit version of Cygwin.  This will download a GUI
installer which can be run to download a complete cygwin installation
via the internet.  Follow the instructions on each screen to install Cygwin.
</p><p>
The <span class="command"><strong>setup</strong></span> installer is designed to be easy
for new users to understand while remaining flexible for the 
experienced. The volunteer development team is constantly working
on <span class="command"><strong>setup</strong></span>; before requesting a new feature,
check the wishlist in the
<a class="ulink" href="https://sourceware.org/git/gitweb.cgi?p=cygwin-setup.git;a=blob_plain;f=README;hb=HEAD" target="_top">Git <code class="literal">README</code>
</a>. It may already be present in the Git version!
</p><p>
On Windows Vista and later, <span class="command"><strong>setup</strong></span> will check by
default if it runs with administrative privileges and, if not, will try 
to elevate the process.  If you want to avoid this behaviour and install
under an unprivileged account just for your own usage, run
<span class="command"><strong>setup</strong></span> with the <code class="literal">--no-admin</code> option.
</p><p>
Since the default value for each option is the logical choice for
most installations, you can get a working minimal Cygwin environment
installed by simply clicking the <code class="literal">Next</code> button
at each page. The only exception to this is choosing a Cygwin mirror,
which you can choose by experimenting with those listed at
<a class="ulink" href="https://cygwin.com/mirrors.html" target="_top">https://cygwin.com/mirrors.html</a>. For more details about each of page of the 
<span class="command"><strong>setup</strong></span> installation, read on below.
Please note that this guide assumes that you have a basic understanding
of Unix (or a Unix-like OS). If you are new to Unix, you will also want 
to make use of <a class="ulink" href="http://www.google.com/search?q=new+to+unix" target="_top">
other resources</a>.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-download"></a>Download Source</h3></div></div></div><p>
Cygwin uses packages to manage installing various software. When
the default <code class="literal">Install from Internet</code> option is chosen,
<span class="command"><strong>setup</strong></span> creates a local directory to store
the packages before actually installing the contents. 
<code class="literal">Download from Internet</code> performs only the first
part (storing the packages locally), while 
<code class="literal">Install from Local Directory</code> performs only the 
second (installing the contents of the packages). 
</p><p>
The <code class="literal">Download from Internet</code> option is mainly
for creating a base Cygwin package tree on one computer for 
installation on several machines with 
<code class="literal">Install from Local Directory</code>; copy the
entire local package tree to another machine with the directory
tree intact. For example, you might create a <code class="literal">C:\cache\</code>
directory and place <span class="command"><strong>setup</strong></span> in it. Run
<span class="command"><strong>setup</strong></span> to <code class="literal">Install from Internet</code>
or <code class="literal">Download from Internet</code>, then copy the whole
<code class="literal">C:\cache\</code> to each machine and instead choose
<code class="literal">Install from Local Directory</code>.
</p><p>
Though this provides some basic mirroring functionality, if you
are managing a large Cygwin installation, to keep up to date we recommend 
using a mirroring tool such as <span class="command"><strong>wget</strong></span>. A helpful user on 
the Cygwin mailing list created a simple demonstration script to accomplish
this; search the list for <span class="command"><strong>mkcygwget</strong></span> for ideas.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-dir"></a>Selecting an Install Directory</h3></div></div></div><p>
The <code class="literal">Root Directory</code> for Cygwin (default
<code class="literal">C:\cygwin</code>) will become <code class="literal">/</code> 
within your Cygwin installation. You must have write access to
the parent directory, and any ACLs on the parent directory will
determine access to installed files.
</p><p>
The <code class="literal">Install For</code> options of <code class="literal">All Users</code> 
or <code class="literal">Just Me</code> should always be left on the default
<code class="literal">All Users</code>, unless you do not have write access to 
<code class="literal">HKEY_LOCAL_MACHINE</code> in the registry or the All Users 
Start Menu. This is true  even if you are the only user planning to use Cygwin 
on the machine.  Note that selecting <code class="literal">Just Me</code> will cause
problems for Cygwin applications running as service, such as
<span class="command"><strong>crond</strong></span> or <span class="command"><strong>sshd</strong></span>.
If you do not have the necessary permissions, but still want to use these
programs, consult the Cygwin mailing list archives about others' experiences.

</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-localdir"></a>Local Package Directory</h3></div></div></div><p>
The <code class="literal">Local Package Directory</code> is the cache where 
<span class="command"><strong>setup</strong></span> stores the packages before they are
installed. The cache must not be the same folder as the Cygwin
root. Within the cache, a separate directory is created for each
Cygwin mirror, which allows <span class="command"><strong>setup</strong></span> to use
multiple mirrors and custom packages. After installing Cygwin,
the cache is no longer necessary, but you may want to retain the
packages as backups, for installing Cygwin to another system,
or in case you need to reinstall a package.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-connection"></a>Connection Method</h3></div></div></div><p>
The <code class="literal">Direct Connection</code> method of downloading will
directly connect.  If your system is configured to use a proxy server or
auto-configuration scripts, the <code class="literal">Use System Proxy Settings</code>
method uses those settings.  Alternatively, you can manually enter proxy
settings into the <code class="literal">Use HTTP/FTP Proxy</code> section.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-mirror"></a>Choosing Mirrors</h3></div></div></div><p>
Since there is no way of knowing from where you will be downloading
Cygwin, you need to choose at least one mirror site.  Cygwin mirrors 
are geographically distributed around the world; check the list at
<a class="ulink" href="https://cygwin.com/mirrors.html" target="_top">https://cygwin.com/mirrors.html</a>
to find one near you. You can select multiple mirrors by holding down
<code class="literal">CTRL</code> and clicking on each one. If you have the URL of 
an unlisted mirror (for example, if your organization has an internal Cygwin 
mirror) you can add it.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-packages"></a>Choosing Packages</h3></div></div></div><p>
For each selected mirror site, <span class="command"><strong>setup</strong></span> downloads a
small text file called <code class="literal">setup.bz2</code> that contains a list
of packages available from that site along with some basic information about
each package which <span class="command"><strong>setup</strong></span> parses and uses to create the
chooser window. For details about the format of this file, see the
<a class="ulink" href="https://sourceware.org/cygwin-apps/setup.html" target="_top">setup homepage</a>.
</p><p>
The chooser is the most complex part of <span class="command"><strong>setup</strong></span>.
Packages are grouped into categories, and one package may belong to multiple 
categories (assigned by the volunteer package maintainer). Each package
can be found under any of those categories in the hierarchical chooser view.
By default, <span class="command"><strong>setup</strong></span>
will install only the packages in the <code class="literal">Base</code> category
and their dependencies, resulting in a minimal Cygwin installation.
However, this will not include many commonly used tools such as 
<span class="command"><strong>gcc</strong></span> (which you will find in the <code class="literal">Devel</code> 
category).  Since <span class="command"><strong>setup</strong></span> automatically selects
dependencies, be careful not to unselect any required packages. In 
particular, everything in the <code class="literal">Base</code> category is
required.
</p><p>
You can change <span class="command"><strong>setup</strong></span>'s view style, which is helpful
if you know the name of a package you want to install but not which 
category it is in. 
Click on the <code class="literal">View</code> button and it will rotate between 
<code class="literal">Category</code> (the default), <code class="literal">Full</code> (all 
packages), and <code class="literal">Pending</code> (only packages to be
installed, removed or upgraded).
If you are familiar with Unix, you will probably want to at least glance 
through the <code class="literal">Full</code> listing for your favorite tools.
</p><p>
Once you have an existing Cygwin installation, the <span class="command"><strong>setup</strong></span>
chooser is also used to manage your Cygwin installation. 
Information on installed packages is kept in the
<code class="literal">/etc/setup/</code> directory of your Cygwin installation; if 
<span class="command"><strong>setup</strong></span> cannot find this directory it will act as if
you have no Cygwin installation.  If <span class="command"><strong>setup</strong></span>
finds a newer version of an installed package available, it will automatically 
mark it to be upgraded. 
To <code class="literal">Uninstall</code>, <code class="literal">Reinstall</code>, or get the
<code class="literal">Source</code> for an existing package, click on 
<code class="literal">Keep</code> to toggle it. 
Also, to avoid the need to reboot after upgrading, make sure
to close all Cygwin windows and stop all Cygwin processes before 
<span class="command"><strong>setup</strong></span> begins to install the upgraded package.
</p><p>
To avoid unintentionally upgrading, use the <code class="literal">Pending</code>
view to see which packages have been marked for upgrading.  If you
don't want to upgrade a package, click on the new version number to
toggle it until it says <code class="literal">Keep</code>. All packages can be
set to stay at the installed version by pressing the <code class="literal">Keep</code>
button in the top right part of the chooser window.
</p><p>
A previous version of each package is usually available, in case downgrading
is required to avoid a serious bug in the current version of the package.
Packages also occasionally have testing (or "experimental") versions available.
Previous and experimental versions can be chosen by clicking on the package's
<code class="literal">New</code> column until the required version appears.
</p><p>
All available experimental packages can be selected by pressing the
<code class="literal">Exp</code> in the top right part of the chooser window.
Be warned, however, that the next time you run <span class="command"><strong>setup</strong></span>
it will try to replace all old or experimental versions with the current
version, unless told otherwise.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-progress"></a>Download and Installation Progress</h3></div></div></div><p>
First, <span class="command"><strong>setup</strong></span> will download all selected packages
to the local directory chosen earlier. Before installing, 
<span class="command"><strong>setup</strong></span> performs a checksum on each package. If the
local directory is a slow medium (such as a network drive) this can take
a long time. During the download and installation, <span class="command"><strong>setup</strong></span>
shows progress bars for the current task and total remaining disk space.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-icons"></a>Shortcuts</h3></div></div></div><p>
You may choose to install "Cygwin Terminal" shortcuts on the Desktop
and/or Start Menu.  These shortcuts run <span class="command"><strong>mintty</strong></span>,
which will start your default shell as specified
in <code class="filename">/etc/passwd</code>.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-postinstall"></a>Post-Install Scripts</h3></div></div></div><p>
Last of all, <span class="command"><strong>setup</strong></span> will run any post-install
scripts to finish correctly setting up installed packages.
When the last post-install script is completed, <span class="command"><strong>setup</strong></span>
will display a box announcing the completion. A few packages, such as
the OpenSSH server, require some manual site-specific configuration. 
Relevant documentation can be found in the <code class="literal">/usr/doc/Cygwin/</code> 
or <code class="literal">/usr/share/doc/Cygwin/</code> directory.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-troubleshooting"></a>Troubleshooting</h3></div></div></div><p>
Unfortunately, the complex setup process means that odd problems can
occur. If you're having trouble downloading packages, it may be network
congestion, so try a different mirror and/or a different protocol (i.e.,
HTTP instead of FTP).  If you notice something is not working after
running setup, you can check the <span class="command"><strong>setup</strong></span> log file
at <code class="literal">/var/log/setup.log.full</code>. Make a backup of this
file before running <span class="command"><strong>setup</strong></span> again, and follow the
steps for <a class="ulink" href="https://cygwin.com/problems.html" target="_top">Reporting
Problems with Cygwin</a>.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="setup-env"></a>Environment Variables</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-env-ov"></a>Overview</h3></div></div></div><p>
All Windows environment variables are imported when Cygwin starts.
Apart from that, you may wish to specify settings of several important
environment variables that affect Cygwin's operation.</p><p>
The <code class="envar">CYGWIN</code> variable is used to configure a few global
settings for the Cygwin runtime system.  Typically you can leave
<code class="envar">CYGWIN</code> unset, but if you want to set one ore more
options, you can set it using a syntax like this, depending on the shell
in which you're setting it.  Here is an example in CMD syntax:</p><pre class="screen">
<code class="prompt">C:\&gt;</code> <strong class="userinput"><code>set CYGWIN=error_start:C:\cygwin\bin\gdb.exe glob</code></strong>
</pre><p>
This is, of course, just an example.  For the recognized settings of the
<code class="envar">CYGWIN</code> environment variable, see
<a class="xref" href="#using-cygwinenv" title="The CYGWIN environment variable">the section called &#8220;The <code class="envar">CYGWIN</code> environment
variable&#8221;</a>.
</p><p>
Locale support is controlled by the <code class="envar">LANG</code> and
<code class="envar">LC_xxx</code> environment variables.  For a more detailed description
see <a class="xref" href="#setup-locale" title="Internationalization">the section called &#8220;Internationalization&#8221;</a>.
</p><p>
The <code class="envar">PATH</code> environment variable is used by Cygwin
applications as a list of directories to search for executable files
to run.  This environment variable is converted from Windows format
(e.g. <code class="filename">C:\Windows\system32;C:\Windows</code>) to UNIX format
(e.g., <code class="filename">/cygdrive/c/Windows/system32:/cygdrive/c/Windows</code>)
when a Cygwin process first starts.
Set it so that it contains at least the <code class="filename">x:\cygwin\bin</code>
directory where "<code class="filename">x:\cygwin</code> is the "root" of your
cygwin installation if you wish to use cygwin tools outside of bash.
This is usually done by the batch file you're starting your shell with.
</p><p> 
The <code class="envar">HOME</code> environment variable is used by many programs to
determine the location of your home directory.  This environment variable,
if it exists, is converted from Windows format when a Cygwin process first
starts.  However, it's usually set in the shell profile scripts in the /etc
directory, and it's <span class="bold"><strong>not</strong></span> recommended to set
the variable in your Windows environment.
</p><p>
The <code class="envar">TERM</code> environment variable specifies your terminal
type.  It is automatically set to <code class="literal">cygwin</code> if you have
not set it to something else.
</p><p>The <code class="envar">LD_LIBRARY_PATH</code> environment variable is used by
the Cygwin function <code class="function">dlopen ()</code> as a list of
directories to search for .dll files to load.  This environment variable
is converted from Windows format to UNIX format when a Cygwin process
first starts.  Most Cygwin applications do not make use of the
<code class="function">dlopen ()</code> call and do not need this variable.
</p><p>The <code class="envar">GMON_OUT_PREFIX</code> environment variable is helpful
in some situations when profiling Cygwin programs.  For more information,
see <a class="xref" href="#gprof-fork" title="Profiling programs that fork">the section called &#8220;Profiling programs that fork&#8221;</a>.  Only software developers with a
need to profile their programs have a use for this variable.
</p><p>
In addition to <code class="envar">PATH</code>, <code class="envar">HOME</code>,
<code class="envar">LD_LIBRARY_PATH</code>, and <code class="envar">GMON_OUT_PREFIX</code>,
there are three other environment
variables which, if they exist in the Windows environment, are
converted to UNIX format: <code class="envar">TMPDIR</code>, <code class="envar">TMP</code>,
and <code class="envar">TEMP</code>.  The first is not set by default in the
Windows environment but the other two are, and they point to the
default Windows temporary directory.  If set, these variables will be
used by some Cygwin applications, possibly with unexpected results.
You may therefore want to unset them by adding the following two lines
to your <code class="filename">~/.bashrc</code> file:

</p><pre class="screen">
unset TMP
unset TEMP
</pre><p>

This is done in the default <code class="filename">~/.bashrc</code> file.
Alternatively, you could set <code class="envar">TMP</code>
and <code class="envar">TEMP</code> to point to <code class="filename">/tmp</code> or to
any other temporary directory of your choice.  For example:

</p><pre class="screen">
export TMP=/tmp
export TEMP=/tmp
</pre><p>
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-env-win32"></a>Restricted Win32 environment</h3></div></div></div><p>There is a restriction when calling Win32 API functions which
require a fully set up application environment.  Cygwin maintains its own
environment in POSIX style.  The Win32 environment is usually stripped
to a bare minimum and not at all kept in sync with the Cygwin POSIX
environment.</p><p>If you need the full Win32 environment set up in a Cygwin process,
you have to call</p><pre class="screen">
#include &lt;sys/cygwin.h&gt;

cygwin_internal (CW_SYNC_WINENV);
</pre><p>to synchronize the Win32 environment with the Cygwin environment.
Note that this only synchronizes the Win32 environment once with the
Cygwin environment.  Later changes using the <code class="function">setenv</code>
or <code class="function">putenv</code> calls are not reflected in the Win32
environment.  In these cases, you have to call the aforementioned
<code class="function">cygwin_internal</code> call again.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="setup-maxmem"></a>Changing Cygwin's Maximum Memory</h2></div></div></div><p>
Cygwin's heap is extensible.  However, it does start out at a fixed size
and attempts to extend it may run into memory which has been previously
allocated by Windows.  In some cases, this problem can be solved by
changing a field in the file header which is utilized by Cygwin since
to keep the initial size of the application heap.  If the field contains 0,
which is the default, the application heap defaults to a size of 384 Megabyte
on 32 bit Cygwin, 512 Megabyte on 64 bit Cygwin.  If the field is set to any
other value between 4 and 2048, Cygwin tries to reserve as much Megabytes
for the application heap.  The field used for this is the "LoaderFlags" field
in the NT-specific PE header structure
(<code class="literal">(IMAGE_NT_HEADER)-&gt;OptionalHeader.LoaderFlags</code>).</p><p>
This value can be changed for any executable by using a more recent version
of the <span class="command"><strong>peflags</strong></span> tool from the <code class="literal">rebase</code>
Cygwin package.  Example:

</p><pre class="screen">
$ peflags --cygwin-heap foo.exe
foo.exe: initial Cygwin heap size: 0 (0x0) MB
$ peflags --cygwin-heap=500 foo.exe
foo.exe: initial Cygwin heap size: 500 (0x1f4) MB
</pre><p>
</p><p>
Heap memory can be allocated up to the size of the biggest available free
block in the processes virtual memory (VM).  By default, the VM per process
is 2 GB for 32 processes.  To get more VM for a process, the executable
must have the "large address aware" flag set in the file header.  You can
use the aforementioned <span class="command"><strong>peflags</strong></span> tool to set this flag.
On 64 bit systems this results in a 4 GB VM for a process started from that
executable.  On 32 bit systems you also have to prepare the system to allow
up to 3 GB per process.  See the Microsoft article
<a class="ulink" href="http://msdn.microsoft.com/en-us/library/bb613473%28VS.85%29.aspx" target="_top">4-Gigabyte Tuning</a>
for more information.
</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="setup-locale"></a>Internationalization</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-locale-ov"></a>Overview</h3></div></div></div><p>
Internationalization support is controlled by the <code class="envar">LANG</code> and
<code class="envar">LC_xxx</code> environment variables.  You can set all of them
but Cygwin itself only honors the variables <code class="envar">LC_ALL</code>,
<code class="envar">LC_CTYPE</code>, and <code class="envar">LANG</code>, in this order, according
to the POSIX standard.  The content of these variables should follow the
POSIX standard for a locale specifier.  The correct form of a locale
specifier is</p><pre class="screen">
  language[[_TERRITORY][.charset][@modifier]]
</pre><p>"language" is a lowercase two character string per ISO 639-1, or,
if there is no ISO 639-1 code for the language (for instance, "Lower Sorbian"),
a three character string per ISO 639-3.</p><p>"TERRITORY" is an uppercase two character string per ISO 3166, charset is
one of a list of supported character sets.  The modifier doesn't matter
here (though some are recognized, see below).  If you're interested in the
exact description, you can find it in the online publication of the POSIX
manual pages on the homepage of the
<a class="ulink" href="http://www.opengroup.org/" target="_top">Open Group</a>.</p><p>Typical locale specifiers are</p><pre class="screen">
  "de_CH"	   language = German, territory = Switzerland, default charset
  "fr_FR.UTF-8"    language = french, territory = France, charset = UTF-8
  "ko_KR.eucKR"    language = korean, territory = South Korea, charset = eucKR
  "syr_SY"         language = Syriac, territory = Syria, default charset
</pre><p>
If the locale specifier does not follow the above form, Cygwin checks
if the locale is one of the locale aliases defined in the file
<code class="filename">/usr/share/locale/locale.alias</code>.  If so, and if
the replacement localename is supported by the underlying Windows,
the locale is accepted, too.  So, given the default content of the
<code class="filename">/usr/share/locale/locale.alias</code> file, the below
examples would be valid locale specifiers as well.
</p><pre class="screen">
  "catalan"        defined as "ca_ES.ISO-8859-1" in locale.alias
  "japanese"       defined as "ja_JP.eucJP"      in locale.alias
  "turkish"        defined as "tr_TR.ISO-8859-9" in locale.alias
</pre><p>The file <code class="filename">/usr/share/locale/locale.alias</code> is
provided by the gettext package under Cygwin.</p><p>
At application startup, the application's locale is set to the default
"C" or "POSIX" locale.  This locale defaults to the ASCII character set
on the application level.  If you want to stick to the "C" locale and only
change to another charset, you can define this by setting one of the locale
environment variables to "C.charset".  For instance</p><pre class="screen">
  "C.ISO-8859-1"
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The default locale in the absence of the aforementioned locale
environment variables is "C.UTF-8".</p></div><p>Windows uses the UTF-16 charset exclusively to store the names
of any object used by the Operating System.  This is especially important
with filenames.  Cygwin uses the setting of the locale environment variables
<code class="envar">LC_ALL</code>, <code class="envar">LC_CTYPE</code>, and <code class="envar">LANG</code>, to
determine how to convert Windows filenames from their UTF-16 representation
to the singlebyte or multibyte character set used by Cygwin.</p><p>
The setting of the locale environment variables at process startup
is effective for Cygwin's internal conversions to and from the Windows UTF-16
object names for the entire lifetime of the current process.  Changing
the environment variables to another value changes the way filenames are
converted in subsequently started child processes, but not within the same
process.</p><p>
However, even if one of the locale environment variables is set to
some other value than "C", this does <span class="emphasis"><em>only</em></span> affect
how Cygwin itself converts filenames.  As the POSIX standard requires,
it's the application's responsibility to activate that locale for its
own purposes, typically by using the call</p><pre class="screen">
  setlocale (LC_ALL, "");
</pre><p>early in the application code.  Again, so that this doesn't get
lost:  If the application calls setlocale as above, and there is none
of the important locale variables set in the environment, the locale
is set to the default locale, which is "C.UTF-8".</p><p>But what about applications which are not locale-aware?  Per POSIX,
they are running in the "C" or "POSIX" locale, which implies the ASCII
charset.  The Cygwin DLL itself, however, will nevertheless use the locale
set in the environment (or the "C.UTF-8" default locale) for converting
filenames etc.</p><p>When the locale in the environment specifies an ASCII charset,
for example "C" or "en_US.ASCII", Cygwin will still use UTF-8
under the hood to translate filenames.  This allows for easier
interoperability with applications running in the default "C.UTF-8" locale.
</p><p>
The language and territory are used to fetch locale-dependent information
from Windows.  If the language and territory are not known to Windows, the
<code class="function">setlocale</code> function fails.</p><p>The following modifiers are recognized.  Any other modifier is simply
ignored for now.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
For locales which use the Euro (EUR) as currency, the modifier "@euro"
can be added to enforce usage of the ISO-8859-15 character set, which
includes a character for the "Euro" currency sign.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The default script used for all Serbian language locales (sr_BA, sr_ME, sr_RS,
and the deprecated sr_CS and sr_SP) is cyrillic.  With the "@latin" modifier
it gets switched to the latin script with the respective collation behaviour.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The default charset of the "be_BY" locale (Belarusian/Belarus) is CP1251.
With the "@latin" modifier it's UTF-8.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The default charset of the "tt_RU" locale (Tatar/Russia) is ISO-8859-5.
With the "@iqtelif" modifier it's UTF-8.
</p></li><li class="listitem" style="list-style-type: disc"><p>
The default charset of the "uz_UZ" locale (Uzbek/Uzbekistan) is ISO-8859-1.
With the "@cyrillic" modifier it's UTF-8.
</p></li><li class="listitem" style="list-style-type: disc"><p>
There's a class of characters in the Unicode character set, called the
"CJK Ambiguous Width" characters.  For these characters, the width
returned by the wcwidth/wcswidth functions is usually 1.  This can be a
problem with East-Asian languages, which historically use character sets
where these characters have a width of 2.  Therefore, wcwidth/wcswidth
return 2 as the width of these characters when an East-Asian charset such
as GBK or SJIS is selected, or when UTF-8 is selected and the language is
specified as "zh" (Chinese), "ja" (Japanese), or "ko" (Korean).  This is
not correct in all circumstances, hence the locale modifier "@cjknarrow"
can be used to force wcwidth/wcswidth to return 1 for the ambiguous width
characters.
</p></li><li class="listitem" style="list-style-type: disc"><p>
For the same class of "CJK Ambiguous Width" characters, it may be
desirable to handle them as double-width even when a non-CJK language
setting is selected.  This supports e.g. certain graphic symbols used
by "Powerline" and provided by "Powerline fonts".  Some terminals have
options to enforce this width handling (xterm -cjk_width,
mintty -o Charwidth=ambig-wide, putty configuration) but that alone
makes character rendering and locale information inconsistent for those
characters.  The locale modifier "@cjkwide" supports consistent locale
response with this option; it forces wcwidth/wcswidth to return 2 for the
ambiguous width characters.
</p></li><li class="listitem" style="list-style-type: disc"><p>
As an alternative preference, CJK single-width may be enforced.
This feature is a
<a class="ulink" href="https://gitlab.freedesktop.org/terminal-wg/specifications/issues/9#note_406682" target="_top">proposal</a>
in the Terminals Working Group Specifications.
The mintty terminal implements it as an option with proper glyph scaling.
The locale modifier "@cjksingle" supports consistent locale response
with this option; it forces wcwidth/wcswidth to account at most 1 for
all characters.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-locale-how"></a>How to set the locale</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
Assume that you've set one of the aforementioned environment variables to some
valid POSIX locale value, other than "C" and "POSIX".  Assume further that
you're living in Japan.  You might want to use the language code "ja" and the
territory "JP", thus setting, say, <code class="envar">LANG</code> to "ja_JP".  You didn't
set a character set, so what will Cygwin use now?  The default character set
is determined by the default Windows ANSI codepage for this language and
territory.  Cygwin uses a character set which is the typical Unix-equivalent
to the Windows ANSI codepage.  For instance:</p><pre class="screen">
  "en_US"		ISO-8859-1
  "el_GR"		ISO-8859-7
  "pl_PL"		ISO-8859-2
  "pl_PL@euro"		ISO-8859-15
  "ja_JP"		EUCJP
  "ko_KR"		EUCKR
  "te_IN"		UTF-8
</pre></li><li class="listitem" style="list-style-type: disc"><p>
You don't want to use the default character set?  In that case you have to
specify the charset explicitly.  For instance, assume you're from Japan and
don't want to use the japanese default charset EUC-JP, but the Windows
default charset SJIS.  What you can do, for instance, is to set the
<code class="envar">LANG</code> variable in the <span class="command"><strong>mintty</strong></span> Cygwin Terminal
in the "Text" section of its "Options" dialog.  If you're starting your
Cygwin session via a batch file or a shortcut to a batch file, you can also
just set LANG there:</p><pre class="screen">
  @echo off

  C:
  chdir C:\cygwin\bin
  set LANG=ja_JP.SJIS
  bash --login -i
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>For a list of locales supported by your Windows machine, use the new
<span class="command"><strong>locale -a</strong></span> command, which is part of the Cygwin package.
For a description see <a class="xref" href="#locale" title="locale"><span class="refentrytitle">locale</span>(1)</a></p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>For a list of supported character sets, see
<a class="xref" href="#setup-locale-charsetlist" title="List of supported character sets">the section called &#8220;List of supported character sets&#8221;</a>
</p></div></li><li class="listitem" style="list-style-type: disc"><p>
Last, but not least, most singlebyte or doublebyte charsets have a big
disadvantage.  Windows filesystems use the Unicode character set in the
UTF-16 encoding to store filename information.  Not all characters
from the Unicode character set are available in a singlebyte or doublebyte
charset.  While Cygwin has a workaround to access files with unusual
characters (see <a class="xref" href="#pathnames-unusual" title="Filenames with unusual (foreign) characters">the section called &#8220;Filenames with unusual (foreign) characters&#8221;</a>), a better
workaround is to use always the UTF-8 character set.</p><p><span class="emphasis"><em>UTF-8 is the only multibyte character set which can represent
every Unicode character.</em></span></p><pre class="screen">
  set LANG=es_MX.UTF-8
</pre><p>For a description of the Unicode standard, see the homepage of the
<a class="ulink" href="http://www.unicode.org/" target="_top">Unicode Consortium</a>.
</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-locale-console"></a>The Windows Console character set</h3></div></div></div><p>Sometimes the Windows console is used to run Cygwin applications.
While terminal emulations like the Cygwin Terminal <span class="command"><strong>mintty</strong></span>
or <span class="command"><strong>xterm</strong></span> have a distinct way to set the character set
used for in- and output, the Windows console hasn't such a way, since it's
not an application in its own right.</p><p>This problem is solved in Cygwin as follows.  When a Cygwin
process is started in a Windows console (either explicitly from cmd.exe,
or implicitly by, for instance, running the
<code class="filename">C:\cygwin\Cygwin.bat</code> batch file), the Console character
set is determined by the setting of the aforementioned
internationalization environment variables, the same way as described in
<a class="xref" href="#setup-locale-how" title="How to set the locale">the section called &#8220;How to set the locale&#8221;</a>.  </p><p>What is that good for?  Why not switch the console character set with
the applications requirements?  After all, the application knows if it uses
localization or not.  However, what if a non-localized application calls
a remote application which itself is localized?  This can happen with
<span class="command"><strong>ssh</strong></span> or <span class="command"><strong>rlogin</strong></span>.  Both commands don't
have and don't need localization and they never call
<code class="function">setlocale</code>.  Setting one of the internationalization
environment variable to the same charset as the remote machine before
starting <span class="command"><strong>ssh</strong></span> or <span class="command"><strong>rlogin</strong></span> fixes that
problem.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-locale-problems"></a>Potential Problems when using Locales</h3></div></div></div><p>
You can set the above internationalization variables not only when
starting the first Cygwin process, but also in your Cygwin shell on the
fly, even switch to yet another character set, and yet another.  In bash
for instance:</p><pre class="screen">
  <code class="prompt">bash$</code> export LC_CTYPE="nl_BE.UTF-8"
</pre><p>However, here's a problem.  At the start of the first Cygwin process
in a session, the Windows environment is converted from UTF-16 to UTF-8.
The environment is another of the system objects stored in UTF-16 in
Windows.</p><p>As long as the environment only contains ASCII characters, this is
no problem at all.  But if it contains native characters, and you're planning
to use, say, GBK, the environment will result in invalid characters in
the GBK charset.  This would be especially a problem in variables like
<code class="envar">PATH</code>.  To circumvent the worst problems, Cygwin converts
the <code class="envar">PATH</code> environment variable to the charset set in the
environment, if it's different from the UTF-8 charset.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Per POSIX, the name of an environment variable should only
consist of valid ASCII characters, and only of uppercase letters, digits, and
the underscore for maximum portability.</p></div><p>Very old symbolic links may pose a problem when switching charsets on
the fly.  A symbolic link contains the filename of the target file the
symlink points to.  When a symlink had been created with versions of Cygwin
prior to Cygwin 1.7, the current ANSI or OEM character set had been used to
store the target filename, dependent on the old <code class="envar">CYGWIN</code>
environment variable setting <code class="envar">codepage</code> (see <a class="xref" href="#cygwinenv-removed-options" title="Obsolete options">the section called &#8220;Obsolete options&#8221;</a>.  If the target filename
contains non-ASCII characters and you use another character set than
your default ANSI/OEM charset, the target filename of the symlink is now
potentially an invalid character sequence in the new character set.
This behaviour is not different from the behaviour in other Operating
Systems.  Recreate the symlink if that happens to you.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="setup-locale-charsetlist"></a>List of supported character sets</h3></div></div></div><p>Last but not least, here's the list of currently supported character
sets.  The left-hand expression is the name of the charset, as you would use
it in the internationalization environment variables as outlined above.
Note that charset specifiers are case-insensitive.  <code class="literal">EUCJP</code>
is equivalent to <code class="literal">eucJP</code> or <code class="literal">eUcJp</code>.
Writing the charset in the exact case as given in the list below is a
good convention, though.
</p><p>The right-hand side is the number of the equivalent Windows
codepage as well as the Windows name of the codepage.  They are only
noted here for reference.  Don't try to use the bare codepage number or
the Windows name of the codepage as charset in locale specifiers, unless
they happen to be identical with the left-hand side.  Especially in case
of the "CPxxx" style charsets, always use them with the trailing "CP".</p><p>This works:</p><pre class="screen">
  set LC_ALL=en_US.CP437
</pre><p>This does <span class="emphasis"><em>not</em></span> work:</p><pre class="screen">
  set LC_ALL=en_US.437
</pre><p>You can find a full list of Windows codepages on the Microsoft MSDN page
<a class="ulink" href="http://msdn.microsoft.com/en-us/library/dd317756(VS.85).aspx" target="_top">Code Page Identifiers</a>.</p><pre class="screen">
    Charset               Codepage
    -------------------   -------------------------------------------
    ASCII                 20127 (US_ASCII)

    CP437                   437 (OEM United States)
    CP720                   720 (DOS Arabic)
    CP737                   737 (OEM Greek)
    CP775                   775 (OEM Baltic)
    CP850                   850 (OEM Latin 1, Western European)
    CP852                   852 (OEM Latin 2, Central European)
    CP855                   855 (OEM Cyrillic)
    CP857                   857 (OEM Turkish)
    CP858                   858 (OEM Latin 1 + Euro Symbol)
    CP862                   862 (OEM Hebrew)
    CP866                   866 (OEM Russian)
    CP874                   874 (ANSI/OEM Thai)
    CP932		    932 (Shift_JIS, not exactly identical to SJIS)
    CP1125                 1125 (OEM Ukraine)
    CP1250                 1250 (ANSI Central European)
    CP1251                 1251 (ANSI Cyrillic)
    CP1252                 1252 (ANSI Latin 1, Western European)
    CP1253                 1253 (ANSI Greek)
    CP1254                 1254 (ANSI Turkish)
    CP1255                 1255 (ANSI Hebrew)
    CP1256                 1256 (ANSI Arabic)
    CP1257                 1257 (ANSI Baltic)
    CP1258                 1258 (ANSI/OEM Vietnamese)

    ISO-8859-1            28591 (ISO-8859-1)
    ISO-8859-2            28592 (ISO-8859-2)
    ISO-8859-3            28593 (ISO-8859-3)
    ISO-8859-4            28594 (ISO-8859-4)
    ISO-8859-5            28595 (ISO-8859-5)
    ISO-8859-6            28596 (ISO-8859-6)
    ISO-8859-7            28597 (ISO-8859-7)
    ISO-8859-8            28598 (ISO-8859-8)
    ISO-8859-9            28599 (ISO-8859-9)
    ISO-8859-10             -   (not available)
    ISO-8859-11             -   (not available)
    ISO-8859-13           28603 (ISO-8859-13)
    ISO-8859-14             -   (not available)
    ISO-8859-15           28605 (ISO-8859-15)
    ISO-8859-16             -   (not available)

    Big5                    950 (ANSI/OEM Traditional Chinese)
    EUCCN or euc-CN         936 (ANSI/OEM Simplified Chinese)
    EUCJP or euc-JP       20932 (EUC Japanese)
    EUCKR or euc-KR         949 (EUC Korean)
    GB2312                  936 (ANSI/OEM Simplified Chinese)
    GBK                     936 (ANSI/OEM Simplified Chinese)
    GEORGIAN-PS             -   (not available)
    KOI8-R                20866 (KOI8-R Russian Cyrillic)
    KOI8-U                21866 (KOI8-U Ukrainian Cyrillic)
    PT154                   -   (not available)
    SJIS                    -   (not available, almost, but not exactly CP932)
    TIS620 or TIS-620       874 (ANSI/OEM Thai)

    UTF-8 or utf8         65001 (UTF-8)
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="setup-files"></a>Customizing bash</h2></div></div></div><p>
To set up bash so that cut and paste work properly, click on the
"Properties" button of the window, then on the "Misc" tab.  Make sure
that "QuickEdit mode" and "Insert mode" are checked.  These settings
will be remembered next time you run bash from that shortcut.
</p><p>
Your home directory should contain three initialization files that
control the behavior of bash.  They are <code class="filename">.profile</code>,
<code class="filename">.bashrc</code> and <code class="filename">.inputrc</code>.
The Cygwin base installation creates stub files when you start bash
for the first time.
</p><p>
<code class="filename">.profile</code> (other names are also valid, see the bash man
page) contains bash commands.  It is executed when bash is started as login
shell, e.g. from the command <span class="command"><strong>bash --login</strong></span>.
This is a useful place to define and
export environment variables and bash functions that will be used by bash
and the programs invoked by bash.  It is a good place to redefine
<code class="envar">PATH</code> if needed.  We recommend adding a ":." to the end of
<code class="envar">PATH</code> to also search the current working directory (contrary
to DOS, the local directory is not searched by default).  Also to avoid
delays you should either <span class="command"><strong>unset</strong></span> <code class="envar">MAILCHECK</code> 
or define <code class="envar">MAILPATH</code> to point to your existing mail inbox.
</p><p>
<code class="filename">.bashrc</code> is similar to
<code class="filename">.profile</code> but is executed each time an interactive
bash shell is launched.  It serves to define elements that are not
inherited through the environment, such as aliases. If you do not use
login shells, you may want to put the contents of
<code class="filename">.profile</code> as discussed above in this file
instead.
</p><p>
</p><pre class="screen">
shopt -s nocaseglob
</pre><p>
will allow bash to glob filenames in a case-insensitive manner.
Note that <code class="filename">.bashrc</code> is not called automatically for login 
shells. You can source it from <code class="filename">.profile</code>.
</p><p>
<code class="filename">.inputrc</code> controls how programs using the readline
library (including <span class="command"><strong>bash</strong></span>) behave.  It is loaded
automatically.  For full details see the <code class="literal">Function and Variable
Index</code> section of the GNU <code class="systemitem">readline</code> manual.
Consider the following settings:
</p><pre class="screen">
# Ignore case while completing
set completion-ignore-case on
# Make Bash 8bit clean
set meta-flag on
set convert-meta off
set output-meta on
</pre><p>
The first command makes filename completion case insensitive, which can
be convenient in a Windows environment.  The next three commands allow
<span class="command"><strong>bash</strong></span> to display 8-bit characters, useful for
languages with accented characters.  Note that tools that do not use
<code class="systemitem">readline</code> for display, such as
<span class="command"><strong>less</strong></span> and <span class="command"><strong>ls</strong></span>, require additional
settings, which could be put in your <code class="filename">.bashrc</code>:
</p><pre class="screen">
alias less='/bin/less -r'
alias ls='/bin/ls -F --color=tty --show-control-chars'
</pre><p>
</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="using"></a>Chapter 3. Using Cygwin</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#using-pathnames">Mapping path names</a></span></dt><dd><dl><dt><span class="sect2"><a href="#pathnames-intro">Introduction</a></span></dt><dt><span class="sect2"><a href="#mount-table">The Cygwin Mount Table</a></span></dt><dt><span class="sect2"><a href="#unc-paths">UNC paths</a></span></dt><dt><span class="sect2"><a href="#cygdrive">The cygdrive path prefix</a></span></dt><dt><span class="sect2"><a href="#usertemp">The usertemp file system type</a></span></dt><dt><span class="sect2"><a href="#pathnames-symlinks">Symbolic links</a></span></dt><dt><span class="sect2"><a href="#pathnames-win32">Using native Win32 paths</a></span></dt><dt><span class="sect2"><a href="#pathnames-win32-api">Using the Win32 file API in Cygwin applications</a></span></dt><dt><span class="sect2"><a href="#pathnames-additional">Additional Path-related Information</a></span></dt></dl></dd><dt><span class="sect1"><a href="#using-textbinary">Text and Binary modes</a></span></dt><dd><dl><dt><span class="sect2"><a href="#textbin-issue">The Issue</a></span></dt><dt><span class="sect2"><a href="#textbin-default">The default Cygwin behavior</a></span></dt><dt><span class="sect2"><a href="#textbin-question">Binary or text?</a></span></dt><dt><span class="sect2"><a href="#textbin-devel">Programming</a></span></dt></dl></dd><dt><span class="sect1"><a href="#using-filemodes">File permissions</a></span></dt><dt><span class="sect1"><a href="#using-specialnames">Special filenames</a></span></dt><dd><dl><dt><span class="sect2"><a href="#pathnames-etc">Special files in /etc</a></span></dt><dt><span class="sect2"><a href="#pathnames-dosdevices">Invalid filenames</a></span></dt><dt><span class="sect2"><a href="#pathnames-specialchars">Forbidden characters in filenames</a></span></dt><dt><span class="sect2"><a href="#pathnames-unusual">Filenames with unusual (foreign) characters</a></span></dt><dt><span class="sect2"><a href="#pathnames-casesensitive">Case sensitive filenames</a></span></dt><dt><span class="sect2"><a href="#pathnames-casesensitivedirs">Case sensitive directories</a></span></dt><dt><span class="sect2"><a href="#pathnames-posixdevices">POSIX devices</a></span></dt><dt><span class="sect2"><a href="#pathnames-exe">The .exe extension</a></span></dt><dt><span class="sect2"><a href="#pathnames-proc">The /proc filesystem</a></span></dt><dt><span class="sect2"><a href="#pathnames-proc-registry">The /proc/registry filesystem</a></span></dt><dt><span class="sect2"><a href="#pathnames-at">The @pathnames</a></span></dt></dl></dd><dt><span class="sect1"><a href="#using-cygwinenv">The <code class="envar">CYGWIN</code> environment
variable</a></span></dt><dd><dl><dt><span class="sect2"><a href="#cygwinenv-implemented-options">Implemented options</a></span></dt><dt><span class="sect2"><a href="#cygwinenv-removed-options">Obsolete options</a></span></dt></dl></dd><dt><span class="sect1"><a href="#ntsec">POSIX accounts, permission, and security</a></span></dt><dd><dl><dt><span class="sect2"><a href="#ntsec-common">Brief overview of Windows security</a></span></dt><dt><span class="sect2"><a href="#ntsec-mapping">Mapping Windows accounts to POSIX accounts</a></span></dt><dd><dl><dt><span class="sect3"><a href="#ntsec-mapping-how">Mapping Windows SIDs to POSIX uid/gid values</a></span></dt><dt><span class="sect3"><a href="#ntsec-mapping-caching">Caching account information</a></span></dt><dt><span class="sect3"><a href="#ntsec-mapping-passwdinfo">Cygwin user names, home dirs, login shells</a></span></dt><dt><span class="sect3"><a href="#ntsec-mapping-nsswitch">The <code class="filename">/etc/nsswitch.conf</code> file</a></span></dt><dd><dl><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-syntax">The <code class="filename">/etc/nsswitch.conf</code> syntax</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-pwdgrp">The <code class="literal">passwd:</code> and <code class="literal">group:</code> settings</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-enum">The <code class="literal">db_enum:</code> setting</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-passwd">Settings defining how to create the <code class="literal">passwd</code> entry</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-home">The <code class="literal">db_home</code> setting</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-shell">The <code class="literal">db_shell</code> setting</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-gecos">The <code class="literal">db_gecos</code> setting</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-cygwin">The <code class="literal">cygwin</code> schema</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-posix">The <code class="literal">unix</code> schema</a></span></dt><dt><span class="sect4"><a href="#ntsec-mapping-nsswitch-desc">The <code class="literal">desc</code> schema</a></span></dt></dl></dd><dt><span class="sect3"><a href="#ntsec-mapping-nfs">NFS account mapping</a></span></dt><dt><span class="sect3"><a href="#ntsec-mapping-samba">Samba account mapping</a></span></dt></dl></dd><dt><span class="sect2"><a href="#ntsec-files">File permissions</a></span></dt><dt><span class="sect2"><a href="#ntsec-setuid-overview">Switching the user context</a></span></dt><dd><dl><dt><span class="sect3"><a href="#ntsec-logonuser">Switching the user context with password authentication</a></span></dt><dt><span class="sect3"><a href="#ntsec-nopasswd1">Switching the user context without password, Method 1: Kerberos/MsV1_0 S4U authentication</a></span></dt><dt><span class="sect3"><a href="#ntsec-nopasswd3">Switching the user context without password, Method 2: With password</a></span></dt><dt><span class="sect3"><a href="#ntsec-setuid-impl">Switching the user context, how does it all fit together?</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="#using-cygserver">Cygserver</a></span></dt><dd><dl><dt><span class="sect2"><a href="#what-is-cygserver">What is Cygserver?</a></span></dt><dt><span class="sect2"><a href="#cygserver-command-line">Cygserver command line options</a></span></dt><dt><span class="sect2"><a href="#install-cygserver">How to install Cygserver</a></span></dt><dt><span class="sect2"><a href="#start-cygserver">How to start Cygserver</a></span></dt><dt><span class="sect2"><a href="#cygserver-config">The Cygserver configuration file</a></span></dt></dl></dd><dt><span class="sect1"><a href="#using-utils">Cygwin Utilities</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#chattr">chattr</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#cygcheck">cygcheck</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#cygpath">cygpath</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#dumper">dumper</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#getconf">getconf</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#getfacl">getfacl</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#gmondump">gmondump</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#kill">kill</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#ldd">ldd</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#locale">locale</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#lsattr">lsattr</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#minidumper">minidumper</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#mkgroup">mkgroup</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#mkpasswd">mkpasswd</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#mount">mount</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#newgrp">newgrp</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#passwd">passwd</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#pldd">pldd</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#profiler">profiler</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#ps">ps</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#regtool">regtool</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#setfacl">setfacl</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#setmetamode">setmetamode</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#ssp">ssp</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#strace">strace</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#tzset">tzset</a></span><span class="refpurpose"></span></dt><dt><span class="refentrytitle"><a href="#umount">umount</a></span><span class="refpurpose"></span></dt></dl></dd><dt><span class="sect1"><a href="#using-effectively">Using Cygwin effectively with Windows</a></span></dt><dd><dl><dt><span class="sect2"><a href="#using-pathnames-effectively">Pathnames</a></span></dt><dt><span class="sect2"><a href="#using-net">Cygwin and Windows Networking</a></span></dt><dt><span class="sect2"><a href="#using-shortcuts">Creating shortcuts</a></span></dt><dt><span class="sect2"><a href="#using-printing">Printing</a></span></dt></dl></dd></dl></div><p>This chapter explains some key differences between the Cygwin
environment and traditional UNIX systems. It assumes a working
knowledge of standard UNIX commands.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-pathnames"></a>Mapping path names</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-intro"></a>Introduction</h3></div></div></div><p>The Cygwin DLL supports both POSIX- and Win32-style paths.  Directory
delimiters may be either forward slashes or backslashes.  Paths using
backslashes or starting with a drive letter are always handled as
Win32 paths.  POSIX paths must only use forward slashes as delimiter,
otherwise they are treated as Win32 paths and file access might fail
in surprising ways.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Although the Cygwin DLL supports Win32 paths, not all
Cygwin applications support them.  Moreover, the usage of Win32 paths
circumvents important internal path handling mechanisms.  This usage
is therefore strongly deprecated and may be removed in a future
release of Cygwin.
See <a class="xref" href="#pathnames-win32" title="Using native Win32 paths">the section called &#8220;Using native Win32 paths&#8221;</a> and
<a class="xref" href="#pathnames-win32-api" title="Using the Win32 file API in Cygwin applications">the section called &#8220;Using the Win32 file API in Cygwin applications&#8221;</a> for more information.
</p></div><p>POSIX operating systems (such as Linux) do not have the concept
of drive letters.  Instead, all absolute paths begin with a
slash (instead of a drive letter such as "c:") and all file systems
appear as subdirectories (for example, you might buy a new disk and
make it be the <code class="filename">/disk2</code> directory).</p><p>Because many programs written to run on UNIX systems assume
the existence of a single unified POSIX file system structure, Cygwin
maintains a special internal POSIX view of the Win32 file system
that allows these programs to successfully run under Windows.  Cygwin
uses this mapping to translate from POSIX to Win32 paths as
necessary.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="mount-table"></a>The Cygwin Mount Table</h3></div></div></div><p>The <code class="filename">/etc/fstab</code> file is used to map Win32
drives and network shares into Cygwin's internal POSIX directory tree.
This is a similar concept to the typical UNIX fstab file.  The mount
points stored in <code class="filename">/etc/fstab</code> are globally set for
all users.  Sometimes there's a requirement to have user specific
mount points.  The Cygwin DLL supports user specific fstab files.
These are stored in the directory <code class="filename">/etc/fstab.d</code>
and the name of the file is the Cygwin username of the user, as it's
created from the Windows account database or stored in the
<code class="filename">/etc/passwd</code> file (see
<a class="xref" href="#ntsec-mapping" title="Mapping Windows accounts to POSIX accounts">the section called &#8220;Mapping Windows accounts to POSIX accounts&#8221;</a>).  The structure of the
user specific file is identical to the system-wide
<code class="filename">fstab</code> file.</p><p>The file fstab contains descriptive information about the various file
systems.  fstab is only read by programs, and not written; it is the
duty of the system administrator to properly create and maintain this
file.  Each filesystem is described on a separate line; fields on each
line are separated by tabs or spaces.  Lines starting with '#' are
comments.</p><p>The first field describes the block special device or
remote filesystem to be mounted.  On Cygwin, this is the native Windows
path which the mount point links in.  As path separator you MUST use a
slash.  Usage of a backslash might lead to unexpected results.  UNC
paths (using slashes, not backslashes) are allowed.  If the path
contains spaces these can be escaped as <code class="literal">'\040'</code>.</p><p>The second field describes the mount point for the filesystem. 
If the name of the mount point contains spaces these can be
escaped as '\040'.</p><p>The third field describes the type of the filesystem.  Cygwin supports
any string here, since the file system type is usually not evaluated.  So it
doesn't matter if you write <code class="literal">FAT</code> into this field even if
the filesystem is NTFS.  Cygwin figures out the filesystem type and its
capabilities by itself.</p><p>The only two exceptions are the file system types cygdrive and usertemp.
The cygdrive type is used to set the cygdrive prefix.  For a description of
the cygdrive prefix see <a class="xref" href="#cygdrive" title="The cygdrive path prefix">the section called &#8220;The cygdrive path prefix&#8221;</a>, for a description of
the usertemp file system type see <a class="xref" href="#usertemp" title="The usertemp file system type">the section called &#8220;The usertemp file system type&#8221;</a></p><p>The fourth field describes the mount options associated
with the filesystem.  It is formatted as a comma separated list of
options.  It contains at least the type of mount (binary or text) plus
any additional options appropriate to the filesystem type.  The list of
the options, including their meaning, follows.</p><pre class="screen">
  acl       - Cygwin uses the filesystem's access control lists (ACLs) to
              implement real POSIX permissions (default).  This flag only
	      affects filesystems supporting ACLs (NTFS, for instance) and
	      is ignored otherwise.
  auto      - Ignored.
  binary    - Files default to binary mode (default).
  bind      - Allows to remount part of the file hierarchy somewhere else.
              In contrast to other entries, the first field in the fstab
	      line specifies an absolute POSIX path.  This path is remounted
	      to the POSIX path specified as the second path.  The conversion
	      to a Win32 path is done on the fly.  Only the root path and
	      paths preceding the bind entry in the fstab file are used to
	      convert the POSIX path in the first field to an absolute Win32
	      path.  Note that symlinks are ignored while performing this path
	      conversion.
  cygexec   - Treat all files below mount point as cygwin executables.
  dos       - Always convert leading spaces and trailing dots and spaces to
	      characters in the UNICODE private use area.  This allows to use
	      broken filesystems which only allow DOS filenames, even if they
	      are not recognized as such by Cygwin.
  exec      - Treat all files below mount point as executable.
  ihash     - Always fake inode numbers rather than using the ones returned
	      by the filesystem.  This allows to use broken filesystems which
	      don't return unambiguous inode numbers, even if they are not
	      recognized as such by Cygwin.
  noacl     - Cygwin ignores filesystem ACLs and only fakes a subset of
	      permission bits based on the DOS readonly attribute.  This
	      behaviour is the default on FAT and FAT32.  The flag is
	      ignored on NFS filesystems.
  nosuid    - No suid files are allowed (currently unimplemented).
  notexec   - Treat all files below mount point as not executable.
  nouser    - Mount is a system-wide mount.
  override  - Force the override of an immutable mount point (currently "/").
  posix=0   - Switch off case sensitivity for paths under this mount point
	      (default for the cygdrive prefix).
  posix=1   - Switch on case sensitivity for paths under this mount point
	      (default for all other mount points).
  sparse    - Switch on support for sparse files.  This option only makes
              sense on NTFS and then only if you really need sparse files.
	      This flag is always silently enabled on SSD drives.
	      Cygwin does not try to create sparse files by default for
	      performance reasons.
  text      - Files default to CRLF text mode line endings.
  user      - Mount is a user mount.
</pre><p>While normally the execute permission bits are used to evaluate
executability, this is not possible on filesystems which don't support
permissions at all (like FAT/FAT32), or if ACLs are ignored on filesystems
supporting them (see the aforementioned <code class="literal">acl</code> mount option).
In these cases, the following heuristic is used to evaluate if a file is
executable: Files ending in certain extensions (.exe, .com, .lnk) are
assumed to be executable.  Files whose first two characters are "#!", "MZ",
or ":\n" are also considered to be executable.
The <code class="literal">exec</code> option is used to instruct Cygwin that the
mounted file is "executable".  If the <code class="literal">exec</code> option is used
with a directory then all files in the directory are executable.
This option allows other files to be marked as executable and avoids the
overhead of opening each file to check for "magic" bytes.  The
<code class="literal">cygexec</code> option is very similar to <code class="literal">exec</code>,
but also prevents Cygwin from setting up commands and environment variables
for a normal Windows program, adding another small performance gain.  The
opposite of these options is the <code class="literal">notexec</code> option, which
means that no files should be marked as executable under that mount point.</p><p>A correct root directory is quite essential to the operation of
Cygwin.  A default root directory is evaluated at startup so a
<code class="filename">fstab</code> entry for the root directory is not necessary.
If it's wrong, nothing will work as expected.  Therefore, the root directory
evaluated by Cygwin itself is treated as an immutable mount point and can't
be overridden in /etc/fstab... unless you think you really know what you're
doing.  In this case, use the <code class="literal">override</code> flag in the options
field in the <code class="filename">/etc/fstab</code> file.  Since this is a dangerous
thing to do, do so at your own risk.</p><p><code class="filename">/usr/bin</code> and <code class="filename">/usr/lib</code> are
by default also automatic mount points generated by the Cygwin DLL similar
to the way the root directory is evaluated.  <code class="filename">/usr/bin</code>
points to the directory the Cygwin DLL is installed in,
<code class="filename">/usr/lib</code> is supposed to point to the
<code class="filename">/lib</code> directory.  This choice is safe and usually
shouldn't be changed.  An fstab entry for them is not required.</p><p><code class="literal">nouser</code> mount points are not overridable by a later
call to <span class="command"><strong>mount</strong></span>.
Mount points given in <code class="filename">/etc/fstab</code> are by default
<code class="literal">nouser</code> mount points, unless you specify the option
<code class="literal">user</code>.  This allows the administrator to set certain
paths so that they are not overridable by users.  In contrast, all mount
points in the user specific fstab file are <code class="literal">user</code> mount
points.</p><p>The fifth and sixth field are ignored.  They are
so far only specified to keep a Linux-like fstab file layout.</p><p>Note that you don't have to specify an fstab entry for the root dir,
unless you want to have the root dir pointing to somewhere entirely
different (hopefully you know what you're doing), or if you want to
mount the root dir with special options (for instance, as text mount).</p><p>Example entries:</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>Just a normal mount point:</p><pre class="screen">  c:/foo /bar fat32 binary 0 0</pre></li><li class="listitem"><p>A mount point for a textmode mount with case sensitivity switched off:</p><pre class="screen">  C:/foo /bar/baz ntfs text,posix=0 0 0</pre></li><li class="listitem"><p>A mount point for a Windows directory with spaces in it:</p><pre class="screen">  C:/Documents\040and\040Settings /docs ext3 binary 0 0</pre></li><li class="listitem"><p>A mount point for a remote directory, don't store POSIX permissions in ACLs:</p><pre class="screen">  //server/share/subdir /srv/subdir smbfs binary,noacl 0 0</pre></li><li class="listitem"><p>This is just a comment:</p><pre class="screen">  # This is just a comment</pre></li><li class="listitem"><p>Set the cygdrive prefix to /mnt:</p><pre class="screen">  none /mnt cygdrive binary 0 0</pre></li><li class="listitem"><p>Remount /var to /usr/var:</p><pre class="screen">  /var /usr/var none bind</pre><p>Assuming <code class="filename">/var</code> points to
  <code class="filename">C:/cygwin/var</code>, <code class="filename">/usr/var</code> now
  also points to <code class="filename">C:/cygwin/var</code>.  This is equivalent
  to the Linux <code class="literal">bind</code> option available since
  Linux 2.4.0.</p></li></ul></div><p>Whenever Cygwin generates a Win32 path from a POSIX one, it uses
the longest matching prefix in the mount table.  Thus, if
<code class="filename">C:</code> is mounted as <code class="filename">/c</code> and also
as <code class="filename">/</code>, then Cygwin would translate
<code class="filename">C:/foo/bar</code> to <code class="filename">/c/foo/bar</code>.
This translation is normally only used when trying to derive the
POSIX equivalent current directory.  Otherwise, the handling of MS-DOS
filenames bypasses the mount table.
</p><p>If you want to see the current set of mount points valid in your
session, you can invoke the Cygwin tool <span class="command"><strong>mount</strong></span> without
arguments:</p><div class="example"><a name="pathnames-mount-ex"></a><p class="title"><b>Example 3.1. Displaying the current set of mount points</b></p><div class="example-contents"><pre class="screen">
  <code class="prompt">bash$</code> <strong class="userinput"><code>mount</code></strong>
  F:/cygwin/bin on /usr/bin type ntfs (binary,auto)
  F:/cygwin/lib on /usr/lib type ntfs (binary,auto)
  F:/cygwin on / type ntfs (binary,auto)
  E:/src on /usr/src type vfat (binary)
  C: on /cygdrive/c type ntfs (binary,posix=0,user,noumount,auto)
  E: on /cygdrive/e type vfat (binary,posix=0,user,noumount,auto)
</pre></div></div><br class="example-break"><p>Starting with Cygwin 3.6.0, the <code class="function">getmntent(3)</code>
function exposes Windows mount points of partitions mounted into a directory
of another drive as if they are cygdrive mounts.  This affects the content
of <code class="filename">/proc/mounts</code> as well as the output of
<span class="command"><strong>mount</strong></span>.</p><p>For instance, consider you have two local disks, one containing the
<code class="filename">C:</code> drive, the other disk has one partition mounted
into <code class="filename">C:\docs</code>.  The output from mount will now show this
mount point like this:</p><div class="example"><a name="pathnames-mount-dir"></a><p class="title"><b>Example 3.2. Displaying Windows mount points as cygdrives</b></p><div class="example-contents"><pre class="screen">
  <code class="prompt">bash$</code> <strong class="userinput"><code>mount | grep cygdrive</code></strong>
  C: on /cygdrive/c type ntfs (binary,posix=0,user,noumount,auto)
  C:/docs on /cygdrive/c/docs type ntfs (binary,posix=0,user,noumount,auto)
</pre></div></div><br class="example-break"><p>You can also use the <span class="command"><strong>mount</strong></span> command to add
new mount points, and the <span class="command"><strong>umount</strong></span> to delete
them.  However, since they are only stored in memory, these mount
points will disappear as soon as your last Cygwin process ends.
See <a class="xref" href="#mount" title="mount"><span class="refentrytitle">mount</span>(1)</a> and <a class="xref" href="#umount" title="umount"><span class="refentrytitle">umount</span>(1)</a> for more
information.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="unc-paths"></a>UNC paths</h3></div></div></div><p>Apart from the unified POSIX tree starting at the <code class="filename">/</code>
directory, UNC pathnames starting with two slashes and a server name
(<code class="filename">//machine/share/...</code>) are supported as well.
They are handled as POSIX paths if only containing forward slashes.  There's
also a virtual directory <code class="filename">//</code> which allows to enumerate
the fileservers known to the local machine with <span class="command"><strong>ls</strong></span>.
Same goes for the UNC paths of the type <code class="filename">//machine</code>,
which allow to enumerate the shares provided by the server
<code class="literal">machine</code>. For often used UNC paths it makes sense to
add them to the mount table (see <a class="xref" href="#mount-table" title="The Cygwin Mount Table">the section called &#8220;The Cygwin Mount Table&#8221;</a> so
they are included in the unified POSIX path tree.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="cygdrive"></a>The cygdrive path prefix</h3></div></div></div><p>As already outlined in <a class="xref" href="#ov-hi-files" title="File Access">the section called &#8220;File Access&#8221;</a>, you can
access arbitary drives on your system by using the cygdrive path prefix.
The default value for this prefix is <code class="filename">/cygdrive</code>, and
a path to any drive can be constructed by using the cygdrive prefix and
appending the drive letter as subdirectory, like this:</p><pre class="screen">
  bash$ ls -l /cygdrive/f/somedir
</pre><p>This lists the content of the directory F:\somedir.</p><p>The cygdrive prefix is a virtual directory under which all drives
on a system are subsumed.  The mount options of the cygdrive prefix is
used for all file access through the cygdrive prefixed drives.  For instance,
assuming the cygdrive mount options are <code class="literal">binary,posix=0</code>,
then any file <code class="filename">/cygdrive/x/file</code> will be opened in
binary mode by default (mount option <code class="literal">binary</code>), and the case
of the filename doesn't matter (mount option <code class="literal">posix=0</code>).
</p><p>The cygdrive prefix flags are also used for all UNC paths starting with
two slashes, unless they are accessed through a mount point.  For instance,
consider these <code class="filename">/etc/fstab</code> entries:</p><pre class="screen">
  //server/share /mysrv    ntfs     posix=1,acl   0 0
  none           /cygdrive cygdrive posix=0,noacl 0 0
</pre><p>Consider a file <code class="filename">\\server\share\foo</code>.
When opening the file as <code class="filename">/mysrv/foo</code>, the flags
<code class="literal">posix=1,acl</code> of the /mysrv mount point are used.  When
opening the file as <code class="filename">//server/share/foo</code>, the flags
<code class="literal">posix=0,noacl</code> for the cygdrive prefix are used.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This only applies to UNC paths using forward slashes.  When
using backslashes the flags for native paths are used.  See
<a class="xref" href="#pathnames-win32" title="Using native Win32 paths">the section called &#8220;Using native Win32 paths&#8221;</a>.</p></div><p>The cygdrive prefix may be changed in the fstab file to another path
and mode:</p><pre class="screen">
  none /mnt cygdrive posix=1,sparse 0 0
</pre><p>Please note that you cannot use the cygdrive prefix for any other mount
point to change modes.  For instance, these mount table entries...</p><pre class="screen">
  none /cygdrive cygdrive binary 0 0
  D:   /cygdrive/d somefs text 0 0
</pre><p>...will not open files using the <code class="filename">/cygdrive/d</code> path
prefix in textmode by default, but in binary mode per the cygdrive prefix
mode.  If you want to mount any drive explicitly in another mode than
the cygdrive prefix, use a different path prefix:</p><pre class="screen">
  none /cygdrive cygdrive binary 0 0
  D:   /mnt/d somefs text 0 0
</pre><p>To simplify scripting, Cygwin also provides a
<code class="filename">/proc/cygdrive</code> symlink, which allows to use a fixed path
in scripts, even if the actual cygdrive prefix has been changed, or is different
between different users.  So, in scripts, conveniently use the
<code class="filename">/proc/cygdrive</code> symlink to successfully access files
independently from the current cygdrive prefix:</p><pre class="screen">
  $ mount -p
  Prefix              Type         Flags
  /mnt                user         binmode
  $ cat &gt; x.sh &lt;&lt;EOF
  cd /proc/cygdrive/c/Windows/System32/Drivers/etc
  ls -l hosts
  EOF
  $ sh -c ./x.sh
  -rwxrwx---+ 1 SYSTEM SYSTEM 826 Sep  4 22:43 hosts
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="usertemp"></a>The usertemp file system type</h3></div></div></div><p>On Windows, the environment variable <code class="literal">TEMP</code> specifies
the location of the temp folder.  It serves the same purpose as the /tmp/
directory in Unix systems.  In contrast to /tmp/, it is by default a
different folder for every Windows user.  By using the special purpose usertemp
file system, that temp folder can be mapped to /tmp/.  This is particularly
useful in setups where the administrator wants to write-protect the entire
Cygwin directory.  The usertemp file system can be configured in /etc/fstab
like this:</p><pre class="screen">
  none /tmp usertemp binary,posix=0 0 0
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-symlinks"></a>Symbolic links</h3></div></div></div><p>Symbolic links are supported by Windows only on NTFS and have
a lot of quirks making them (almost) unusable in a POSIX context.
POSIX applications are rightfully expecting to use symlinks and the
<code class="literal">symlink(2)</code> system call, so Cygwin has worked around
the Windows shortcomings.</p><p>Cygwin creates symbolic links potentially in multiple different
ways.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>The default symlinks created by Cygwin are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem" style="list-style-type: square"><p>special reparse points shared with WSL (on NTFS on Windows 10 1607
      or later)</p></li><li class="listitem" style="list-style-type: square"><p>plain files with the <code class="literal">system</code> attribute, containing
      a magic cookie followed by the path to which the link points.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Symlinks of this type created by really old Cygwin releases
      (prior to Cygwin 1.7.0) are usually readable.  However, you could run into
      problems if you're now using another character set than the one you used
      when creating these symlinks (see <a class="xref" href="#setup-locale-problems" title="Potential Problems when using Locales">the section called &#8220;Potential Problems when using Locales&#8221;</a>).
      </p></div></li></ul></div></li><li class="listitem" style="list-style-type: disc"><p>On filesystems mounted via Microsoft's NFS client, Cygwin always
creates real NFS symlinks.</p></li><li class="listitem" style="list-style-type: disc"><p>Native Windows symlinks are only created on filesystems supporting
reparse points.  Due to their weird restrictions and behaviour, they are
only created if the user explicitely requests creating them.  This is done
by setting the environment variable <code class="literal">CYGWIN</code> to contain
the string <code class="literal">winsymlinks:native</code> or
<code class="literal">winsymlinks:nativestrict</code>.  For the difference between
these two settings, see <a class="xref" href="#using-cygwinenv" title="The CYGWIN environment variable">the section called &#8220;The <code class="envar">CYGWIN</code> environment
variable&#8221;</a>.
On AFS, native symlinks are the only supported type of symlink due to
AFS lacking support for DOS attributes.  This is independent from the
<code class="literal">winsymlinks</code> setting.</p><p>Creation of native symlinks follows special rules to ensure the links
are usable outside of Cygwin. This includes dereferencing any Cygwin-only
symlinks that lie in the target path.</p></li><li class="listitem" style="list-style-type: disc"><p>Shortcut style symlinks are Windows <code class="literal">.lnk</code>
shortcut files with a special header and the DOS READONLY attribute set.
This symlink type is created if the environment variable
<code class="literal">CYGWIN</code> (see <a class="xref" href="#using-cygwinenv" title="The CYGWIN environment variable">the section called &#8220;The <code class="envar">CYGWIN</code> environment
variable&#8221;</a>)
is set to contain the string <code class="literal">winsymlinks</code> or
<code class="literal">winsymlinks:lnk</code>.  On the MVFS filesystem, which does
not support the DOS SYSTEM attribute, this is the one and only supported
symlink type, independently from the <code class="literal">winsymlinks</code>
setting.</p></li></ul></div><p>All of the above symlink types are recognized and used as symlinks
under all circumstances.  However, if the default plain file symlink type
is lacking its DOS SYSTEM bit, or if the shortcut file is lacking the DOS
READONLY attribute, they are not recognized as symlink.</p><p>Apart from these types, there's also a Windows native type,
so called directory junctions.  They are recognized as symlink but
never generated by Cygwin.  Filesystem junctions on the other hand
are not handled as symlinks, otherwise they would not be recognized as
filesystem borders by commands like <span class="command"><strong>find -xdev</strong></span>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-win32"></a>Using native Win32 paths</h3></div></div></div><p>Using native Win32 paths in Cygwin, while often possible, is generally
inadvisable.  Those paths circumvent all internal integrity checking and
bypass the information given in the Cygwin mount table.</p><p>The following paths are treated as native Win32 paths by the
Cygwin DLL (but not necessarily by Cygwin applications):</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>All paths starting with a drive specifier</p><pre class="screen">
  C:\foo
  C:/foo
</pre></li><li class="listitem"><p>All paths containing at least one backslash as path component</p><pre class="screen">
  C:/foo/bar<span class="bold"><strong>\</strong></span>baz/...
</pre></li><li class="listitem"><p>UNC paths using backslashes</p><pre class="screen">
  \\server\share\...
</pre></li></ul></div><p>When accessing files using native Win32 paths as above, Cygwin uses a
default setting for the mount flags.  All paths using DOS notation will be
treated as case insensitive, and permissions are just faked as if the
underlying drive is a FAT drive.  This also applies to NTFS and other
filesystems which usually are capable of case sensitivity and storing
permissions.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-win32-api"></a>Using the Win32 file API in Cygwin applications</h3></div></div></div><p>Special care must be taken if your application uses Win32 file API
functions like <code class="function">CreateFile</code> to access files using
relative pathnames, or if your application uses functions like
<code class="function">CreateProcess</code> or <code class="function">ShellExecute</code>
to start other applications.</p><p>When a Cygwin application is started, the Windows idea of the current
working directory (CWD) is not necessarily the same as the Cygwin CWD.
There are a couple of restrictions in the Win32 API, which disallow certain
directories as Win32 CWD:</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>The Windows subsystem only supports CWD paths of up to 258 chars.
    This restriction doesn't apply for Cygwin processes, at least not as
    long as they use the POSIX API (chdir, getcwd).  This means, if a Cygwin
    process has a CWD using an absolute path longer than 258 characters, the
    Cygwin CWD and the Windows CWD differ.</p></li><li class="listitem"><p>The Win32 API call to set the current directory,
    <code class="function">SetCurrentDirectory</code>, fails for directories for which
    the user has no permissions, even if the user is an administrator.  This
    restriction doesn't apply for Cygwin processes, if they are running under
    an administrator account.</p></li><li class="listitem"><p><code class="function">SetCurrentDirectory</code> does not support
    case-sensitive filenames.
    </p></li><li class="listitem"><p>Last, but not least, <code class="function">SetCurrentDirectory</code> can't
    work on virtual Cygwin paths like /proc or /cygdrive.  These paths only
    exists in the Cygwin realm so they have no meaning to a native Win32
    process.</p></li></ul></div><p>As long as the Cygwin CWD is usable as Windows CWD, the Cygwin and
Windows CWDs are in sync within a process.  However, if the Cygwin process
changes its working directory into one of the directories which are
unusable as Windows CWD, we're in trouble.  If the process uses the
Win32 API to access a file using a relative pathname, the resulting
absolute path would not match the expectations of the process.  In the
worst case, the wrong files are deleted.</p><p>To workaround this problem, Cygwin sets the Windows CWD to a special
directory in this case.  This special directory points to a virtual
filesystem within the native NT namespace (<code class="filename">\??\PIPE\</code>).
Since it's not a real filesystem, the deliberate effect is that a call to,
for instance, <code class="function">CreateFile ("foo", ...);</code> will fail,
as long as the processes CWD doesn't work as Windows CWD.</p><p>So, in general, don't use the Win32 file API in Cygwin applications.
If you <span class="bold"><strong>really</strong></span> need to access files using
the Win32 API, or if you <span class="bold"><strong>really</strong></span> have to use
<code class="function">CreateProcess</code> to start applications, rather than
the POSIX <code class="function">exec(3)</code> family of functions, you have to
make sure that the Cygwin CWD is set to some directory which is valid as
Win32 CWD.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-additional"></a>Additional Path-related Information</h3></div></div></div><p>The <span class="command"><strong>cygpath</strong></span> program provides the ability to
translate between Win32 and POSIX pathnames in shell scripts. See
<a class="xref" href="#cygpath" title="cygpath"><span class="refentrytitle">cygpath</span>(1)</a> for the details.</p><p>The <code class="envar">HOME</code>, <code class="envar">PATH</code>, and
<code class="envar">LD_LIBRARY_PATH</code> environment variables are automatically
converted from Win32 format to POSIX format (e.g.  from
<code class="filename">c:/cygwin\bin</code> to <code class="filename">/bin</code>, if
there was a mount from that Win32 path to that POSIX path) when a Cygwin
process first starts.</p><p>Symbolic links can also be used to map Win32 pathnames to POSIX.
For example, the command
<span class="command"><strong>ln -s //pollux/home/joe/data /data</strong></span> would have about
the same effect as creating a mount point from
<code class="filename">//pollux/home/joe/data</code> to <code class="filename">/data</code>
using <span class="command"><strong>mount</strong></span>, except that symbolic links cannot set
the default file access mode.  Other differences are that the mapping is
distributed throughout the file system and proceeds by iteratively
walking the directory tree instead of matching the longest prefix in a
kernel table.  Note that symbolic links will only work on network
drives that are properly configured to support the "system" file
attribute.  Many do not do so by default (the Unix Samba server does
not by default, for example).</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-textbinary"></a>Text and Binary modes</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="textbin-issue"></a>The Issue</h3></div></div></div><p>On a UNIX system, when an application reads from a file it gets
exactly what's in the file on disk and the converse is true for writing.
The situation is different in the DOS/Windows world where a file can
be opened in one of two modes, binary or text.  In the binary mode the
system behaves exactly as in UNIX.  However on writing in text mode, a
NL (\n, ^J) is transformed into the sequence CR (\r, ^M) NL.
</p><p>This can wreak havoc with the seek/fseek calls since the number
of bytes actually in the file may differ from that seen by the
application.</p><p>The mode can be specified explicitly as explained in the Programming
section below.  In an ideal DOS/Windows world, all programs using lines as
records (such as <span class="command"><strong>bash</strong></span>, <span class="command"><strong>make</strong></span>,
<span class="command"><strong>sed</strong></span> ...) would open files (and change the mode of their
standard input and output) as text.  All other programs (such as
<span class="command"><strong>cat</strong></span>, <span class="command"><strong>cmp</strong></span>, <span class="command"><strong>tr</strong></span> ...)
would use binary mode.  In practice with Cygwin, programs that deal
explicitly with object files specify binary mode (this is the case of
<span class="command"><strong>od</strong></span>, which is helpful to diagnose CR problems).  Most
other programs (such as <span class="command"><strong>sed</strong></span>, <span class="command"><strong>cmp</strong></span>,
<span class="command"><strong>tr</strong></span>) use the default mode.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="textbin-default"></a>The default Cygwin behavior</h3></div></div></div><p>The Cygwin system gives us some flexibility in deciding how files 
are to be opened when the mode is not specified explicitly. 
The rules are evolving, this section gives the design goals.</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>If the filename is specified as a POSIX path and it appears to
reside on a file system that is mounted (i.e.  if its pathname starts
with a directory displayed by <span class="command"><strong>mount</strong></span>), then the
default is specified by the mount flag.  If the file is a symbolic link,
the mode of the target file system applies.</p></li><li class="listitem"><p>If the file is specified via a MS-DOS pathname (i.e., it contains a
backslash or a colon), the default is binary.
</p></li><li class="listitem"><p>Pipes, sockets and non-file devices are opened in binary mode.
For pipes opened through the pipe() system call you can use the setmode()
function (see <a class="xref" href="#textbin-devel" title="Programming">the section called &#8220;Programming&#8221;</a> to switch to textmode.
For pipes opened through popen(), you can simply specify text or binary
mode just like in calls to fopen().</p></li><li class="listitem"><p>Sockets and other non-file devices are always opened in binary mode.
</p></li><li class="listitem"><p> When redirecting, the Cygwin shells uses rules (a-d).
Non-Cygwin shells always pipe and redirect with binary mode. With
non-Cygwin shells the commands <span class="command"><strong> cat filename | program </strong></span>
and <span class="command"><strong> program &lt; filename </strong></span> are not equivalent when
<code class="filename">filename</code> is on a text-mounted partition. </p><p>The programs <span class="command"><strong>u2d</strong></span> and <span class="command"><strong>d2u</strong></span> can
be used to add or remove CR's from a file.  <span class="command"><strong>u2d</strong></span> add's CR's before a NL.
<span class="command"><strong>d2u</strong></span> removes CR's.  Use the --help option to these commands
for more information.
</p></li></ol></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="textbin-question"></a>Binary or text?</h3></div></div></div><p>UNIX programs that have been written for maximum portability
will know the difference between text and binary files and act
appropriately under Cygwin.  Most programs included in the official
Cygwin distributions should work well in the default mode. </p><p>Binmode is the best choice usually since it's faster and
easier to handle, unless you want to exchange files with native Win32
applications.  It makes most sense to keep the Cygwin distribution
and your Cygwin home directory in binmode and generate text files in
binmode (with UNIX LF lineendings).  Most Windows applications can
handle binmode files just fine.  A notable exception is the mini-editor
<span class="command"><strong>Notepad</strong></span>, which handles UNIX lineendings incorrectly
and only produces output files with DOS CRLF lineendings.</p><p>You can convert files between CRLF and LF lineendings by using
certain tools in the Cygwin distribution like <span class="command"><strong>dos2unix</strong></span> and
<span class="command"><strong>unix2dos</strong></span> from the dos2unix package.  You can also specify
a directory in the mount table to be mounted in textmode so you can use
that directory for exchange purposes.</p><p>As application programmer you can decide on a file by file base,
or you can specify default open modes depending on the purpose for which
the application open files.  See the next section for a description of
your choices.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="textbin-devel"></a>Programming</h3></div></div></div><p>In the <code class="function">open()</code> function call, binary mode can be
specified with the flag <code class="literal">O_BINARY</code> and text mode with
<code class="literal">O_TEXT</code>. These symbols are defined in
<code class="filename">fcntl.h</code>.</p><p>The <code class="function">mkstemp()</code> and <code class="function">mkstemps()</code>
calls force binary mode.  Use <code class="function">mkostemp()</code> or
<code class="function">mkostemps()</code> with the same flags
as <code class="function">open()</code> for more control on temporary files.</p><p>In the <code class="function">fopen()</code> and <code class="function">popen()</code>
function calls, binary mode can be specified by adding a <code class="literal">b</code>
to the mode string. Text mode is specified by adding a <code class="literal">t</code>
to the mode string.</p><p>The mode of a file can be changed by the call
<code class="function">setmode(fd,mode)</code> where <code class="literal">fd</code> is a file
descriptor (an integer) and <code class="literal">mode</code> is
<code class="literal">O_BINARY</code> or <code class="literal">O_TEXT</code>. The function
returns <code class="literal">O_BINARY</code> or <code class="literal">O_TEXT</code> depending
on the mode before the call, and <code class="literal">EOF</code> on error.</p><p>There's also a convenient way to set the default open modes used
in an application by just linking against various object files provided
by Cygwin.  For instance, if you want to make sure that all files are
always opened in binary mode by an application, regardless of the mode
of the underlying mount point, just add the file
<code class="filename">/lib/binmode.o</code> to the link stage of the application
in your project, like this:</p><pre class="screen">
  $ gcc my_tiny_app.c /lib/binmode.o -o my_tiny_app
</pre><p>Even simpler:</p><pre class="screen">
  $ gcc my_tiny_app.c -lbinmode -o my_tiny_app
</pre><p>This adds code which sets the default open mode for all files
opened by <span class="command"><strong>my_tiny_app</strong></span> to binary for reading and
writing.</p><p>Cygwin provides the following libraries and object files to set the
default open mode just by linking an application against them:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><pre class="screen">
/lib/libautomode.a      -  Open files for reading in textmode,
/lib/automode.o            open files for writing in binary mode
</pre></li><li class="listitem" style="list-style-type: disc"><pre class="screen">
/lib/libbinmode.a       -  Open files for reading and writing in binary mode
/lib/binmode.o
</pre></li><li class="listitem" style="list-style-type: disc"><pre class="screen">
/lib/libtextmode.a      -  Open files for reading and writing in textmode
/lib/textmode.o
</pre></li><li class="listitem" style="list-style-type: disc"><pre class="screen">
/lib/libtextreadmode.a  -  Open files for reading in textmode,
/lib/textreadmode.o        keep default behaviour for writing.
</pre></li></ul></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-filemodes"></a>File permissions</h2></div></div></div><p>On FAT or FAT32 filesystems, files are always readable, and Cygwin
uses the DOS read-only attribute to determine if they are writable. Files are
considered to be executable if the filename ends with .bat, .com or .exe, or
if its content starts with #!. Consequently <span class="command"><strong>chmod</strong></span> can
only affect the "w" mode, it silently ignores actions involving the other
modes.  This means that <span class="command"><strong>ls -l</strong></span>
needs to open and read files. It can thus be relatively slow.</p><p>On NTFS, file permissions are evaluated using the Access Control
Lists (ACLs) attached to a file.  This can be switched off by using the
"noacl" option to the respective mount point in the
<code class="filename">/etc/fstab</code> or <code class="filename">/etc/fstab.d/$USER</code>
file.  For more information on file permissions, see



<a class="xref" href="#ntsec" title="POSIX accounts, permission, and security">the section called &#8220;POSIX accounts, permission, and security&#8221;</a>.
</p><p>On NFS shares, file permissions are exactly the POSIX permissions
transmitted from the server using the NFSv3 protocol, if the NFS client
is the one from Microsoft's "Services For Unix", or the one built into
Windows Vista or later.
</p><p>Only the user and group ownership is not necessarily correct.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-specialnames"></a>Special filenames</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-etc"></a>Special files in /etc</h3></div></div></div><p>Certain files in Cygwin's <code class="filename">/etc</code> directory are
read by Cygwin before the mount table has been established.  The list
of files is</p><pre class="screen">
  /etc/fstab
  /etc/fstab.d/$USER
  /etc/passwd
  /etc/group
</pre><p>These file are read using native Windows NT functions which have
no notion of Cygwin symlinks or POSIX paths.  For that reason
there are a few requirements as far as <code class="filename">/etc</code> is
concerned.</p><p>To access these files, the Cygwin DLL evaluates it's own full
Windows path, strips off the innermost directory component and adds
"\etc".  Let's assume the Cygwin DLL is installed as
<code class="filename">C:\cygwin\bin\cygwin1.dll</code>.  First the DLL name as
well as the innermost directory (<code class="filename">bin</code>) is stripped
off: <code class="filename">C:\cygwin\</code>.  Then "etc" and the filename to
look for is attached: <code class="filename">C:\cygwin\etc\fstab</code>.  So the
/etc directory must be parallel to the directory in which the cygwin1.dll
exists and <code class="filename">/etc</code> must not be a Cygwin symlink
pointing to another directory.  Consequentially none of the files from
the above list, including the directory <code class="filename">/etc/fstab.d</code>
is allowed to be a Cygwin symlink either.</p><p>However, native NTFS symlinks and reparse points are transparent
when accessing the above files so all these files as well as
<code class="filename">/etc</code> itself may be NTFS symlinks.</p><p>Last but not least, make sure that these files are world-readable.
Every process of any user account has to read these files potentially,
so world-readability is essential.  The only exception are the user
specific files <code class="filename">/etc/fstab.d/$USER</code>, which only have
to be readable by the $USER user account itself.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-dosdevices"></a>Invalid filenames</h3></div></div></div><p>Filenames invalid under Win32 are not necessarily invalid under Cygwin.
There are a few rules which apply to Windows filenames.  Most notably, DOS
device names like <code class="filename">AUX</code>, <code class="filename">COM1</code>,
<code class="filename">LPT1</code> or <code class="filename">PRN</code> (to name a few)
cannot be used as filename or extension in a native Win32 application.
So filenames like <code class="filename">prn.txt</code> or <code class="filename">foo.aux</code>
are invalid filenames for native Win32 applications.</p><p>This restriction doesn't apply to Cygwin applications.  Cygwin
can create and access files with such names just fine.  Just don't try
to use these files with native Win32 applications.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-specialchars"></a>Forbidden characters in filenames</h3></div></div></div><p>Some characters are disallowed in filenames on Windows filesystems.
These forbidden characters are the ASCII control characters from ASCII
value 1 to 31, plus the following characters which have a special meaning
in the Win32 API:</p><pre class="screen">
  "   *   :   &lt;   &gt;   ?   |   \
</pre><p>Cygwin can't fix this, but it has a method to workaround this
restriction.  All of the above characters, except for the backslash,
are converted to special UNICODE characters in the range 0xf000 to 0xf0ff
(the "Private use area") when creating or accessing files by adding 0xf000
to the forbidden characters' code points.</p><p>The backslash has to be exempt from this conversion, because Cygwin
accepts Win32 filenames including backslashes as path separators on input. 
Converting backslashes using the above method would make this impossible.</p><p>Additionally Win32 filenames can't contain trailing dots and spaces
for DOS backward compatibility.  When trying to create files with trailing
dots or spaces, all of them are removed before the file is created.  This
restriction only affects native Win32 applications.  Cygwin applications
can create and access files with trailing dots and spaces without problems.
</p><p>An exception from this rule are some network filesystems (NetApp,
NWFS) which choke on these filenames.  They return with an error like
"No such file or directory" when trying to create such files.  Cygwin
recognizes these filesystems and works around this problem by applying
the same rule as for the other forbidden characters.  Leading spaces and
trailing dots and spaces will be converted to UNICODE characters in the
private use area.  This behaviour can be switched on explicitely for a
filesystem or a directory tree by using the mount option
<code class="literal">dos</code>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-unusual"></a>Filenames with unusual (foreign) characters</h3></div></div></div><p> Windows filesystems use Unicode encoded as UTF-16
to store filename information.  If you don't use the UTF-8
character set (see <a class="xref" href="#setup-locale" title="Internationalization">the section called &#8220;Internationalization&#8221;</a>) then there's a
chance that a filename is using one or more characters which have no
representation in the character set you're using.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>In the default "C" locale, Cygwin creates filenames using
the UTF-8 charset.  This will always result in some valid filename by
default, but again might impose problems when switching to a non-"C"
or non-"UTF-8" charset.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>To avoid this scenario altogether, always use UTF-8 as the
character set.</p></div><p>If you don't want or can't use UTF-8 as character set for whatever
reason, you will nevertheless be able to access the file.  How does that
work?  When Cygwin converts the filename from UTF-16 to your character
set, it recognizes characters which can't be converted.  If that occurs,
Cygwin replaces the non-convertible character with a special character
sequence.  The sequence starts with an ASCII CAN character (hex code
0x18, equivalent Control-X), followed by the UTF-8 representation of the
character.  The result is a filename containing some ugly looking
characters.  While it doesn't <span class="bold"><strong>look</strong></span> nice, it
<span class="bold"><strong>is</strong></span> nice, because Cygwin knows how to convert
this filename back to UTF-16.  The filename will be converted using your
usual character set.  However, when Cygwin recognizes an ASCII CAN
character, it skips over the ASCII CAN and handles the following bytes as
a UTF-8 character.  Thus, the filename is symmetrically converted back to
UTF-16 and you can access the file.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Please be aware that this method is not entirely foolproof.
In some character set combinations it might not work for certain native
characters.</p><p>Only by using the UTF-8 charset you can avoid this problem safely.
</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-casesensitive"></a>Case sensitive filenames</h3></div></div></div><p>In the Win32 subsystem filenames are only case-preserved, but not
case-sensitive.  You can't access two files in the same directory which
only differ by case, like <code class="filename">Abc</code> and
<code class="filename">aBc</code>.  While NTFS (and some remote filesystems)
support case-sensitivity, the NT kernel does not support it by default.
Rather, you have to tweak a registry setting and reboot.  For that reason,
case-sensitivity can not be supported by Cygwin, unless you change that
registry value.</p><p>If you really want case-sensitivity in Cygwin, you can switch it
on by setting the registry value</p><pre class="screen">
HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\kernel\obcaseinsensitive
</pre><p>to 0 and reboot the machine.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
When installing Microsoft's Services For Unix (SFU), you're asked if
you want to use case-sensitive filenames.  If you answer "yes" at this point,
the installer will change the aforementioned registry value to 0, too.  So, if
you have SFU installed, there's some chance that the registry value is already
set to case sensitivity.
</p></div><p>After you set this registry value to 0, Cygwin will be case-sensitive
by default on NTFS and NFS filesystems.  However, there are limitations: 
while two <span class="bold"><strong>programs</strong></span> <code class="filename">Abc.exe</code>
and <code class="filename">aBc.exe</code> can be created and accessed like other files,
starting applications is still case-insensitive due to Windows limitations
and so the program you try to launch may not be the one actually started.  Also,
be aware that using two filenames which only differ by case might
result in some weird interoperability issues with native Win32 applications.  
You're using case-sensitivity at your own risk.  You have been warned! </p><p>Even if you use case-sensitivity, it might be feasible to switch to
case-insensitivity for certain paths for better interoperability with
native Win32 applications (even if it's just Windows Explorer).  You can do
this on a per-mount point base, by using the "posix=0" mount option in
<code class="filename">/etc/fstab</code>, or your <code class="filename">/etc/fstab.d/$USER</code>
file.</p><p><code class="filename">/cygdrive</code> paths are case-insensitive by default.
The reason is that the native Windows %PATH% environment variable is not
always using the correct case for all paths in it.  As a result, if you use
case-sensitivity on the <code class="filename">/cygdrive</code> prefix, your shell
might claim that it can't find Windows commands like <span class="command"><strong>attrib</strong></span>
or <span class="command"><strong>net</strong></span>.  To ease the pain, the <code class="filename">/cygdrive</code>
path is case-insensitive by default and you have to use the "posix=1" setting
explicitly in <code class="filename">/etc/fstab</code> or
<code class="filename">/etc/fstab.d/$USER</code> to switch it to case-sensitivity,
or you have to make sure that the native Win32 %PATH% environment variable
is using the correct case for all paths throughout.</p><p>Note that mount points as well as device names and virtual
paths like /proc are always case-sensitive!  The only exception are
the subdirectories and filenames under /proc/registry, /proc/registry32
and /proc/registry64.  Registry access is always case-insensitive.
Read on for more information.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-casesensitivedirs"></a>Case sensitive directories</h3></div></div></div><p>Windows 10 1803 introduced a new feature: NTFS directories can be marked
as case-sensitive, independently of the <code class="literal">obcaseinsensitive</code>
registry key discussed in the previous section.  This new per-directory
case-sensitivity requires setting a flag in the NTFS filesystem header which
is, unfortunately, undocumented.  The result is that you have to activate
<code class="literal">Windows Subsystem for Linux</code> (<code class="literal">WSL</code>), a
feature available via <code class="literal">Programs and Features</code> -&gt;
<code class="literal">Turn Windows features on or off</code>.  You only have to activate
<code class="literal">WSL</code>, you don't have to install any actual Linux.  After
turning <code class="literal">WSL</code> on and performing the compulsory reboot,
case-sensitive directories are activated.</p><p>Of course, there's a drawback.  While these case-sensitive directories
work like charm on the local machine, there are massive interoperability
problems when trying to access these directories from remote machines at
the time of writing this.  We opened a bug report for that at
<a class="ulink" href="https://github.com/Microsoft/WSL/issues/3885" target="_top">Microsoft's WSL issue tracker</a>,
if you're interested in the details.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>If you want case-sensitivity and need interoperability with remote
machines, better stick to switching the kernel to case-sensitivity as
outlined in <a class="xref" href="#pathnames-casesensitive" title="Case sensitive filenames">the section called &#8220;Case sensitive filenames&#8221;</a></p></div><p>With <code class="literal">WSL</code> activated and starting with Cygwin 3.0.0,
Cygwin's <span class="command"><strong>mkdir</strong></span> system call automatically created all
directories below the Cygwin installation directory as case-sensitive.
With Cygwin 3.0.2, this feature had been disabled again for hopefully
obvious reasons.</p><p>However, you can still use Cygwin's new
<a class="xref" href="#chattr" title="chattr"><span class="refentrytitle">chattr</span>(1)</a> tool with the <code class="literal">-C</code> option
to control case-sensitivity of directories on NTFS filesystems.</p><p>Please keep in mind that switching <span class="emphasis"><em>off</em></span>
case-sensitivity on a directory has a condition attached to it:  If
the directory contains two files which only differ in case (e. g.,
<code class="filename">foo</code> and <code class="filename">FOO</code>), Windows
refuses to convert the dir back to case-insensitive.  First you have
to fix the filename collision, i. e., you have to rename one of these
files.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-posixdevices"></a>POSIX devices</h3></div></div></div><p>While there is no need to create a POSIX <code class="filename">/dev</code> 
directory, the directory is automatically created as part of a Cygwin
installation.  It's existence is often a prerequisit to run certain
applications which create symbolic links, fifos, or UNIX sockets in
<code class="filename">/dev</code>.  Also, the directories <code class="filename">/dev/shm</code>
and <code class="filename">/dev/mqueue</code> are required to exist to use named POSIX
semaphores, shared memory, and message queues, so a system without a real
<code class="filename">/dev</code> directory is functionally crippled.
</p><p>Apart from that, Cygwin automatically simulates POSIX devices
internally.  The <code class="filename">/dev</code> directory is automagically
populated with existing POSIX devices by Cygwin in a way comparable with a
<a class="ulink" href="http://en.wikipedia.org/wiki/Udev" target="_top">udev</a> based virtual
<code class="filename">/dev</code> directory under Linux.</p><p>
Cygwin supports the following character devices commonly found on POSIX systems:
</p><pre class="screen">
/dev/null
/dev/zero
/dev/full

/dev/console	Pseudo device name for the current console window of a session.
		Cygwin's /dev/console is not quite comparable with the console
		device on UNIX machines.

/dev/cons0      Console sessions are numbered from  /dev/cons0 upwards.
/dev/cons1	Console device names are pseudo device names, only accessible
...		from processes within this very console session.  This is due
		to a restriction in Windows.

/dev/tty	The current controlling tty of a session.

/dev/ptmx	Pseudo tty master device.

/dev/pty0	Pseudo ttys are numbered from /dev/pty0 upwards as they are
/dev/pty1	requested.
...

/dev/ttyS0	Serial communication devices.  ttyS0 == Win32 COM1,
/dev/ttyS1	ttyS1 == COM2, etc.
...

/dev/pipe
/dev/fifo

/dev/kmsg	Kernel message pipe, for usage with sys logger services.

/dev/random	Random number generator.
/dev/urandom

/dev/dsp	Default sound device of the system.
</pre><p>
Cygwin also has several Windows-specific devices:
</p><pre class="screen">
/dev/com1	The serial ports, starting with COM1 which is the same as ttyS0.
/dev/com2	Please use /dev/ttySx instead.
...

/dev/conin	Same as Windows CONIN$.
/dev/conout	Same as Windows CONOUT$.
/dev/clipboard	The Windows clipboard, text only
/dev/windows	The Windows message queue.
</pre><p>
Block devices are accessible by Cygwin processes using fixed POSIX device
names.  These POSIX device names are generated using a direct conversion
from the POSIX namespace to the internal NT namespace.
E.g. the first harddisk is the NT internal device \device\harddisk0\partition0
or the first partition on the third harddisk is \device\harddisk2\partition1.
The first floppy in the system is \device\floppy0, the first CD-ROM is
\device\cdrom0 and the first tape drive is \device\tape0.</p><p>The mapping from physical device to the name of the device in the
internal NT namespace can be found in various places.  For hard disks and
CD/DVD drives, the Windows "Disk Management" utility (part of the
"Computer Management" console) shows that the mapping of "Disk 0" is
\device\harddisk0.  "CD-ROM 2" is \device\cdrom2.  Another place to find
this mapping is the "Device Management" console.  Disks have a
"Location" number, tapes have a "Tape Symbolic Name", etc.
Unfortunately, the places where this information is found is not very
well-defined.</p><p>
For external disks (USB-drives, CF-cards in a cardreader, etc) you can use
Cygwin to show the mapping.  <code class="filename">/proc/partitions</code>
contains a list of raw drives known to Cygwin.  The <span class="command"><strong>df</strong></span>
command shows a list of drives and their respective sizes.  If you match
the information between <code class="filename">/proc/partitions</code> and the
<span class="command"><strong>df</strong></span> output, you should be able to figure out which
external drive corresponds to which raw disk device name.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Apart from tape devices which are not block devices and are
by default accessed directly, accessing mass storage devices raw
is something you should only do if you know what you're doing and know how to
handle the information.  <span class="bold"><strong>Writing</strong></span> to a raw
mass storage device you should only do if you
<span class="bold"><strong>really</strong></span> know what you're doing and are aware
of the fact that any mistake can destroy important information, for the
device, and for you.  So, please, handle this ability with care.</p><p><span class="bold"><strong>Important:</strong></span> Windows may allow raw read
<span class="bold"><strong>and write</strong></span> access to partitions (for example
<code class="filename">/dev/sda2</code>) even from unprivileged processes.  This is
usually the case for partitions on "removable" drives like USB flash drives
or regular SATA/NVMe drives behind USB docking stations.  If
<span class="command"><strong>chkdsk X:</strong></span> works, raw access to the same partition is
possible from the same user account.
<span class="bold"><strong>You have been warned.</strong></span></p></div><p>
Last but not least, the mapping from POSIX /dev namespace to internal
NT namespace is as follows:
</p><pre class="screen">
POSIX device name     Internal NT device name

/dev/st0	      \device\tape0, rewind
/dev/nst0	      \device\tape0, no-rewind
/dev/st1	      \device\tape1
/dev/nst1	      \device\tape1
...
/dev/st15
/dev/nst15

/dev/fd0	      \device\floppy0
/dev/fd1	      \device\floppy1
...
/dev/fd15

/dev/sr0	      \device\cdrom0
/dev/sr1	      \device\cdrom1
...
/dev/sr15

/dev/scd0	      \device\cdrom0
/dev/scd1	      \device\cdrom1
...
/dev/scd15

/dev/sda	      \device\harddisk0\partition0	(whole disk)
/dev/sda1	      \device\harddisk0\partition1	(first partition)
...
/dev/sda15	      \device\harddisk0\partition15	(fifteenth partition)

/dev/sdb	      \device\harddisk1\partition0
/dev/sdb1	      \device\harddisk1\partition1

[up to]

/dev/sddx	      \device\harddisk127\partition0
/dev/sddx1	      \device\harddisk127\partition1
...
/dev/sddx15	      \device\harddisk127\partition15
</pre><p>
if you don't like these device names, feel free to create symbolic
links as they are created on Linux systems for convenience:
</p><pre class="screen">
ln -s /dev/sr0 /dev/cdrom
ln -s /dev/nst0 /dev/tape
...
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-exe"></a>The .exe extension</h3></div></div></div><p>Win32 executable filenames end with <code class="filename">.exe</code>
but the <code class="filename">.exe</code> need not be included in the command,
so that traditional UNIX names can be used.  However, for programs that
end in <code class="filename">.bat</code> and <code class="filename">.com</code>, you
cannot omit the extension.  </p><p>As a side effect, the <span class="command"><strong> ls filename</strong></span> gives
information about <code class="filename">filename.exe</code> if
<code class="filename">filename.exe</code> exists and <code class="filename">filename</code>
does not.  In the same situation the function call
<code class="function">stat("filename",..)</code> gives information about
<code class="filename">filename.exe</code>.  The two files can be distinguished
by examining their inodes, as demonstrated below.
</p><pre class="screen">
<code class="prompt">bash$</code> <strong class="userinput"><code>ls * </code></strong>
a      a.exe     b.exe
<code class="prompt">bash$</code> <strong class="userinput"><code>ls -i a a.exe</code></strong>
445885548 a       435996602 a.exe
<code class="prompt">bash$</code> <strong class="userinput"><code>ls -i b b.exe</code></strong>
432961010 b       432961010 b.exe
</pre><p>
If a shell script <code class="filename">myprog</code> and a program
<code class="filename">myprog.exe</code> coexist in a directory, the shell
script has precedence and is selected for execution of
<span class="command"><strong>myprog</strong></span>.  Note that this was quite the reverse up to
Cygwin 1.5.19.  It has been changed for consistency with the rest of Cygwin.
</p><p>The <span class="command"><strong>gcc</strong></span> compiler produces an executable named
<code class="filename">filename.exe</code> when asked to produce
<code class="filename">filename</code>. This allows many makefiles written
for UNIX systems to work well under Cygwin.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-proc"></a>The /proc filesystem</h3></div></div></div><p>
Cygwin, like Linux and other similar operating systems, supports the
<code class="filename">/proc</code> virtual filesystem. The files in this
directory are representations of various aspects of your system,
for example the command <strong class="userinput"><code>cat /proc/cpuinfo</code></strong> 
displays information such as what model and speed processor you have.
</p><p>
One unique aspect of the Cygwin <code class="filename">/proc</code> filesystem
is <code class="filename">/proc/registry</code>, see next section.
</p><p>
The Cygwin <code class="filename">/proc</code> is not as complete as the
one in Linux, but it provides significant capabilities. The
<code class="systemitem">procps</code> package contains several utilities
that use it.
</p><div class="refentry"><a name="proc"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>proc &#8212; process and system information pseudo-filesystem</p></div><div class="refsect1"><a name="proc-desc"></a><h2>Description</h2><p>The <code class="filename">proc</code> filesystem is a pseudo-filesystem
	which provides an interface to Cygwin data structures.
	It is commonly mounted at <code class="filename">/proc</code>.
	Typically, it is mounted automatically by the system.
      </p><div class="refsect2"><a name="proc-overview"></a><h3>Overview</h3><p>Underneath <code class="filename">/proc</code>, there are the following
	  general groups of files and subdirectories:
	</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span></code> subdirectories</span></dt><dd><p>Each one of these subdirectories contains files and
		subdirectories exposing information about the process with the
		corresponding process id.
	      </p><p>The <code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span></code> subdirectories are
		visible when iterating through <code class="filename">/proc</code> with
		<span class="citerefentry"><span class="refentrytitle">readdir</span>(2)</span>
		(and thus are visible when one uses
		<span class="citerefentry"><span class="refentrytitle">ls</span>(1)</span>
		to view the contents of <code class="filename">/proc</code>).
	      </p></dd><dt><span class="term"><code class="filename">/proc/self</code></span></dt><dd><p>When a process accesses this magic symbolic link, it resolves
		to the process's own <code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span></code> directory.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[a-z]*</em></span></code></span></dt><dd><p>Various other files and subdirectories under
		<code class="filename">/proc</code> expose system-wide information.
	      </p></dd></dl></div><p>All of the above are described in more detail below.
	</p></div><div class="refsect2"><a name="proc-files-and-directories"></a><h3>Files and directories</h3><p>
	    The following list provides details of many of the files
	    and directories under the <code class="filename">/proc</code> hierarchy.
	  </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span></code></span></dt><dd><p>
	        There is a numerical subdirectory for each running
	        process; the subdirectory is named by the process id.
		Each <code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span></code> subdirectory
		contains the pseudo-files and directories described below.
	      </p><p>The files inside each <code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span></code>
	        directory are normally owned by the effective user and
	        effective group id of the process.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/cmdline</code></span></dt><dd><p>This read-only file holds the complete command line for the
	        process, unless the process is a zombie.
	        In the latter case, there is nothing in this file: that is, a
	        read on this file will return 0 characters.
	        The command-line arguments appear in this file as a set of
	        strings followed by null bytes ('\0').
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/ctty</code></span></dt><dd><p>
	        This read-only file holds the name of the console or control
	        terminal device for the process, unless the process is detached
	        from any terminal.
	        In the latter case, there is only a newline in this file.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/cwd</code></span></dt><dd><p>
	        This is a symbolic link to the current working directory of the
	        process.
	        To find out the current working directory of process 20, for
	        instance, you can do this:

		</p><pre class="screen">
		  <code class="prompt">$</code> <strong class="userinput"><code>cd /proc/20/cwd; /bin/pwd</code></strong>
		</pre><p>
	      </p><p>Note that the <span class="emphasis"><em>pwd</em></span> command
	        is often a shell built-in, and might not work properly. In
		<span class="citerefentry"><span class="refentrytitle">bash</span>(1)</span>,
		you may use <strong class="userinput"><code>pwd -P</code></strong>.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/environ</code></span></dt><dd><p>
	        This read-only file contains the current environment that may
	        have been changed by the currently executing program.
	        The entries are separated by null bytes ('\0'),
	        and there may be a null byte at the end.
		Thus, to print out the environment of process 1, you would do:

		</p><pre class="screen">
		  <code class="prompt">$</code> <strong class="userinput"><code>cat -A /proc/1/environ</code></strong>
		</pre><p>
	      </p><p>If, after an
		<span class="citerefentry"><span class="refentrytitle">execve</span>(2)</span>,
		the process modifies its environment (e.g., by calling
		functions such as
		<span class="citerefentry"><span class="refentrytitle">putenv</span>(3)</span>
		or modifying the
		<span class="citerefentry"><span class="refentrytitle">environ</span>(7)</span>
		variable directly), this file will reflect those changes.
		That may not be the case on other systems such as Linux.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/exe</code></span></dt><dd><p>
	        This file is a symbolic link containing the actual pathname of
	        the executed command.
	        This symbolic link can be dereferenced normally; attempting to
	        open it will open the executable.
	        You can even type <code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/exe</code>
	        to run another copy of the same executable that is being run by
	        process <span class="emphasis"><em>[pid]</em></span>.
		<code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/exe</code> is a pointer to
		the binary which was executed, and appears as a symbolic link.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/exename</code></span></dt><dd><p>
	        This read-only file contains the actual pathname of the executed
	        command.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/fd/</code></span></dt><dd><p>
                This is a subdirectory containing one entry for each
                file which the process has open, named by its file
                descriptor, and which is a symbolic link to the actual
                file.
                Thus, 0 is standard input, 1 standard output, 2 standard
                error, and so on.
              </p><p>
		For file descriptors for pipes and sockets, the entries will
		be symbolic links whose content is the file type with the
		inode. A
		<span class="citerefentry"><span class="refentrytitle">readlink</span>(2)</span>
		call on this file returns a string in the format:
		<code class="literal">type:<span class="emphasis"><em>[inode]</em></span></code>
	      </p><p>For example, <code class="literal">socket:[2248868]</code>
		will be a socket and its inode is 2248868.
	      </p><p>
	        Programs that take a filename as a command-line argument, but
	        don't take input from standard input if no argument is supplied,
	        and programs that write to a file named as a command-line
	        argument, but don't send their output to standard output if no
	        argument is supplied, can nevertheless be made to use standard
		input or standard output by using
		<code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/fd</code> files as command-line
		arguments.
		For example, assuming that <code class="option">-i</code> is the flag
		designating an input file and <code class="option">-o</code> is the flag
		designating an output file:

		</p><pre class="screen">
		  <code class="prompt">$</code> <strong class="userinput"><code>foobar -i /proc/self/fd/0 -o /proc/self/fd/1 ...</code></strong>
		</pre><p>

		and you have a working filter.
	      </p><p><code class="filename">/proc/self/fd/N</code> is approximately
		the same as <code class="filename">/dev/fd/N</code> in some Unix
		and Unix-like systems.
		Most Linux <span class="command"><strong>makedev</strong></span> scripts symbolically
		link <code class="filename">/dev/fd</code> to
		<code class="filename">/proc/self/fd</code>, in fact.
	      </p><p>Most systems provide symbolic links
	        <code class="filename">/dev/stdin</code>,
		<code class="filename">/dev/stdout</code>, and
		<code class="filename">/dev/stderr</code>, which respectively link
		to the files <code class="literal">0</code>, <code class="literal">1</code>,
		and <code class="literal">2</code> in <code class="filename">/proc/self/fd</code>.
		Thus the example command above could be written as:

		</p><pre class="screen">
		  <code class="prompt">$</code> <strong class="userinput"><code>foobar -i /dev/stdin -o /dev/stdout ...</code></strong>
		</pre><p>
	      </p><p>
	        Note that for file descriptors referring to inodes (pipes and
	        sockets, see above), those inodes still have permission bits and
	        ownership information distinct from those of the
		<code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/fd</code> entry, and that the
		owner may differ from the user and group ids of the process.
	        An unprivileged process may lack permissions to open them, as in
	        this example:

		</p><pre class="screen">
		  <code class="prompt">$</code> <strong class="userinput"><code>echo test | sudo -u nobody cat</code></strong>
		  <code class="computeroutput">test</code>
		  <code class="prompt">$</code> <strong class="userinput"><code>echo test | sudo -u nobody cat /proc/self/fd/0</code></strong>
		  <code class="computeroutput">cat: /proc/self/fd/0: Permission denied</code>
		</pre><p>
	      </p><p>
	        File descriptor 0 refers to the pipe created by the shell and
		owned by that shell's user, which is not
		<code class="literal">nobody</code>, so <span class="command"><strong>cat</strong></span>
		does not have permission to create a new file descriptor to
		read from that inode, even though it can still read from its
		existing file descriptor 0.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/gid</code></span></dt><dd><p>
	        This read-only file contains the primary group id for the
	        process.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/maps</code></span></dt><dd><p>
	        A file containing the currently mapped memory regions and their
	        access permissions. See
		<span class="citerefentry"><span class="refentrytitle">mmap</span>(2)</span>
		for some further information about memory mappings.
	      </p><p>The format of the file is:

</p><pre class="screen">
<span class="emphasis"><em>address          perms offset   dev       inode               pathname</em></span>
<code class="computeroutput">
00010000-00020000 rw-s 00000000 0000:0000 0                   [win heap 1 default shared]
...
00080000-00082000 rw-p 00000000 0000:0000 0                   [win heap 0 default grow]
00082000-0009A000 ===p 00002000 0000:0000 0                   [win heap 0 default grow]
000A0000-000A1000 rw-p 00000000 0000:0000 0                   [win heap 2 grow]
000A1000-000BA000 ===p 00001000 0000:0000 0                   [win heap 2 grow]
000C0000-000D9000 rw-p 00000000 0000:0000 0                   [win heap 0 default grow]
000D9000-001C0000 ===p 00019000 0000:0000 0                   [win heap 0 default grow]
00200000-00377000 ===p 00000000 0000:0000 0
00377000-00378000 rw-p 00177000 0000:0000 0                   [peb]
00378000-0037A000 rw-p 00178000 0000:0000 0                   [teb (tid 8844)]
...
00400000-005F9000 ===p 00000000 0000:0000 0                   [stack (tid 8884)]
005F9000-005FC000 rw-g 001F9000 0000:0000 0                   [stack (tid 8884)]
005FC000-00600000 rw-p 001FC000 0000:0000 0                   [stack (tid 8884)]
00600000-006C7000 r--s 00000000 EE45:4341 281474976741117     /proc/cygdrive/c/Windows/System32/locale.nls
...
100400000-100401000 r--p 00000000 EE45:4341 281474978095037   /usr/bin/sh.exe
100401000-100413000 r-xp 00001000 EE45:4341 281474978095037   /usr/bin/sh.exe
100413000-100414000 rw-p 00013000 EE45:4341 281474978095037   /usr/bin/sh.exe
...
180010000-180020000 rw-s 00000000 0000:0000 0                 [procinfo]
180020000-180029000 rw-s 00000000 0000:0000 0                 [cygwin-user-shared]
180030000-18003C000 rw-s 00000000 0000:0000 0                 [cygwin-shared]
180040000-180041000 r--p 00000000 EE45:4341 2251799814294868   /usr/bin/cygwin1.dll
180041000-18022D000 r-xp 00001000 EE45:4341 2251799814294868   /usr/bin/cygwin1.dll
18022D000-180231000 rwxp 001ED000 EE45:4341 2251799814294868   /usr/bin/cygwin1.dll
180231000-18026A000 rw-p 001F1000 EE45:4341 2251799814294868   /usr/bin/cygwin1.dll
...
800000000-800090000 rw-p 00000000 0000:0000 0                 [heap]
800090000-820000000 ===p 00090000 0000:0000 0                 [heap]
7FF4FDEB0000-7FF4FDEB5000 r--s 00000000 0000:0000 0
7FF4FDEB5000-7FF4FDFB0000 ===s 00005000 0000:0000 0
7FF4FDFB0000-7FF5FDFD0000 ===p 00000000 0000:0000 0
...
7FFBEEAC0000-7FFBEEAC1000 r--p 00000000 EE45:4341 844424934724994   /proc/cygdrive/c/Windows/System32/kernel32.dll
7FFBEEAC1000-7FFBEEB36000 r-xp 00001000 EE45:4341 844424934724994   /proc/cygdrive/c/Windows/System32/kernel32.dll
7FFBEEB36000-7FFBEEB68000 r--p 00076000 EE45:4341 844424934724994   /proc/cygdrive/c/Windows/System32/kernel32.dll
7FFBEEB68000-7FFBEEB6A000 rw-p 000A8000 EE45:4341 844424934724994   /proc/cygdrive/c/Windows/System32/kernel32.dll
7FFBEEB6A000-7FFBEEB72000 r--p 000AA000 EE45:4341 844424934724994   /proc/cygdrive/c/Windows/System32/kernel32.dll
...
</code>
</pre><p>
	      </p><p>The <code class="literal">address</code> field is the address
		space in the process that the mapping occupies.
		The <code class="literal">perms</code> field is a set of permissions:

		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">r</span></dt><dd><p>read</p></dd><dt><span class="term">w</span></dt><dd><p>write</p></dd><dt><span class="term">x</span></dt><dd><p>execute</p></dd><dt><span class="term">===</span></dt><dd><p>reserved</p></dd><dt><span class="term">s</span></dt><dd><p>shared</p></dd><dt><span class="term">g</span></dt><dd><p>guard</p></dd><dt><span class="term">p</span></dt><dd><p>private</p></dd></dl></div><p>
	      </p><p>The <code class="literal">offset</code> field is the offset
		into the file/whatever;
		<code class="literal">dev</code> is the device (major:minor);
		<code class="literal">inode</code> is the inode on that device.
		0 indicates that no inode is associated with the memory
		region, as would be the case with BSS (uninitialized data).
	      </p><p>The <code class="literal">pathname</code> field will usually
		be the file that is backing the mapping.
	      </p><p>There are additional helpful pseudo-paths:
		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">[<code class="literal">cygwin-shared</code>]</span></dt><dd><p>Global shared Cygwin process information.</p></dd><dt><span class="term">[<code class="literal">cygwin-user-shared</code>]</span></dt><dd><p>Global shared Cygwin user information.</p></dd><dt><span class="term">[<code class="literal">peb</code>]</span></dt><dd><p>Windows Process Environment Block.</p></dd><dt><span class="term">[<code class="literal">procinfo</code>]</span></dt><dd><p>Cygwin process information.</p></dd><dt><span class="term">[<code class="literal">shared-user-data</code>]</span></dt><dd><p>Shared user information.</p></dd><dt><span class="term">[<code class="literal">heap</code>]</span></dt><dd><p>The process's heap.</p></dd><dt><span class="term">[<code class="literal">stack</code>]</span></dt><dd><p>
			The initial process's (also known as the main
			thread's) stack.
		      </p></dd><dt><span class="term">[<code class="literal">stack</code>
		      (tid <code class="literal">&lt;tid&gt;</code>)]
		    </span></dt><dd><p>
			A thread's stack (where the
			<code class="literal">&lt;tid&gt;</code> is a thread id).
		      </p></dd><dt><span class="term">[<code class="literal">teb</code>
		      (tid <code class="literal">&lt;tid&gt;</code>)]
		    </span></dt><dd><p>
			Windows Thread Environment Block (where
			<code class="literal">&lt;tid&gt;</code> is a thread id).
		      </p></dd><dt><span class="term">[<code class="literal">win heap &lt;n&gt;
		      default shared exec grow noserial debug</code>]
		    </span></dt><dd><p>
			Windows extended heap (where
			<code class="literal">&lt;n&gt;</code> is a heap id)
			and the rest of the words are heap flags:

			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">default</code></span></dt><dd><p>default heap flags</p></dd><dt><span class="term"><code class="literal">shared</code></span></dt><dd><p>shareable and mapped heap flags</p></dd><dt><span class="term"><code class="literal">exec</code></span></dt><dd><p>executable heap flag</p></dd><dt><span class="term"><code class="literal">grow</code></span></dt><dd><p>growable heap flag</p></dd><dt><span class="term"><code class="literal">noserial</code></span></dt><dd><p>do not serialize heap flag</p></dd><dt><span class="term"><code class="literal">debug</code></span></dt><dd><p>debugged heap flag</p></dd></dl></div><p>
		      </p></dd></dl></div><p>
	      </p><p>If the <code class="filename">pathname</code> field is blank,
	        this is an anonymous mapping as obtained via
		<span class="citerefentry"><span class="refentrytitle">mmap</span>(2)</span>.
		There is no easy way to coordinate this back to a process's
		source, short of running it through
		<span class="citerefentry"><span class="refentrytitle">gdb</span>(1)</span>,
		<span class="citerefentry"><span class="refentrytitle">strace</span>(1)</span>,
		or similar.
	      </p><p>
		<code class="filename">pathname</code> is shown unescaped except
		for newline characters, which are replaced with an
		octal escape sequence.
		As a result, it is not possible to determine whether the
		original <code class="filename">pathname</code> contained a newline
		character or the literal <code class="literal">\e012</code>
		character sequence.
	      </p><p>
		If the mapping is file-backed and the file has been deleted,
		the string "<code class="literal"> (deleted)</code>"
		is appended to the <code class="filename">pathname</code>.
	        Note that this is ambiguous too.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/mountinfo</code></span></dt><dd><p>
	        This file contains information about mount points in the
	        process's mount namespace (see
	        <span class="citerefentry"><span class="refentrytitle">mount_namespaces</span>(7)</span>).
		It supplies various information (e.g., propagation state, root
		of mount for bind mounts, identifier for each mount and its
		parent) that is missing from the (older)
		<code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/mounts</code>
	        file, and fixes various other problems with that file (e.g.,
	        nonextensibility, failure to distinguish per-mount versus
	        per-superblock options).
	      </p><p>The file contains lines of the form:</p><pre class="screen">
<code class="computeroutput">
36 35 98:0 /mnt1 /mnt2 rw,noatime master:1 - ext3 /dev/root rw,errors=continue
(1)(2)(3)   (4)   (5)      (6)      (?)   (7) (8)   (9)         (10)
</code>
</pre><p>
                The numbers in parentheses are labels for the descriptions below:

		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">(1)</span></dt><dd><p>mount id: a unique id for the mount (may be reused after
	                <span class="citerefentry"><span class="refentrytitle">umount</span>(2)</span>).
		      </p></dd><dt><span class="term">(2)</span></dt><dd><p>parent id: the id of the parent mount (or of self for
	                the root of this mount namespace's mount tree).
	              </p></dd><dt><span class="term">(3)</span></dt><dd><p><span class="emphasis"><em>major</em></span><code class="literal">:</code><span class="emphasis"><em>minor</em></span>:
			the value of <code class="literal">st_dev</code>
			for files on this filesystem (see
			<span class="citerefentry"><span class="refentrytitle">stat</span>(2)</span>).
	              </p></dd><dt><span class="term">(4)</span></dt><dd><p>root: the pathname of the directory in the filesystem
	                which forms the root of this mount.
	              </p></dd><dt><span class="term">(5)</span></dt><dd><p>mount point: the pathname of the mount point relative to
	                the process's root directory.
	              </p></dd><dt><span class="term">(6)</span></dt><dd><p>mount options: per-mount options (see
	                <span class="citerefentry"><span class="refentrytitle">mount</span>(2)</span>).
		      </p></dd><dt><span class="term">(?)</span></dt><dd><p>optional fields: zero or more fields of the form
			"<span class="emphasis"><em>tag</em></span><code class="literal">[:</code><span class="emphasis"><em>value</em></span><code class="literal">]</code>";
			see below.
	              </p></dd><dt><span class="term">(7)</span></dt><dd><p>separator: the end of the optional fields is marked by a
	                single hyphen.
	              </p></dd><dt><span class="term">(8)</span></dt><dd><p>filesystem type: the filesystem type in the form
			"<span class="emphasis"><em>type</em></span><code class="literal">[.</code><span class="emphasis"><em>subtype</em></span><code class="literal">]</code>".
	              </p></dd><dt><span class="term">(9)</span></dt><dd><p>mount source: filesystem-specific information or
			"<code class="literal">none</code>".
	              </p></dd><dt><span class="term">(10)</span></dt><dd><p>super options: per-superblock options (see
	                <span class="citerefentry"><span class="refentrytitle">mount</span>(2)</span>).
		      </p></dd></dl></div><p>
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/mounts</code></span></dt><dd><p>
	        This file lists all the filesystems currently mounted in the
	        process's mount namespace (see
	        <span class="citerefentry"><span class="refentrytitle">mount_namespaces</span>(7)</span>).
		The format of this file is documented in
		<span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span>.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/pgid</code></span></dt><dd><p>
	        This read-only file contains the process group id for the
	        process.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/ppid</code></span></dt><dd><p>
	        This read-only file contains the parent process id for the
	        process.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/root</code></span></dt><dd><p>
	        UNIX and Linux support the idea of a per-process root of the
	        filesystem, set by the
	        <span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span> system call.
		This file is a symbolic link that points to the process's root
		directory, and behaves in the same way as
		<code class="filename">exe</code>, and
		<code class="filename">fd/*</code>.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/sid</code></span></dt><dd><p>
	        This read-only file contains the session id for the process.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/stat</code></span></dt><dd><p>
	        Status information about the process.
	        This is used by some implementations of
	        <span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span>.
	      </p><p>
	        The fields, in order, with their proper
	        <span class="citerefentry"><span class="refentrytitle">scanf</span>(3)</span> format specifiers, are listed below.
	      </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">(1) <span class="emphasis"><em>pid</em></span>  %d</span></dt><dd><p>The process id.</p></dd><dt><span class="term">(2) <span class="emphasis"><em>comm</em></span>  %s</span></dt><dd><p>
	              The filename of the executable, in parentheses.
	              This is visible whether or not the executable is swapped
	              out.
	            </p></dd><dt><span class="term">(3) <span class="emphasis"><em>state</em></span>  %c</span></dt><dd><p>
	              One of the following characters, indicating process state:
	            </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">R</span></dt><dd><p>Runnable</p></dd><dt><span class="term">O</span></dt><dd><p>Running</p></dd><dt><span class="term">S</span></dt><dd><p>Sleeping in an interruptible wait</p></dd><dt><span class="term">D</span></dt><dd><p>Waiting in uninterruptible disk sleep</p></dd><dt><span class="term">Z</span></dt><dd><p>Zombie</p></dd><dt><span class="term">T</span></dt><dd><p>Stopped (on a signal) or trace stopped</p></dd></dl></div></dd><dt><span class="term">(4) <span class="emphasis"><em>ppid</em></span>  %d</span></dt><dd><p>The PID of the parent of this process.</p></dd><dt><span class="term">(5) <span class="emphasis"><em>pgrp</em></span>  %d</span></dt><dd><p>The process group id of the process.</p></dd><dt><span class="term">(6) <span class="emphasis"><em>session</em></span>  %d</span></dt><dd><p>The session id of the process.</p></dd><dt><span class="term">(7) <span class="emphasis"><em>tty_nr</em></span>  %d</span></dt><dd><p>
	              The controlling terminal of the process.
	              (The minor device number is contained in the combination
	              of bits 31 to 20 and 7 to 0; the major device number is in
	              bits 15 to 8.)
	            </p></dd><dt><span class="term">(8) <span class="emphasis"><em>tpgid</em></span>  %d</span></dt><dd><p>
	              The id of the foreground process group of the controlling
	              terminal of the process.
	            </p></dd><dt><span class="term">(9) <span class="emphasis"><em>flags</em></span>  %u</span></dt><dd><p>The kernel flags word of the process.</p></dd><dt><span class="term">(10) <span class="emphasis"><em>minflt</em></span>  %lu</span></dt><dd><p>
	              The number of minor faults the process has made which have
	              not required loading a memory page from disk.
	            </p></dd><dt><span class="term">(11) <span class="emphasis"><em>cminflt</em></span>  %lu</span></dt><dd><p>
	              The number of minor faults that the process's waited-for
	              children have made.
	            </p></dd><dt><span class="term">(12) <span class="emphasis"><em>majflt</em></span>  %lu</span></dt><dd><p>
	              The number of major faults the process has made which have
	              required loading a memory page from disk.
	            </p></dd><dt><span class="term">(13) <span class="emphasis"><em>cmajflt</em></span>  %lu</span></dt><dd><p>
	              The number of major faults that the process's waited-for
	              children have made.
	            </p></dd><dt><span class="term">(14) <span class="emphasis"><em>utime</em></span>  %lu</span></dt><dd><p>
	              Amount of time that this process has been scheduled in
	              user mode, measured in clock ticks (divide by
	              <code class="literal">sysconf(_SC_CLK_TCK)</code>).
	            </p></dd><dt><span class="term">(15) <span class="emphasis"><em>stime</em></span>  %lu</span></dt><dd><p>
	              Amount of time that this process has been scheduled in
	              kernel mode, measured in clock ticks (divide by
	              <code class="literal">sysconf(_SC_CLK_TCK)</code>).
	            </p></dd><dt><span class="term">(16) <span class="emphasis"><em>cutime</em></span>  %ld</span></dt><dd><p>
	              Amount of time that this process's waited-for children
	              have been scheduled in user mode, measured in clock ticks
	              (divide by <code class="literal">sysconf(_SC_CLK_TCK)</code>).
	              (See also
	              <span class="citerefentry"><span class="refentrytitle">times</span>(2)</span>).
		    </p></dd><dt><span class="term">(17) <span class="emphasis"><em>cstime</em></span>  %ld</span></dt><dd><p>
	              Amount of time that this process's waited-for children
	              have been scheduled in kernel mode, measured in clock
	              ticks (divide by <code class="literal">sysconf(_SC_CLK_TCK)</code>).
	            </p></dd><dt><span class="term">(18) <span class="emphasis"><em>priority</em></span>  %ld</span></dt><dd><p>
	              For processes running a real-time scheduling policy
	              (<span class="emphasis"><em>policy</em></span> below; see
	              <span class="citerefentry"><span class="refentrytitle">sched_setscheduler</span>(2)</span>),
		      this is the negated scheduling priority, minus one; that
		      is, a number in the range -2 to -100, corresponding to
		      real-time priorities 1 to 99. For processes running
		      under a non-real-time scheduling policy, this is the raw
		      nice value
		      (<span class="citerefentry"><span class="refentrytitle">setpriority</span>(2)</span>)
		      as represented in the kernel.
	              The kernel stores nice values as numbers in the range 0
	              (high) to 39 (low), corresponding to the user-visible nice
	              range of -20 to 19.
	            </p></dd><dt><span class="term">(19) <span class="emphasis"><em>nice</em></span>  %ld</span></dt><dd><p>
	              The nice value (see
	              <span class="citerefentry"><span class="refentrytitle">setpriority</span>(2)</span>), a value in the range 19 (low priority)
		      to -20 (high priority).
		    </p></dd><dt><span class="term">(20) <span class="emphasis"><em>num_threads</em></span>  %ld</span></dt><dd><p>
	              Number of threads in this process. Currently shown as 0.
	            </p></dd><dt><span class="term">(21) <span class="emphasis"><em>itrealvalue</em></span>  %ld</span></dt><dd><p>
	              The time in jiffies before the next
		      <code class="literal">SIGALRM</code>
	              is sent to the process due to an interval timer.
	              This field is no longer maintained, and is hard coded as 0.
	            </p></dd><dt><span class="term">(22) <span class="emphasis"><em>starttime</em></span>  %llu</span></dt><dd><p>
	              The time the process started after system boot.
	              The value is expressed in clock ticks (divide by
	              <code class="literal">sysconf(_SC_CLK_TCK)</code>).
	          </p></dd><dt><span class="term">(23) <span class="emphasis"><em>vsize</em></span>  %lu</span></dt><dd><p>Virtual memory size in bytes.</p></dd><dt><span class="term">(24) <span class="emphasis"><em>rss</em></span>  %ld</span></dt><dd><p>
	              Resident Set Size: number of pages the process has in real
	              memory.
	              This is just the pages which count toward text, data, or
	              stack space.
	              This does not include pages which have not been
	              demand-loaded in, or which are swapped out.
	            </p></dd><dt><span class="term">(25) <span class="emphasis"><em>rsslim</em></span>  %lu</span></dt><dd><p>
	              Current soft limit in bytes on the rss of the process; see
	              the description of <code class="literal">RLIMIT_RSS</code> in
	              <span class="citerefentry"><span class="refentrytitle">getrlimit</span>(2)</span>.
		    </p></dd></dl></div></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/statm</code></span></dt><dd><p>
	        Provides information about memory usage, measured in pages.
	        The columns are:

		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">(1) size</span></dt><dd><p>total program size
		      (same as VmSize in <code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/status</code>)</p></dd><dt><span class="term">(2) resident</span></dt><dd><p>resident set size
		      (same as VmRSS in <code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/status</code>)</p></dd><dt><span class="term">(3) shared</span></dt><dd><p>number of resident shared pages
		      (i.e., backed by a file) (same as RssFile+RssShmem in
		      <code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/status</code>)</p></dd><dt><span class="term">(4) text</span></dt><dd><p>text (code)</p></dd><dt><span class="term">(5) lib</span></dt><dd><p>library</p></dd><dt><span class="term">(6) data</span></dt><dd><p>data + stack</p></dd><dt><span class="term">(7) dt</span></dt><dd><p>dirty pages (always 0)</p></dd></dl></div><p>

	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/status</code></span></dt><dd><p>
		Provides much of the information in
		<code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/stat</code> and
		<code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/statm</code>
		in a format that's easier for humans to parse.
		Here's an example:

		</p><pre class="screen">
		  <code class="prompt">$</code> <strong class="userinput"><code>cat /proc/$$/status</code></strong>
		  <code class="computeroutput">
		  Name:   bash
		  Umask:  0022
		  State:  S (sleeping)
		  Tgid:   17248
		  Pid:    17248
		  PPid:   17200
		  Uid:    1000    1000    1000    1000
		  Gid:    100     100     100     100
		  VmSize:	  131168 kB
		  VmLck:	       0 kB
		  VmRSS:	   13484 kB
		  VmData:	   10332 kB
		  VmStk:	     136 kB
		  VmExe:	     992 kB
		  VmLib:	    2104 kB
		  SigPnd: 0000000000000000
		  SigBlk: 0000000000010000
		  SigIgn: 0000000000384004
		  </code>
		</pre><p>

	      </p><p>The fields are as follows:
		</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
		      <span class="emphasis"><em>Name</em></span>:
		      Command run by this process.
	            </p></li><li class="listitem"><p>
	              <span class="emphasis"><em>Umask</em></span>:
	              Process umask, expressed in octal with a leading zero; see
	              <span class="citerefentry"><span class="refentrytitle">umask</span>(2)</span>.
		    </p></li><li class="listitem"><p>
		      <span class="emphasis"><em>State</em></span>:
		      Current state of the process.
		      One of:

		      </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">R</span></dt><dd><p>runnable</p></dd><dt><span class="term">O</span></dt><dd><p>running</p></dd><dt><span class="term">S</span></dt><dd><p>sleeping</p></dd><dt><span class="term">D</span></dt><dd><p>disk sleep</p></dd><dt><span class="term">T</span></dt><dd><p>stopped or tracing stop</p></dd><dt><span class="term">Z</span></dt><dd><p>zombie</p></dd></dl></div><p>
		    </p></li><li class="listitem"><p>
		      <span class="emphasis"><em>Tgid</em></span>:
		      Thread group id (i.e., Process id).
		    </p></li><li class="listitem"><p>
		      <span class="emphasis"><em>Pid</em></span>:
		      Thread id (see
		      <span class="citerefentry"><span class="refentrytitle">gettid</span>(2)</span>).
		  </p></li><li class="listitem"><p>
	              <span class="emphasis"><em>PPid</em></span>:
	              PID of parent process.
	            </p></li><li class="listitem"><p>
		      <span class="emphasis"><em>Uid</em></span>,
		      <span class="emphasis"><em>Gid</em></span>:
		      Real, effective, saved set, and filesystem UIDs (GIDs).
		    </p></li><li class="listitem"><p>
		      <span class="emphasis"><em>VmSize</em></span>:
		      Virtual memory size.
		    </p></li><li class="listitem"><p>
		      <span class="emphasis"><em>VmLck</em></span>:
		      Locked memory size (see
		      <span class="citerefentry"><span class="refentrytitle">mlock</span>(2)</span>).
		    </p></li><li class="listitem"><p>
		      <span class="emphasis"><em>VmRSS</em></span>:
		      Resident set size.
		    </p></li><li class="listitem"><p>
		      <span class="emphasis"><em>VmData</em></span>,
		      <span class="emphasis"><em>VmStk</em></span>,
		      <span class="emphasis"><em>VmExe</em></span>:
		      Size of data, stack, and text segments.
		    </p></li><li class="listitem"><p>
		      <span class="emphasis"><em>VmLib</em></span>:
		      Shared library code size.
		    </p></li><li class="listitem"><p>
		      <span class="emphasis"><em>SigPnd</em></span>:
		      Number of signals pending for process as a whole (see
		      <span class="citerefentry"><span class="refentrytitle">pthreads</span>(7)</span> and
		      <span class="citerefentry"><span class="refentrytitle">signal</span>(7)</span>).
		      </p></li><li class="listitem"><p>
		      <span class="emphasis"><em>SigBlk</em></span>,
		      <span class="emphasis"><em>SigIgn</em></span>:
		      Masks indicating signals being blocked and ignored (see
		      <span class="citerefentry"><span class="refentrytitle">signal</span>(7)</span>).
		    </p></li></ul></div><p>
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/uid</code></span></dt><dd><p>
	        This read-only file contains the user id for the process.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/winexename</code></span></dt><dd><p>
	        This read-only file contains the Windows pathname of the
	        executed command.
	      </p></dd><dt><span class="term"><code class="filename">/proc/<span class="emphasis"><em>[pid]</em></span>/winpid</code></span></dt><dd><p>
	        This read-only file contains the Windows process id for the
	        process.
	      </p></dd><dt><span class="term"><code class="filename">/proc/cpuinfo</code></span></dt><dd><p>
	        This is a collection of CPU and system architecture dependent
	        items, for each supported architecture a different list.
		Two common entries are <span class="emphasis"><em>processor</em></span>
		which gives CPU number and
		<span class="emphasis"><em>bogomips</em></span>, a system constant
		that is calculated during kernel initialization.
		SMP machines have information for each CPU.
		The
		<span class="citerefentry"><span class="refentrytitle">lscpu</span>(1)</span>
		command gathers its information from this file.
	      </p></dd><dt><span class="term"><code class="filename">/proc/cygdrive</code></span></dt><dd><p>
		This file is a symbolic link that points to the user's
		Windows mapped drive mount point, similar to
		<span class="emphasis"><em>root</em></span>.
	      </p></dd><dt><span class="term"><code class="filename">/proc/devices</code></span></dt><dd><p>
		Text listing of major numbers and device groups.
	        This can be used by <span class="command"><strong>makedev</strong></span>
		scripts for consistency with the system.
	      </p></dd><dt><span class="term"><code class="filename">/proc/filesystems</code></span></dt><dd><p>
		A text listing of the filesystems which are supported by Cygwin.
		(See also
		<span class="citerefentry"><span class="refentrytitle">filesystems</span>(5)</span>.)
		If a filesystem is marked with "nodev", this means that it
		does not require a block device to be mounted (e.g., virtual
		filesystem, network filesystem).
	      </p></dd><dt><span class="term"><code class="filename">/proc/loadavg</code></span></dt><dd><p>
	        The first three fields in this file are load average figures
	        giving the number of jobs in the run queue (state R)
	        averaged over 1, 5, and 15 minutes.
		They are the same as the load average numbers given by
		<span class="citerefentry"><span class="refentrytitle">uptime</span>(1)</span> and other programs.
		The fourth field consists of two numbers separated by a slash (/).
	        The first of these is the number of currently runnable
	        scheduling entities (processes, threads).
	        The value after the slash is the number of scheduling entities
	        that currently exist on the system.
	      </p></dd><dt><span class="term"><code class="filename">/proc/meminfo</code></span></dt><dd><p>
	        This file reports statistics about memory usage on the system.
		It is used by
		<span class="citerefentry"><span class="refentrytitle">free</span>(1)</span>
		to report the amount of free and used memory (both physical
		and swap) on the system as well as the shared memory and
		buffers used by the system.
	        Each line of the file consists of a parameter name, followed by
	        a colon, the value of the parameter, and an option unit of
	        measurement (e.g., "kB").
		The list below describes the parameter names and the format
		specifier required to read the field value.
		Some fields are displayed only if the system was configured
		with various options; those dependencies are noted in the
		list.
	      </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>MemTotal</em></span> %lu</span></dt><dd><p>
	              Total usable RAM (i.e., physical RAM minus a few reserved
	              bits and the system binary code).
	            </p></dd><dt><span class="term"><span class="emphasis"><em>MemFree</em></span> %lu</span></dt><dd><p>
		      The sum of <span class="emphasis"><em>LowFree</em></span> +
		      <span class="emphasis"><em>HighFree</em></span>.
		    </p></dd><dt><span class="term"><span class="emphasis"><em>HighTotal</em></span> %lu</span></dt><dd><p>Total amount of highmem.</p></dd><dt><span class="term"><span class="emphasis"><em>HighFree</em></span> %lu</span></dt><dd><p>Amount of free highmem.</p></dd><dt><span class="term"><span class="emphasis"><em>LowTotal</em></span> %lu</span></dt><dd><p>
		      Total amount of lowmem.
		      Lowmem is memory which can be used for everything that
		      highmem can be used for, but it is also available for the
		      system's use for its own data structures.
		      Bad things happen when you're out of lowmem.
		    </p></dd><dt><span class="term"><span class="emphasis"><em>LowFree</em></span> %lu</span></dt><dd><p>Amount of free lowmem.</p></dd><dt><span class="term"><span class="emphasis"><em>SwapTotal</em></span> %lu</span></dt><dd><p>Total amount of swap space available.</p></dd><dt><span class="term"><span class="emphasis"><em>SwapFree</em></span> %lu</span></dt><dd><p>Amount of swap space that is currently unused.</p></dd></dl></div></dd><dt><span class="term"><code class="filename">/proc/misc</code></span></dt><dd><p>
	        Text listing of minor device numbers and names of devices with
	        major device number of the <code class="literal">misc</code> device group.
		This can be used by <span class="command"><strong>makedev</strong></span> scripts
		for consistency with the system.
	      </p></dd><dt><span class="term"><code class="filename">/proc/mounts</code></span></dt><dd><p>
	        With the introduction of per-process mount namespaces, this file
	        became a link to
		<code class="filename">/proc/self/mounts</code>,
		which lists the mount points of the process's own mount
		namespace.
		The format of this file is documented in
		<span class="citerefentry"><span class="refentrytitle">fstab</span>(5)</span>.
	      </p></dd><dt><span class="term"><code class="filename">/proc/net</code></span></dt><dd><p>
	        This directory contains various files and subdirectories
	        containing information about the networking layer.
	        The files contain ASCII structures and are, therefore, readable
	        with
		<span class="citerefentry"><span class="refentrytitle">cat</span>(1)</span>.
		However, the standard
		<span class="citerefentry"><span class="refentrytitle">netstat</span>(8)</span>
		suite provides much cleaner access to these files.
	      </p></dd><dt><span class="term"><code class="filename">/proc/net/if_inet6</code></span></dt><dd><p>
	        This file contains information about IP V6 interface adapters,
	        if used.
	        Each line represents an IP V6 interface adapter.
	      </p><pre class="screen">
<code class="computeroutput">
fe800000000000002c393d3da6108636 12 40 20 80 {C6B5FBE5-A3AC-4DB0-A308-8EE94E1406A4}
fe8000000000000039da016f76bd92bc 13 40 20 20 {E06B8972-0918-41FC-851B-090C446C7D1C}
fe8000000000000050ba9cedf1fe1628 0b 40 20 20 {680ED6FD-DFAC-4398-AA85-FB33E17E38EA}
fe8000000000000030c5c6a0b30f109d 11 40 20 20 {B9E39F53-1659-4065-BDA5-F41162250E03}
20021840ac2c12343427e3b9ec6fa585 08 40 00 80 {4083A7F8-99CF-4220-8715-6FDF268B002F}
20021840ac2c12342403e3b2c7a5a32f 08 80 00 20 {4083A7F8-99CF-4220-8715-6FDF268B002F}
20021840ac2c1234284e8d0ecb4160cb 08 80 00 20 {4083A7F8-99CF-4220-8715-6FDF268B002F}
20021840ac2c123468cb06ea72f1d678 08 80 00 80 {4083A7F8-99CF-4220-8715-6FDF268B002F}
20021840ac2c12346cb59aca97c36e3b 08 80 00 20 {4083A7F8-99CF-4220-8715-6FDF268B002F}
20021840ac2c123498af9881de1fb828 08 80 00 20 {4083A7F8-99CF-4220-8715-6FDF268B002F}
20021840ac2c1234cd62a3d73a498611 08 80 00 20 {4083A7F8-99CF-4220-8715-6FDF268B002F}
20021840ac2c1234e410c873be09df93 08 80 00 20 {4083A7F8-99CF-4220-8715-6FDF268B002F}
fe800000000000003427e3b9ec6fa585 08 40 20 80 {4083A7F8-99CF-4220-8715-6FDF268B002F}
00000000000000000000000000000001 01 80 10 80 {2B5345AC-7502-11EA-AC73-806E6F6E6963}
			   (1)  (2)(3)(4)(5)  (6)
</code>
</pre><p>The fields in each line are:

		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">(1)</span></dt><dd><p>The IP V6 address of the interface adapter.</p></dd><dt><span class="term">(2)</span></dt><dd><p>The IP V6 interface adapter index.</p></dd><dt><span class="term">(3)</span></dt><dd><p>
			The prefix length of the IP V6 interface address.
		      </p></dd><dt><span class="term">(4)</span></dt><dd><p>The scope of the IP V6 interface address.</p></dd><dt><span class="term">(5)</span></dt><dd><p>The state of the IP V6 interface address.</p></dd><dt><span class="term">(6)</span></dt><dd><p>
	                The DUID/GUID/UUID of the IP V6 interface adapter.
	              </p></dd></dl></div><p>
		</p><p>
		  The last number exists only for compatibility reasons and is
		  always 1.
		</p><p>

	      </p></dd><dt><span class="term"><code class="filename">/proc/partitions</code></span></dt><dd><p>
	        Contains the major and minor numbers of each partition as well
	        as the number of 1024-byte blocks and the partition name.
	      </p></dd><dt><span class="term"><code class="filename">/proc/registry</code></span></dt><dd><p>
	        Under Cygwin, this directory contains subdirectories for
	        registry paths, keys, and subkeys, and files named for registry
	        values which contain registry data, for the current process.
	      </p></dd><dt><span class="term"><code class="filename">/proc/registry32</code></span></dt><dd><p>
	        Under 64 bit Windows, this directory contains subdirectories for
	        registry paths, keys, and subkeys, and files named for registry
	        values which contain registry data, for 32 bit processes.
	      </p></dd><dt><span class="term"><code class="filename">/proc/registry64</code></span></dt><dd><p>
	        Under 64 bit Windows, this directory contains subdirectories for
	        registry paths, keys, and subkeys, and files named for registry
	        values which contain registry data, for 64 bit processes.
	      </p></dd><dt><span class="term"><code class="filename">/proc/self</code></span></dt><dd><p>
	      This directory refers to the process accessing the
	      <code class="filename">/proc</code> filesystem, and is identical to the
	      <code class="filename">/proc</code> directory named by the process id
	      of the same process.
	    </p></dd><dt><span class="term"><code class="filename">/proc/stat</code></span></dt><dd><p>
	        system statistics.
	        Varies with architecture.
	        Common entries include:
		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>cpu 10132153 0 3084719 46828483</em></span></span></dt><dd></dd><dt><span class="term"><span class="emphasis"><em>cpu0 1393280 0 572056 13343292</em></span></span></dt><dd><p>
	                The amount of time, measured in units of USER_HZ
	                (1/100ths of a second on most architectures, use
			<code class="literal">sysconf(_SC_CLK_TCK)</code>
			to obtain the right value), that the system ("cpu"
			line) or the specific CPU
			("cpu <span class="emphasis"><em>N</em></span>" line)
			spent in various states:

			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">(1) <span class="emphasis"><em>user</em></span></span></dt><dd><p>Time spent in user mode.</p></dd><dt><span class="term">(2) <span class="emphasis"><em>nice</em></span></span></dt><dd><p>
				Time spent in user mode with low priority
				(nice).
			      </p></dd><dt><span class="term">(3) <span class="emphasis"><em>system</em></span></span></dt><dd><p>Time spent in system mode.</p></dd><dt><span class="term">(4) <span class="emphasis"><em>idle</em></span></span></dt><dd><p>Time spent in the idle task.</p></dd></dl></div><p>
		      </p></dd><dt><span class="term"><span class="emphasis"><em>page 5741 1808</em></span></span></dt><dd><p>
	                The number of pages the system paged in and the number
	                that were paged out (from disk).
	              </p></dd><dt><span class="term"><span class="emphasis"><em>swap 1 0</em></span></span></dt><dd><p>
	                The number of swap pages that have been brought in and
	                out.
	              </p></dd><dt><span class="term"><span class="emphasis"><em>intr 1462898</em></span></span></dt><dd><p>The number of interrupts serviced.</p></dd><dt><span class="term"><span class="emphasis"><em>ctxt 115315</em></span></span></dt><dd><p>
	                The number of context switches that the system
	                underwent.
	              </p></dd><dt><span class="term"><span class="emphasis"><em>btime 769041601</em></span></span></dt><dd><p>
			boot time, in seconds since the Epoch,
			1970-01-01 00:00:00 +0000 (UTC).
	              </p></dd></dl></div><p>
	      </p></dd><dt><span class="term"><code class="filename">/proc/swaps</code></span></dt><dd><p>
	        Swap areas in use.
	        See also
	        <span class="citerefentry"><span class="refentrytitle">swapon</span>(8)</span>.
	      </p></dd><dt><span class="term"><code class="filename">/proc/sys</code></span></dt><dd><p>
	        This directory contains a number of files and subdirectories
	        linking to Windows objects, which can be read using these
	        entries.
	      </p><p>
	        String values may be terminated by either '\0'
	        or '\n'.
	      </p><p>
	        Integer and long values may be either in decimal or in
	        hexadecimal notation (e.g. 0x3FFF).
	        Multiple integer or long values may be separated by any of the
	        following whitespace characters:
	        ' ', '\t', or
	        '\n'.
	      </p></dd><dt><span class="term"><code class="filename">/proc/sysvipc</code></span></dt><dd><p>
	        Subdirectory containing the pseudo-files
		<code class="filename">msg</code>, <code class="filename">sem</code>and
		<code class="filename">shm</code>.
		These files list the System V Interprocess Communication (IPC)
		objects (respectively: message queues, semaphores, and shared
		memory) that currently exist on the system, providing similar
		information to that available via
		<span class="citerefentry"><span class="refentrytitle">ipcs</span>(1)</span>.
		These files are only available if the cygserver Cygwin service
		is running.
	        These files have headers and are formatted (one IPC object per
	        line) for easy understanding.
		<span class="citerefentry"><span class="refentrytitle">svipc</span>(7)</span>
	        provides further background on the information shown by these
	        files.
	      </p></dd><dt><span class="term"><code class="filename">/proc/uptime</code></span></dt><dd><p>
	        This file contains two numbers (values in seconds): the uptime
	        of the system (including time spent in suspend) and the amount
	        of time spent in the idle process.
	      </p></dd><dt><span class="term"><code class="filename">/proc/version</code></span></dt><dd><p>
	        This string identifies the Cygwin version that is currently
	        running.
	        For example:

</p><pre class="screen">
<code class="computeroutput">
CYGWIN_NT-10.0-18363 version 3.1.7-340.x86_64 (corinna@calimero) (gcc version 9.3.0 20200312 (Fedora Cygwin 9.3.0-1) (GCC) ) 2020-08-22 17:48 UTC
</code>
</pre><p>

	      </p></dd></dl></div></div></div><div class="refsect1"><a name="proc-notes"></a><h2>Notes</h2><p>
	Many files contain strings (e.g., the environment and command
	line) that are in the internal format, with subfields terminated
	by null bytes ('\0').
	When inspecting such files, you may find that the results are
	more readable if you use a command of the following form to
	display them:

	</p><pre class="screen">
	  <code class="prompt">$</code> <strong class="userinput"><code>cat -A <span class="emphasis"><em>file</em></span></code></strong>
	</pre><p>
      </p><p>
	This manual page is incomplete, possibly inaccurate, and is the kind
	of thing that needs to be updated very often.
      </p></div><div class="refsect1"><a name="proc-see_also"></a><h2>See Also</h2><p>
	<span class="citerefentry"><span class="refentrytitle">cat</span>(1)</span>,
	<span class="citerefentry"><span class="refentrytitle">find</span>(1)</span>,
	<span class="citerefentry"><span class="refentrytitle">free</span>(1)</span>,
	<span class="citerefentry"><span class="refentrytitle">ps</span>(1)</span>,
	<span class="citerefentry"><span class="refentrytitle">pstree</span>(1)</span>,
	<span class="citerefentry"><span class="refentrytitle">tr</span>(1)</span>,
	<span class="citerefentry"><span class="refentrytitle">uptime</span>(1)</span>,
	<span class="citerefentry"><span class="refentrytitle">chroot</span>(2)</span>,
	<span class="citerefentry"><span class="refentrytitle">mmap</span>(2)</span>,
	<span class="citerefentry"><span class="refentrytitle">readlink</span>(2)</span>,
	<span class="citerefentry"><span class="refentrytitle">syslog</span>(2)</span>,
	<span class="citerefentry"><span class="refentrytitle">hier</span>(7)</span>,
	<span class="citerefentry"><span class="refentrytitle">arp</span>(8)</span>,
	<span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span>,
	<span class="citerefentry"><span class="refentrytitle">netstat</span>(8)</span>,
	<span class="citerefentry"><span class="refentrytitle">route</span>(8)</span>.
      </p></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-proc-registry"></a>The /proc/registry filesystem</h3></div></div></div><p>
The <code class="filename">/proc/registry</code> filesystem provides read-only
access to the Windows registry.  It displays each <code class="literal">KEY</code>
as a directory and each <code class="literal">VALUE</code> as a file.  As anytime
you deal with the Windows registry, use caution since changes may result
in an unstable or broken system.  There are additionally subdirectories called
<code class="filename">/proc/registry32</code> and <code class="filename">/proc/registry64</code>.
They are identical to <code class="filename">/proc/registry</code> on 32 bit
host OSes.  On 64 bit host OSes, <code class="filename">/proc/registry32</code>
opens the 32 bit processes view on the registry, while
<code class="filename">/proc/registry64</code> opens the 64 bit processes view.
</p><p>
Reserved characters ('/', '\', ':', and '%') or reserved names
(<code class="filename">.</code> and <code class="filename">..</code>) are converted by
percent-encoding:
</p><pre class="screen">
<code class="prompt">bash$</code> <strong class="userinput"><code>regtool list -v '\HKEY_LOCAL_MACHINE\SYSTEM\MountedDevices'</code></strong>
...
\DosDevices\C: (REG_BINARY) = cf a8 97 e8 00 08 fe f7
...
<code class="prompt">bash$</code> <strong class="userinput"><code>cd /proc/registry/HKEY_LOCAL_MACHINE/SYSTEM</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>ls -l MountedDevices</code></strong>
...
-r--r----- 1 Admin SYSTEM  12 Dec 10 11:20 %5CDosDevices%5CC%3A
...
<code class="prompt">bash$</code> <strong class="userinput"><code>od -t x1 MountedDevices/%5CDosDevices%5CC%3A</code></strong>
0000000 cf a8 97 e8 00 08 fe f7 01 00 00 00
</pre><p>
The unnamed (default) value of a key can be accessed using the filename
<code class="filename">@</code>.
</p><p>
If a registry key contains a subkey and a value with the same name
<code class="filename">foo</code>, Cygwin displays the subkey as
<code class="filename">foo</code> and the value as <code class="filename">foo%val</code>.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="pathnames-at"></a>The @pathnames</h3></div></div></div><p>To circumvent the limitations on shell line length in the native
Windows command shells, Cygwin programs, when invoked by non-Cygwin processes, expand their arguments
starting with "@" in a special way.  If a file
<code class="filename">pathname</code> exists, the argument
<code class="filename">@pathname</code> expands recursively to the content of
<code class="filename">pathname</code>. Double quotes can be used inside the
file to delimit strings containing blank space. 
In the following example compare the behaviors
<span class="command"><strong>/bin/echo</strong></span> when run from bash and from the Windows command prompt.</p><div class="example"><a name="pathnames-at-ex"></a><p class="title"><b>Example 3.3.  Using @pathname</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">bash$</code> <strong class="userinput"><code>/bin/echo  'This   is   "a     long"  line' &gt; mylist</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>/bin/echo @mylist</code></strong>
@mylist
<code class="prompt">bash$</code> <strong class="userinput"><code>cmd</code></strong>
<code class="prompt">c:\&gt;</code> <strong class="userinput"><code>c:\cygwin\bin\echo @mylist</code></strong>
This is a     long line
</pre></div></div><br class="example-break"></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-cygwinenv"></a>The <code class="envar">CYGWIN</code> environment
variable</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="cygwinenv-implemented-options"></a>Implemented options</h3></div></div></div><p>The <code class="envar">CYGWIN</code> environment variable is used to configure
many global settings for the Cygwin runtime system. It contains the options
listed below, separated by blank characters. Many options can be turned off
by prefixing with <code class="literal">no</code>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)export</code> - If set, the final values of these
settings are re-exported to the environment as <code class="envar">CYGWIN</code> again.
Defaults to off.</p></li><li class="listitem" style="list-style-type: disc"><p>
<code class="envar">error_start:Win32filepath</code> - if set, runs
<code class="filename">Win32filepath</code> when cygwin encounters a fatal error, which
can be useful for debugging. Defaults to not set.
</p><p>
<code class="filename">Win32filepath</code> is typically set to <span class="command"><strong>gdb</strong></span> or
<span class="command"><strong>dumper</strong></span>.  If giving a path in
<code class="filename">Win32filepath</code>, note that it is a Windows-style path and not
a Cygwin path.
</p><p>
The filename of the executing program and it's Windows process id are appended
to the command as arguments.
</p><p>
  Note: This takes priority over writing core dump or .stackdump files, if
  enabled by <code class="function">setrlimit(RLIMIT_CORE)</code> (e.g. via
  <span class="command"><strong>ulimit -c</strong></span>).
</p><p>
  Note: This has no effect if a debugger is already attached when the fatal
  error occurs.
</p><p>
  Note: The command invoked must either (i) attach to the errored process with
  <code class="function">DebugActiveProcess()</code>, or (ii) forcibly terminate the
  errored process (with <code class="function">TerminateProcess()</code> or similar), as
  otherwise the errored process will wait forever for a debugger to attach.
</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)glob[:ignorecase]</code> - if set, command line arguments
containing UNIX-style file wildcard characters (brackets, braces, question mark,
asterisk, escaped with \) are expanded into lists of files that match 
those wildcards.
This is applicable only to programs run from non-Cygwin programs such as a CMD prompt.
That means that this setting does not affect globbing operations for shells such as
bash, sh, tcsh, zsh, etc.
Default is set.</p><p>This option also accepts an optional <code class="literal">[no]ignorecase</code> modifer.
If supplied, wildcard matching is case insensitive.  The default is <code class="literal">noignorecase</code></p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)pipe_byte</code> - if set, Cygwin opens pipes in byte mode rather than
message mode.  This is the default starting with Cygwin 3.4.0.
</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">proc_retry:n</code> - causes <code class="function">fork()</code> and
<code class="function">exec*()</code> to retry n times when a child process fails
due to certain windows-specific errors.  These errors usually occur when
processes are being started while a user is logging off.
</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)reset_com</code> - if set, serial ports are reset
to 9600-8-N-1 with no flow control when used. This is done at open
time and when handles are inherited.  Defaults to set.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)wincmdln</code> - if set, the windows complete command
line (truncated to ~32K) will be passed on any processes that it creates
in addition to the normal UNIX argv list.  Defaults to not set.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)winjitdebug</code> - if set, non-Cygwin executables
started from a Cygwin process will have their error mode reset to the
system default.  That means, if they don't call SetErrorMode()
explicitly, the OS will display error dialog boxes in the GUI if some
fatal error occurs.  Defaults to not set, so fatal errors in a
non-Cygwin child process will just result in an error code be propagated
back to the parent process.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">winsymlinks:{lnk,native,nativestrict,sys}</code></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem" style="list-style-type: square"><p>If set to just
<code class="literal">winsymlinks</code> or <code class="literal">winsymlinks:lnk</code>,
Cygwin creates symlinks as Windows shortcuts with a special header and
the R/O attribute set.</p></li><li class="listitem" style="list-style-type: square"><p>If set to <code class="literal">winsymlinks:native</code> or
<code class="literal">winsymlinks:nativestrict</code>, Cygwin creates symlinks as
native Windows symlinks on filesystems and OS versions supporting them.</p><p>The difference between <code class="literal">winsymlinks:native</code> and
<code class="literal">winsymlinks:nativestrict</code> is this:  If the filesystem
supports native symlinks and Cygwin fails to create a native symlink for
some reason, it will fall back to creating Cygwin default symlinks
with <code class="literal">winsymlinks:native</code>, while with
<code class="literal">winsymlinks:nativestrict</code> the <code class="literal">symlink(2)</code>
system call will immediately fail.</p></li><li class="listitem" style="list-style-type: square"><p>If set to <code class="literal">winsymlinks:sys</code>, Cygwin creates symlinks as
plain files with the <code class="literal">system</code> attribute, containing a magic
cookie followed by the path to which the link points.</p></li></ul></div><p>Note that this setting has no effect where Cygwin knows that the
filesystem only supports a creating symlinks in a specific way.</p><p>For more information on symbolic links, see
<a class="xref" href="#pathnames-symlinks" title="Symbolic links">the section called &#8220;Symbolic links&#8221;</a>.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">disable_pcon</code> - if set, pseudo console support in
pty will be disabled.  This is for programs which do not work properly
under pty with pseudo console enabled.  Defaults to not set.</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="cygwinenv-removed-options"></a>Obsolete options</h3></div></div></div><p>
Certain CYGWIN options available in past releases have been removed over
time for one reason or another.  These obsolete options are listed
below.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)binmode</code> - This option has been removed because
all file opens default to binary mode, unless the open mode has been specified
explicitly in the open(2) call.
</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)detect_bloda</code> - No case of a BLODA found by this
option has been reported in years.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)dosfilewarning</code> - This option had been disabled for
quite some time and nobody missed it.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">check_case</code> - This option has been removed in favor of
real case sensitivity and the per-mount option "posix=[0|1]".  For more
information, read the documentation in <a class="xref" href="#mount-table" title="The Cygwin Mount Table">the section called &#8220;The Cygwin Mount Table&#8221;</a> and
<a class="xref" href="#pathnames-casesensitive" title="Case sensitive filenames">the section called &#8220;Case sensitive filenames&#8221;</a>.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">codepage:[ansi|oem]</code> - This option controlled
which character set is used for file and console operations.  Since Cygwin
is now doing all character conversion by itself, depending on the
application call to the <code class="function">setlocale()</code> function, and in
turn by the setting of the environment variables <code class="envar">$LANG</code>,
<code class="envar">$LC_ALL</code>, or <code class="envar">$LC_CTYPE</code>, this setting
became superfluous.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)envcache</code> - Originally, <code class="envar">envcache</code>
controlled caching of environment variable conversion between Win32 and
POSIX.  The default setting works fine, the option was just useless.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">forkchunk:[intval]</code> - This option allowed to influence
the <code class="function">fork()</code> function in the way the memory of the
parent process gets copied to the child process.  This functionality was
only useful for Windows 95/98/Me.
</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)ntea</code> -  This option has been removed since it
only fakes security which is considered dangerous and useless.  It also
created an uncontrollably large file on FAT and was entirely useless
on FAT32.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)ntsec</code> - This option has been removed in favor of
the per-mount option "acl"/"noacl".  For more information, read the
documentation in <a class="xref" href="#mount-table" title="The Cygwin Mount Table">the section called &#8220;The Cygwin Mount Table&#8221;</a>.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)server</code> - Originally this option had to be
enabled on the client side to use features only available when running
<span class="command"><strong>cygserver</strong></span>.  This option has been removed because Cygwin now
always tries to contact cygserver if a function is called which requires
cygserver being available.  For more information, read the documentation
in <a class="xref" href="#using-cygserver" title="Cygserver">the section called &#8220;Cygserver&#8221;</a>.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)smbntsec</code> - This option has been removed in favor of
the per-mount option "acl"/"noacl".  For more information, read the
documentation in <a class="xref" href="#mount-table" title="The Cygwin Mount Table">the section called &#8220;The Cygwin Mount Table&#8221;</a>.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)strip_title</code> - Removed because setting the Window title
can be controlled by the application via Escape sequences.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)title</code> - Removed because setting the Window title
can be controlled by the application via Escape sequences.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)transparent_exe</code> - This option has been removed
because the behaviour it switched on is now the standard behaviour in
Cygwin.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)traverse</code> - This option has been removed because
traverse checking is not quite correctly implemented by Microsoft and
it's behaviour has been getting worse with each new OS version.  This
complicates its usage so the option has been removed for now.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)tty</code> - If set, Cygwin enabled extra support
(i.e., termios) for UNIX-like ttys in the Windows console. This option
has been removed because it can be easily replaced by using a terminal
like <span class="command"><strong>mintty</strong></span>, and it does not work well with some
Windows programs.</p></li><li class="listitem" style="list-style-type: disc"><p><code class="envar">(no)upcaseenv</code> - This option could be used to convert
all environment variables to uppercase.  This was the default behavior in
older releases of Cygwin.  Since keeping the case of environment variables
intact is POSIXly correct, Cygwin now does not change the case
of environment variables, except for a restricted set to maintain minimal
backward compatibility.  The current list of always uppercased variables is:
</p><pre class="screen">
  COMMONPROGRAMFILES
  COMSPEC
  PATH
  SYSTEMDRIVE
  SYSTEMROOT
  TEMP
  TMP
  WINDIR
</pre></li></ul></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ntsec"></a>POSIX accounts, permission, and security</h2></div></div></div><p>This section discusses how the Windows security model is
utilized in Cygwin to implement POSIX account information, POSIX-like
permissions, and how the Windows authentication model is used to allow
cygwin applications to switch users in a POSIX-like fashion.</p><p>The setting of POSIX-like file and directory permissions is
controlled by the <a class="link" href="#mount-table" title="The Cygwin Mount Table">mount</a> option
<code class="literal">(no)acl</code> which is set to <code class="literal">acl</code> by
default.</p><p>We start with a short overview.  Note that this overview must
be necessarily short.  If you want to learn more about the Windows security
model, see the <a class="ulink" href="http://msdn.microsoft.com/en-us/library/aa374860(VS.85).aspx" target="_top">Access Control</a> article in MSDN documentation.</p><p>POSIX concepts and in particular the POSIX security model are not
discussed here, but assumed to be understood by the reader.  If you
don't know the POSIX security model, search the web for beginner
documentation.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ntsec-common"></a>Brief overview of Windows security</h3></div></div></div><p>In the Windows security model, almost any "object" is securable.
"Objects" are files, processes, threads, semaphores, etc.</p><p>Every object has a data structure attached, called a "security
descriptor" (SD).  The SD contains all information necessary to control
who can access an object, and to determine what they are allowed to do
to or with it.  The SD of an object consists of five parts:</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>Flags which control several aspects of this SD. This is
not discussed here.</p></li><li class="listitem"><p>The SID of the object owner.</p></li><li class="listitem"><p>The SID of the object owner group.</p></li><li class="listitem"><p>A list of "Access Control Entries" (ACE), called the
"Discretionary Access Control List" (DACL).</p></li><li class="listitem"><p>Another list of ACEs, called the "Security Access Control List"
(SACL), which doesn't matter for our purpose.  We ignore it here.</p></li></ul></div><p>Every ACE contains a so-called "Security IDentifier" (SID) and
other stuff which is explained a bit later.  Let's talk about the SID first.
</p><p>A SID is a unique identifier for users, groups, computers and
Active Directory (AD) domains.  SIDs are basically comparable to POSIX
user ids (UIDs) and group ids (GIDs), but are more complicated because
they are unique across multiple machines or domains.  A SID is a
structure of multiple numerical values.  There's a convenient convention
to type SIDs, as a string of numerical fields separated by hyphen
characters.  Here's an example:</p><p>SID of a machine "foo":</p><pre class="screen">
  S-1-5-21-165875785-1005667432-441284377
</pre><p>SID of a user "johndoe" of the system "foo":</p><pre class="screen">
  S-1-5-21-165875785-1005667432-441284377-1023
</pre><p>The first field is always "S", which is just a notational convention
to show that this is a SID.  The second field is the version number of
the SID structure, So far there exists only one version of SIDs, so this
field is always 1.  The third and fourth fields represent the "authority"
which can be thought of as a type or category of SIDs.  There are a
couple of builtin accounts and accounts with very special meaning which
have certain well known values in these third and fourth fields.
However, computer and domain SIDs always start with "S-1-5-21".  The
next three fields, all 32 bit values, represent the unique 96 bit
identifier of the computer system.  This is a hopefully unique value all
over the world, but in practice it's sufficient if the computer SIDs are
unique within a single Windows network.</p><p>As you can see in the above example, SIDs of users (and groups)
are identical to the computer SID, except for an additional part, the
so-called "relative identifier" (RID).  So the SID of a user is always 
uniquely attached to the system on which the account has been generated.</p><p>It's a bit different in domains.  The domain has its own SID, and
that SID is identical to the SID of the first domain controller, on
which the domain is created.  Domain user SIDs look exactly like the
computer user SIDs, the leading part is just the domain SID and the RID
is created when the user is created.</p><p>Ok, consider you created a new domain "bar" on some new domain
controller and you would like to create a domain account "johndoe":</p><p>SID of a domain "bar.local":</p><pre class="screen">
  S-1-5-21-186985262-1144665072-740312968
</pre><p>SID of a user "johndoe" in the domain "bar.local":</p><pre class="screen">
  S-1-5-21-186985262-1144665072-740312968-1207
</pre><p>So you now have two accounts called johndoe, one account
created on the machine "foo", one created in the domain "bar.local".
Both have different SIDs and not even the RID is the same.  How do
the systems know it's the same account?  After all, the name is
the same, right?  The answer is, these accounts are <span class="bold"><strong>not</strong></span> identical.  All machines on the network will
treat these SIDs as identifying two separate accounts.  One is
"FOO\johndoe", the other one is "BAR\johndoe" or "johndoe@bar.local".
Different SID, different account.  Full stop.  </p><p>Starting with Cygwin 1.7.34, Cygwin uses an automatic, internal
translation from Windows SID to POSIX UID/GID.  This mechanism, which is
the preferred method for the SID&lt;=&gt;UID/GID mapping, is described in
detail in <a class="xref" href="#ntsec-mapping" title="Mapping Windows accounts to POSIX accounts">the section called &#8220;Mapping Windows accounts to POSIX accounts&#8221;</a>.</p><p>Prior to Cygwin 1.7.34, the last part of the SID, the so called
"Relative IDentifier" (RID), was by default used as UID and/or GID
when you created the <code class="filename">/etc/passwd</code> and
<code class="filename">/etc/group</code> files using the
<span class="command"><strong><a class="link" href="#mkpasswd" title="mkpasswd">mkpasswd</a></strong></span> and
<span class="command"><strong><a class="link" href="#mkgroup" title="mkgroup">mkgroup</a></strong></span> tools.
These tools as well as reading accounts from <code class="filename">/etc/passwd</code>
and <code class="filename">/etc/group</code> files is still present in recent
versions of Cygwin, but you should switch to the aforementioned
automatic translation, unless you have very specific needs. Again,
see <a class="xref" href="#ntsec-mapping" title="Mapping Windows accounts to POSIX accounts">the section called &#8220;Mapping Windows accounts to POSIX accounts&#8221;</a> for the details.</p><p>Do you still remember the SIDs with special meaning?  In offical
notation they are called "well-known SIDs".  For example, POSIX has no GID
for the group of "all users" or "world" or "others".  The last three rwx
bits in a unix-style permission value just represent the permissions for
"everyone who is not the owner or is member of the owning group".
Windows has a SID for these poor souls, the "Everyone" SID.  Other
well-known SIDs represent circumstances under which a process is
running, rather than actual users or groups.  Here are a few examples
for well-known SIDs:</p><pre class="screen">
Everyone                        S-1-1-0    Simply everyone...
Batch                           S-1-5-3    Processes started via the task
					   scheduler are member of this group.
Interactive			S-1-5-4    Only processes of users which are
					   logged in via an interactive
					   session are members here.
Authenticated Users             S-1-5-11   Users which have gone through
                                           the authentication process and
					   survived.  Anonymously accessing
					   users are not incuded here.
SYSTEM                          S-1-5-18   A special account which has all
					   kinds of dangerous rights, sort of
					   an uber-root account.
</pre><p>For a full list please refer to the MSDN document <a class="ulink" href="http://msdn.microsoft.com/en-us/library/aa379649.aspx" target="_top">Well-known
SIDs</a>.  The Cygwin package called "csih" provides a tool,
/usr/lib/csih/getAccountName.exe, which can be used to print the
(possibly localized) name for the various well-known SIDS.</p><p>Naturally, well-known SIDs are the same on each machine, so they are
not unique to a machine or domain.  They have the same meaning across
the Windows network.</p><p>Additionally, there are a couple of well-known builtin groups,
which have the same SID on every machine and which have certain user
rights by default:</p><pre class="screen">
administrators                  S-1-5-32-544
users                           S-1-5-32-545
guests                          S-1-5-32-546
...
</pre><p>For instance, every account is usually member in the "Users"
group.  All administrator accounts are member of the "Administrators"
group.  That's all about it as far as single machines are involved.  In
a domain environment it's a bit more tricky.  Since these SIDs are not
unique to a machine, every domain user and every domain group can be a
member of these well known groups.  Consider the domain group "Domain
Admins".  This group is by default in the "Administrators" group.  Let's
assume the above computer called "foo" is a member machine of the domain
"bar.local".  If you stick the user "BAR\johndoe" into the group "Domain
Admins", this guy will automatically be a member of the administrators
group on "foo" when logging on to "foo".  Neat, isn't it?</p><p>Back to ACE and ACL.  POSIX is able to create three different
permissions, the permissions for the owner, for the group and for the
world.  In contrast the Windows ACL has a potentially infinite number of
members... as long as they fit into 64K.  Every member is an ACE.
ACE consist of three parts:</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>The type of the ACE (allow ACE or deny ACE).</p></li><li class="listitem"><p>Permission bits, 32 of them.</p></li><li class="listitem"><p>The SID for which the permissions are allowed or denied.</p></li></ul></div><p>The two (for us) important types of ACEs are the "access allowed
ACE" and the "access denied ACE".  As the names imply, the allow ACE
tells the system to allow the given permissions to the SID, the deny ACE
results in denying the specific permission bits.</p><p>The possible permissions on objects are more detailed than in
POSIX.  For example, the permission to delete an object is different
from the permission to change object data, and even changing object data
can be separated into different permission bits for different kind of
data.  But there's a problem with the definition of a "correct" ACL
which disallows mapping of certain POSIX permissions cleanly.  See
<a class="xref" href="#ntsec-files" title="File permissions">the section called &#8220;File permissions&#8221;</a>.</p><p>POSIX is able to create only three different permissions?  Not quite.
Newer operating systems and file systems on POSIX systems also provide
access control lists.  Two different APIs exist for accessing these
ACLs, the Solaris API and the POSIX API.  Cygwin implements the original
Solaris API to access Windows ACLs in a Unixy way.  Online man pages for the
Solaris ACL API can be found on
<a class="ulink" href="http://docs.oracle.com" target="_top">http://docs.oracle.com</a>.
For an overview see <a class="ulink" href="http://docs.oracle.com/cd/E23824_01/html/821-1474/acl-5.html#scrolltoc" target="_top">acl(5)</a>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ntsec-mapping"></a>Mapping Windows accounts to POSIX accounts</h3></div></div></div><p>
For as long as Cygwin has existed, it has stored user and group information in
<code class="filename">/etc/passwd</code> and <code class="filename">/etc/group</code> files. 
Under the assumption that these files would never be too large, the first
process in a process tree, as well as every execing process within the tree
would parse them into structures in memory.  Thus every Cygwin process would
contain an expanded copy of the full information from
<code class="filename">/etc/passwd</code> and <code class="filename">/etc/group</code>.
</p><p>
This approach has a few downsides.  One of them is that the idea that these
files will always be small, is flawed.  Another one is that reading the entire
file is most of the time entirely useless, since most processes only
need information on their own user and the primary group.  Last but not
least, the passwd and group files have to be maintained separately from
the already existing Windows user databases, the local SAM and Active
Directory.
</p><p>
On the other hand, we have to have this mapping between Windows SIDs and
POSIX uid/gid values, so we need a mechanism to convert SIDs to uid/gid
values and vice versa.
</p><p>
Microsoft "Services for UNIX" (SFU) (deprecated since Windows 8/Server 2012)
never used passwd/group files.  Rather, SFU used a fixed, computational mapping
between SIDs and POSIX uid/gid which even has Active Directory support.  It
allows us to generate uid/gid values from SIDs and vice versa.  The mechanism is
documented, albeit in a confusing way and spread over multiple MSDN articles.
</p><p>
Starting with Cygwin 1.7.34, Cygwin utilizes an approach inspired by the
mapping method as implemented by SFU, with a few differences for backward
compatibility and to handle some border cases differently.
</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ntsec-mapping-how"></a>Mapping Windows SIDs to POSIX uid/gid values</h4></div></div></div><p>
The following description assumes you're comfortable with the concept of
Windows SIDs and RIDs.  For a brief introduction, see
<a class="xref" href="#ntsec-common" title="Brief overview of Windows security">the section called &#8220;Brief overview of Windows security&#8221;</a>.
</p><p>
Cygwin's mapping between SIDs and uid/gid values works in two ways.
</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>Read <code class="filename">/etc/passwd<code class="filename"> and
</code>/etc/group</code> files if they exist, just as in the olden
days, mainly for backward compatibility.</p></li><li class="listitem"><p>If no files are present, or if an entry is missing in the files,
ask Windows.</p></li></ul></div><p>
At least, that's the default behaviour now.  It will be configurable
using a file <code class="filename">/etc/nsswitch.conf</code>, which is discussed in
<a class="xref" href="#ntsec-mapping-nsswitch" title="The /etc/nsswitch.conf file">the section called &#8220;The <code class="filename">/etc/nsswitch.conf</code> file&#8221;</a>.  Let's explore the default
for now.
</p><p>
If the passwd or group files are present, they will be scanned on demand as
soon as a mapping from SIDs to uid/gid or account names is required.  The new
mechanism will never read the entire file into memory, but only scan for
the requested entry and cache this one in memory.
</p><p>
If no entry is found, or no passwd or group file was present, Cygwin
will ask the OS.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
If the first process in a Cygwin process tree determines that no
<code class="filename">/etc/passwd</code> or <code class="filename">/etc/group</code> file is
present, no other process in the entire process tree will try to read the files
later on.  This is done for self-preservation.  It's rather bad if the uid
or gid of a user changes during the lifetime of a process tree.
</p><p>
For the same reason, if you delete the <code class="filename">/etc/passwd</code>
or <code class="filename">/etc/group</code> file, this will be ignored.  The passwd
and group records read from the files will persist in memory until either a
new <code class="filename">/etc/passwd</code> or <code class="filename">/etc/group</code>
is created, or you exit all processes in the current process tree.
</p><p>
See the note in <a class="xref" href="#ntsec-mapping-nsswitch" title="The /etc/nsswitch.conf file">the section called &#8220;The <code class="filename">/etc/nsswitch.conf</code> file&#8221;</a> for some
comprehensive examples.
</p></div><p>
So if we've drawn a blank reading the files, we're going to ask the OS.
First thing, we ask the local machine for the SID or the username.  The
OS functions
<a class="ulink" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa379166%28v=vs.85%29.aspx" target="_top">LookupAccountSid</a>
and
<a class="ulink" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa379159%28v=vs.85%29.aspx" target="_top">LookupAccountName</a>
are pretty intelligent.  They have all the stuff built in to ask for any
account of the local machine, the Active Directory domain of the machine,
the Global Catalog of the forest of the domain, as well as any trusted
domain of our forest for the information.  One OS call and we're
practically done...
</p><p>
Except, the calls only return the mapping between SID, account name and the
account's domain.  We don't have a mapping to POSIX uid/gid and we're missing
information on the user's home dir and login shell.
</p><p>
Let's discuss the SID&lt;=&gt;uid/gid mapping first.  Here's how it works.
</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>
<a class="ulink" href="http://msdn.microsoft.com/en-us/library/aa379649.aspx" target="_top">Well-known
SIDs</a>
in the NT_AUTHORITY domain of the S-1-5-RID type, or aliases of the
S-1-5-32-RID type are mapped to the uid/gid value RID.  Examples:
</p><pre class="screen">
  "SYSTEM" S-1-5-18                    &lt;=&gt; uid/gid: 18
  "Users"  S-1-5-32-545                &lt;=&gt; uid/gid: 545
</pre></li><li class="listitem"><p>
Other well-known SIDs in the NT_AUTHORITY domain (S-1-5-X-RID):
</p><pre class="screen">
  S-1-5-X-RID                          &lt;=&gt; uid/gid: 0x1000 * X + RID
</pre><p>Example:</p><pre class="screen">
  "NTLM Authentication" S-1-5-64-10    &lt;=&gt; uid/gid: 0x4000A == 262154
</pre></li><li class="listitem"><p>
Other well-known SIDs:
</p><pre class="screen">
  S-1-X-Y                              &lt;=&gt; uid/gid: 0x10000 + 0x100 * X + Y
</pre><p>Example:</p><pre class="screen">
  "LOCAL" S-1-2-0                      &lt;=&gt; uid/gid: 0x10200 == 66048
  "Creator Group" S-1-3-1              &lt;=&gt; uid/gid: 0x10301 == 66305
</pre></li><li class="listitem"><p>
Logon SIDs: The LogonSid of the current user's session is converted to the
fixed uid 0xfff == 4095 and named "CurrentSession".  Any other LogonSid is
converted to the fixed uid 0xffe == 4094 and named "OtherSession".
</p></li><li class="listitem"><p>
Mandatory Labels:
</p><pre class="screen">
  S-1-16-RID                           &lt;=&gt; uid/gid: 0x60000 + RID
</pre><p>Example:</p><pre class="screen">
  "Medium Mandatory Level" S-1-16-8192 &lt;=&gt; uid/gid: 0x62000 == 401408
</pre></li><li class="listitem"><p>
Accounts from the local machine's user DB (SAM):
</p><pre class="screen">
  S-1-5-21-X-Y-Z-RID                   &lt;=&gt; uid/gid: 0x30000 + RID
</pre><p>Example:</p><pre class="screen">
  "Administrator" S-1-5-21-X-Y-Z-500   &lt;=&gt; uid/gid: 0x301f4 == 197108
</pre></li><li class="listitem"><p>
Accounts from the machine's primary domain:
</p><pre class="screen">
  S-1-5-21-X-Y-Z-RID                   &lt;=&gt; uid/gid: 0x100000 + RID
</pre><p>Example:</p><pre class="screen">
  "Domain Users" S-1-5-21-X-Y-Z-513    &lt;=&gt; uid/gid: 0x100201 == 1049089
</pre></li><li class="listitem"><p>
Accounts from a trusted domain of the machine's primary domain:
</p><pre class="screen">
  S-1-5-21-X-Y-Z-RID                   &lt;=&gt; uid/gid: trustPosixOffset(domain) + RID
</pre><p>
<code class="literal">trustPosixOffset</code>?  This needs a bit of explanation.  This
value exists in Windows domains already since before Active Directory days.
What happens is this.  If you create a domain trust between two domains, a
trustedDomain entry will be added to both databases.  It describes how
<span class="emphasis"><em>this</em></span> domain trusts the <span class="emphasis"><em>other</em></span> domain.
One attribute of a trust is a 32 bit value called
<code class="literal">trustPosixOffset</code>  For each new trust,
<code class="literal">trustPosixOffset</code> will get some automatic value.  In recent
AD domain implementations, the first trusted domain will get
<code class="literal">trustPosixOffset</code> set to 0x80000000.  Following domains will
get lower values.  Unfortunately the domain admins are allowed to set the
<code class="literal">trustPosixOffset</code> value for each trusted domain to some
arbitrary 32 bit value, no matter what the other
<code class="literal">trustPosixOffset</code> are set to, thus allowing any kind of
collisions between the <code class="literal">trustPosixOffset</code> values of domains.
That's not exactly helpful, but as the user of this value, we have to
<span class="emphasis"><em>trust</em></span> the domain admins to set
<code class="literal">trustPosixOffset</code> to sensible values, or to keep it at the
system chosen defaults.
</p><p>
So, for the first (or only) trusted domain of your domain, the automatic offset
is 0x80000000.  An example for a user of that trusted domain is
</p><pre class="screen">
  S-1-5-21-X-Y-Z-1234                  &lt;=&gt; uid/gid 0x800004d2 == 2147484882
</pre><p>
There's one problem with this approach.  Assuming you're running in the context
of a local SAM user on a domain member machine.  Local users don't have the
right to fetch this kind of domain information from the DC, they'll get
permission denied.  In this case Cygwin will fake a sensible
<code class="literal">trustPosixOffset</code> value.
</p><p>
Another problem is if the AD administrators chose an unreasonably small
<code class="literal">trustPosixOffset</code> value.  Anything below the hexadecimal
value 0x100000 (the POSIX offset of the primary domain) is bound to produce
collisions with system accounts as well as local accounts.  The right thing
to do in this case is to notify your administrator of the problem and to ask
for moving the offset to a more reasonable value.  However, to reduce the
probability for collisions, Cygwin overrides this offset with a sensible
fixed replacement offset.
</p></li><li class="listitem"><p>
Local accounts from another machine in the network:
</p><p>
There's no SID&lt;=&gt;uid/gid mapping implemented for this case.  The problem
is, there's no way to generate a bijective mapping.  There's no central place
which keeps an analogue of the <code class="literal">trustPosixOffset</code>, and there's
the additional problem that the
<a class="ulink" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa379166%28v=vs.85%29.aspx" target="_top">LookupAccountSid</a>
and
<a class="ulink" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa379159%28v=vs.85%29.aspx" target="_top">LookupAccountName</a>
functions cannnot resolve the SIDs, unless they know the name of the machine
this SID comes from.  And even then it will probably suffer a
<code class="literal">Permission denied</code> error when trying to ask the machine
for its local account.
</p></li></ul></div><p>
Now we have a semi-bijective mapping between SIDs and POSIX uid/gid values,
but given that we have potentially users and groups in different domains having
the same name, how do we uniquely distinguish between them by name?  Well, we
can do that by making their names unique in a per-machine way.  Dependent on
the domain membership of the account, and dependent of the machine being a
domain member or not, the user and group names will be generated using a domain
prefix and a separator character between domain and account name.
The  separator character is the plus sign, <code class="literal">+</code>.
</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>
Well-known and builtin accounts will be named as in Windows:
</p><pre class="screen">
  "SYSTEM", "LOCAL", "Medium Mandatory Level", ...
</pre></li><li class="listitem"><p>
If the machine is not a domain member machine, only local accounts can be resolved
into names, so for ease of use, just the account names are used as Cygwin
user/group names:
</p><pre class="screen">
  "corinna", "bigfoot", "None", ...
</pre></li><li class="listitem"><p>
If the machine is a domain member machine, all accounts from the primary domain
of the machine are mapped to Cygwin names without domain prefix:
</p><pre class="screen">
  "corinna", "bigfoot", "Domain Users", ...
</pre><p>
while accounts from other domains are prepended by their domain:
</p><pre class="screen">
  "DOMAIN1+corinna", "DOMAIN2+bigfoot", "DOMAIN3+Domain Users", ...
</pre></li><li class="listitem"><p>
Local machine accounts of a domain member machine get a Cygwin user name the
same way as accounts from another domain:  The local machine name gets
prepended:
</p><pre class="screen">
  "MYMACHINE+corinna", "MYMACHINE+bigfoot", "MYMACHINE+None", ...
</pre></li><li class="listitem"><p>
If LookupAccountSid fails, Cygwin checks the accounts against the known trusted
domains.  If the account is from one of the trusted domains, an artificial
account name is created.  It consists of the domain name, and a special name
created from the account RID:
</p><pre class="screen">
  "MY_DOM+User(1234)", "MY_DOM+Group(5678)"
</pre><p>
Otherwise we know nothing about this SID, so it will be mapped to the
fake accounts <code class="literal">Unknown+User</code>/<code class="literal">Unknown+Group</code>
with uid/gid -1.
</p></li></ul></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ntsec-mapping-caching"></a>Caching account information</h4></div></div></div><p>
The information fetched from the Windows account database or the
<code class="filename">/etc/passwd</code> and <code class="filename">/etc/group</code> files is
cached by the process.  The cached information is inherited by Cygwin child
processes.  A Cygwin process invoked from a Windows command, such as CMD.exe,
will start a new Cygwin process tree and the caching starts from scratch
(unless <span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span> is
running, but read on).
</p><p>
While usually working fine, this has some drawbacks.  Consider a shell calling
<span class="command"><strong>id</strong></span>.  <span class="command"><strong>id</strong></span> fetches all group information
from the current token and caches them.  Unfortunately <span class="command"><strong>id</strong></span>
doesn't start any child processes, so the information is lost as soon as
<span class="command"><strong>id</strong></span> exits.
</p><p>
But there's another caching mechanism available.  If
<span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span> is running
it will provide passwd and group entry caching for all processes in every Cygwin
process tree started after
<span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span>.  So, if
you start a Cygwin Terminal and
<span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span> is running
at the time, <span class="command"><strong>mintty</strong></span>, the shell, and all child processes will
use <span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span> caching.
If you start a Cygwin Terminal and
<span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span> is not
running at the time, none of the processes started inside this terminal window
will use <span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span>
caching.
</p><p>
The advantage of
<span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span> caching is
that it's system-wide and, as long as
<span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span> is running,
unforgetful.  Every Cygwin process on the system will have the
<span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span> cache at
its service.  Additionally, all information requested from
<span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span> once, will
be cached inside the process itself and, again, propagated to child processes.
</p><p>
If you automatically start Cygwin processes as Windows services at system
startup, you may wish to consider starting
<span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span> first in
order to take advantage of this system-wide caching.  To assure that
<span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span> has started
prior to starting <span class="command"><strong>cygsshd</strong></span> or other Cygwin services, you may
wish to create service startup dependencies.
<span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">Cygserver</a></strong></span> should
probably wait for Windows TCPIP and AFD services before it starts, and then
other Cygwin process should start after
<span class="command"><strong><a class="link" href="#using-cygserver" title="Cygserver">cygserver</a></strong></span>.  Example
Windows commands to accomplish this (after the services already exist) are
shown below.  You will need an administrative prompt to run the
<span class="command"><strong>sc config</strong></span> commands.
</p><pre class="screen">
  # Delay Cygserver until TCPIP and AFD have started
  # Note the (odd) required space character after "depend="

  sc config cygserver depend= tcpip/afd

  # Delay sshd until after Cygserver has started
  # Again note the (odd) required space character after "depend="

  sc config cygsshd depend= cygserver

  # View the Cygserver service details

  sc qc cygserver
</pre><p>
Note that this <span class="command"><strong>sc config</strong></span> command
<span class="emphasis"><em>replaces</em></span> any existing dependencies.  The above changes
will not impact the running instance, only future instances.
</p><pre class="screen">
  # To remove all dependencies from the cygserver service

  sc config cygserver depend= /
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ntsec-mapping-passwdinfo"></a>Cygwin user names, home dirs, login shells</h4></div></div></div><p>
Obviously, if you don't maintain <code class="filename">passwd</code> and
<code class="filename">group</code> files, you need to have a way to maintain the other
fields of a passwd entry as well.  A couple of things come to mind:
</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>
You want to use a Cygwin username different from your Windows username.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
This is only supported via <code class="filename">/etc/passwd</code>.  A Cygwin
username maintained in the Windows user databases would require very costly
(read: slow) search operations.
</p></div></li><li class="listitem"><p>
You want to change the primary group of a user.  For AD accounts this is
not supported.  The primary group of a user is always the Windows
primary group set in Active Directory and can't be changed.  For SAM
accounts, you can add the primary group to the SAM
<code class="literal">description</code> field of the user.  See <a class="xref" href="#ntsec-mapping-nsswitch-desc" title="The desc schema">the section called &#8220;The <code class="literal">desc</code> schema&#8221;</a> for more info.
</p></li><li class="listitem"><p>
You want a home dir different from the default
<code class="filename">/home/$USERNAME</code>.
</p></li><li class="listitem"><p>
You want to specify a different login shell than <code class="filename">/bin/bash</code>.
</p></li><li class="listitem"><p>
You want to add specific content to the pw_gecos field.
</p></li></ul></div><p>
For simple needs you can create <code class="filename">/etc/passwd</code> and/or
<code class="filename">/etc/group</code> files with entries for your account
and tweak that.
</p><p>
For bigger installations, maintaining per-client files is rather troublesome.
Also, no two environments are the same, so the needs are pretty different.
Therefore Cygwin supports configuring how to fetch home directory,
login shell, and gecos information in /etc/nsswitch.conf.  See the next
section for detailed information how to configure Cygwin's account handling.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ntsec-mapping-nsswitch"></a>The <code class="filename">/etc/nsswitch.conf</code> file</h4></div></div></div><p>
On Linux and some other UNIXy OSes, we have a file called
<a class="ulink" href="http://linux.die.net/man/5/nsswitch.conf" target="_top">/etc/nsswitch.conf</a>.
Among other things, it determines how passwd and group entries are generated.
That's what Cygwin now provides as well.
</p><p>
The <code class="filename">/etc/nsswitch.conf</code> file is optional.  If you don't
have one, Cygwin uses sensible defaults.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
The <code class="filename">/etc/nsswitch.conf</code> file is read exactly once by
the first process of a Cygwin process tree.  If there was no
<code class="filename">/etc/nsswitch.conf</code> file when this first process started,
then no other process in the running Cygwin process tree will try to read the
file.
</p><p>
If you create or change <code class="filename">/etc/nsswitch.conf</code>, you have to
restart all Cygwin processes that need to see the change.  If the process
you want to see the change is a child of another process, you need to restart
all of that process's parents, too.
</p><p>
For example, if you run <span class="command"><strong>vim</strong></span> inside the default Cygwin
Terminal, <span class="command"><strong>vim</strong></span> is a child of your shell, which is a child
of <span class="command"><strong>mintty</strong></span>.  If you edit
<code class="filename">/etc/nsswitch.conf</code> in that <span class="command"><strong>vim</strong></span>
instance, your shell won't immediately see the change, nor will
<span class="command"><strong>vim</strong></span> if you restart it from that same shell instance.
This is because both are getting their nsswitch information from their
ancestor, <span class="command"><strong>mintty</strong></span>.  You have to start a fresh terminal
window for the change to take effect.
</p><p>
By contrast, if you leave that Cygwin Terminal window open after making the
change to <code class="filename">/etc/nsswitch.conf</code>, then restart a Cygwin
service like <span class="command"><strong>cron</strong></span>, <span class="command"><strong>cron</strong></span> will see the
change, because it is not a child of <span class="command"><strong>mintty</strong></span> or any other
Cygwin process. (Technically, it is a child of <span class="command"><strong>cygrunsrv</strong></span>,
but that instance also restarts when you restart the service.)
</p><p>
The reason we point all this out is that the requirements for restarting
things are not quite as stringent as when you replace
<code class="filename">cygwin1.dll</code>. If you have three process trees, you have
three independent copies of the nsswitch information.  If you start a fresh
process tree, it will see the changes.  As long as any process in an existing
process tree remains running, all processes in that tree will continue to use
the old information.
</p></div><p>
So, what settings can we perform with <code class="filename">/etc/nsswitch.conf</code>?
Let's start with an example <code class="filename">/etc/nsswitch.conf</code> file
set up to all default values:
</p><pre class="screen">
  # /etc/nsswitch.conf
  passwd: files db
  group:  files db
  db_enum:  cache builtin
  db_home:  /home/%U
  db_shell: /bin/bash
  db_gecos: &lt;empty&gt;
</pre><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="ntsec-mapping-nsswitch-syntax"></a>The <code class="filename">/etc/nsswitch.conf</code> syntax</h5></div></div></div><p>
The first line, starting with a hash <code class="literal">#</code> is a comment.
The hash character starts a comment, just as in shell scripts.  Everything
up to the end of the line is ignored.  So this:
</p><pre class="screen">
  foo:  bar # baz
</pre><p>
means, set "foo" to value "bar", ignore everything after the hash.
</p><p>
The other lines define the available settings.  The first word up to a
colon is a keyword.  Note that the colon <span class="emphasis"><em>must</em></span> follow
immediately after the keyword.  This is a valid line:
</p><pre class="screen">
  foo: bar
</pre><p>
This is not valid:
</p><pre class="screen">
  foo  :  bar
</pre><p>
Apart from this restriction, the remainder of the line can have as
many spaces and TABs as you like.
</p><p>
When the same keyword occurs multiple times, the last one wins, as if the
previous ones were ignored.
</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="ntsec-mapping-nsswitch-pwdgrp"></a>The <code class="literal">passwd:</code> and <code class="literal">group:</code> settings</h5></div></div></div><p>
The two lines starting with the keywords <code class="literal">passwd:</code> and
<code class="literal">group:</code> define where Cygwin gets its passwd and group
information from.  <code class="literal">files</code> means, fetch the information
from the corresponding file in the /etc directory.  <code class="literal">db</code>
means, fetch the information from the Windows account databases, the SAM
for local accounts, Active Directory for domain account.  Examples:
</p><pre class="screen">
  passwd: files
</pre><p>
Read passwd entries only from /etc/passwd.
</p><pre class="screen">
  group: db
</pre><p>
Read group entries only from SAM/AD.
</p><pre class="screen">
  group: files # db
</pre><p>
Read group entries only from <code class="filename">/etc/group</code>
(<code class="literal">db</code> is only a comment).
</p><pre class="screen">
  passwd: files db
</pre><p>
Read passwd entries from <code class="filename">/etc/passwd</code>.  If a user account
isn't found, try to find it in SAM or AD.  This is the default for both,
passwd and group information.
</p><pre class="screen">
  group: db files
</pre><p>
This is a valid entry, but the order will be ignored by Cygwin.  If both
settings, <code class="literal">files</code> and <code class="literal">db</code> are specified,
Cygwin will always try the files first, then the db.
</p><p>
<code class="literal">passwd:</code> and <code class="literal">group:</code> are the two basic
settings defining where to get the account information from.  The following
settings starting with <code class="literal">db_</code> define certain aspects of the
Windows account database search and how to generate <code class="literal">passwd</code>
and <code class="literal">group</code> information from the database.
</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="ntsec-mapping-nsswitch-enum"></a>The <code class="literal">db_enum:</code> setting</h5></div></div></div><p>
<code class="literal">db_enum:</code> defines the depth of a database search, if an
application calls one of the enumeration functions
<a class="ulink" href="http://linux.die.net/man/3/getpwent" target="_top">getpwent</a>
or <a class="ulink" href="http://linux.die.net/man/3/getgrent" target="_top">getgrent</a>.
The problem with these functions is, they neither allow to define how many
entries will be enumerated when calling them in a loop, nor do they
allow to add some filter criteria.  They were designed back in the days,
when only <code class="filename">/etc/passwd</code> and <code class="filename">/etc/group</code>
files existed and the number of user accounts on a typical UNIX system was
seldomly a three-digit number.
</p><p>
These days, with user and group databases sometimes going in the
six-digit range, they are a potential burden.  For that reason, Cygwin
does not enumerate all user or group accounts by default, but rather
just a very small list, consisting only of the accounts cached in memory
by the current process, as well as a handful of predefined builtin
accounts.
</p><p>
<code class="literal">db_enum:</code> allows to specify the accounts to enumerate in a
fine-grained manner.  It takes a list of sources as argument:
</p><pre class="screen">
  db_enum:  source1 source2 ...
</pre><p>
The recognized sources are the following:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">none</code></span></dt><dd>No output from
         <code class="function">getpwent</code>/<code class="function">getgrent</code>
	 at all.</dd><dt><span class="term"><code class="literal">all</code></span></dt><dd>The opposite.  Enumerates accounts from all known sources,
	      including all trusted domains.</dd><dt><span class="term"><code class="literal">cache</code></span></dt><dd>Enumerate all accounts currently cached in memory.</dd><dt><span class="term"><code class="literal">builtin</code></span></dt><dd>Enumerate the predefined builtin accounts for backward
	      compatibility.  These are five passwd accounts (SYSTEM,
	      LocalService, NetworkService, Administrators, TrustedInstaller)
	      and two group accounts (SYSTEM and TrustedInstaller).</dd><dt><span class="term"><code class="literal">files</code></span></dt><dd>Enumerate the accounts from <code class="filename">/etc/passwd</code> or
	      <code class="filename">/etc/group</code>.</dd><dt><span class="term"><code class="literal">local</code></span></dt><dd>Enumerate all accounts from the local SAM.</dd><dt><span class="term"><code class="literal">primary</code></span></dt><dd>Enumerate all accounts from the primary domain.</dd><dt><span class="term"><code class="literal">alltrusted</code></span></dt><dd>Enumerate all accounts from all trusted domains.</dd><dt><span class="term"><code class="literal">some.domain</code></span></dt><dd>Enumerate all accounts from the trusted domain some.domain.  The
	      trusted domain can be given as Netbios flat name (MY_DOMAIN) or
	      as dns domain name (my_domain.corp).  In contrast to the
	      aforementioned fixed source keywords, distinct domain names are
	      caseinsensitive.  Only domains which are actually trusted domains
	      are enumerated.  Unknown domains are simply ignored.</dd></dl></div><p>
Please note that <code class="function">getpwent</code>/<code class="function">getgrent</code>
do <span class="emphasis"><em>not</em></span> test if an account was already listed from another
source, so an account can easily show up twice or three times.  Such a test
would be rather tricky, nor does the Linux implementation perform such test.
Here are a few examples for <code class="filename">/etc/nsswitch.conf</code>:
</p><pre class="screen">
  db_enum: none
</pre><p>
No output from <code class="function">getpwent</code>/<code class="function">getgrent</code>
at all.  The first call to the function immediately returns a NULL pointer.
</p><pre class="screen">
  db_enum: cache files
</pre><p>
Enumerate all accounts cached by the current process, plus all entries
from either the /etc/passwd or /etc/group file.
</p><pre class="screen">
  db_enum: cache local primary
</pre><p>
Enumerate all accounts cached by the current process, all accounts from the SAM
of the local machine, and all accounts from the primary domain of the machine.
</p><pre class="screen">
  db_enum: local primary alltrusted
</pre><p>
Enumerate the accounts from the machine's SAM, from the primary domain of the
machine, and from all trusted domains.
</p><pre class="screen">
  db_enum: primary domain1.corp sub.domain.corp domain2.net
</pre><p>
Enumerate the accounts from the primary domain and from the domains
domain1.corp, sub.domain.corp and domain2.net.
</p><pre class="screen">
  db_enum: all
</pre><p>
Enumerate everything and the kitchen sink.
</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="ntsec-mapping-nsswitch-passwd"></a>Settings defining how to create the <code class="literal">passwd</code> entry</h5></div></div></div><p>
<code class="filename">/etc/nsswitch.conf</code> supports three settings to configure
where to get the pw_dir, pw_shell, and pw_gecos content of a
<code class="literal">passwd</code> entry from:
</p><pre class="screen">
  db_home: schema...     # Define how to fetch the pw_dir entry.
  db_shell: schema...    # Define how to fetch the pw_shell entry.
  db_gecos: schema...    # Define how to fetch the pw_gecos entry.
</pre>

"schema..." is a list of up to four space-separated schemata:

<pre class="screen">
  db_FOO: schema1 schema2 ...
</pre><p>
When generating a passwd entry, Cygwin tries the schemata in order.  If
the first schema returns an empty string, it skips to the second, and so
on.  Schemata only supported on AD are silently skipped for SAM accounts
and on non-AD machines.
</p><p>
Five schemata are predefined, two schemata are variable.  The predefined
schemata are the following:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">windows</code></span></dt><dd>Utilizes typical Windows settings.  Supported for AD and SAM
	      accounts.</dd><dt><span class="term"><code class="literal">cygwin</code></span></dt><dd>Utilizes the cygwinUser AD schema extension.  This schema
	      extension is available via a schema extension file
	      <code class="filename">/usr/share/cygwin/cygwin.ldif</code>.
	      See <a class="xref" href="#ntsec-mapping-nsswitch-cygwin" title="The cygwin schema">the section called &#8220;The <code class="literal">cygwin</code> schema&#8221;</a> for
	      more information.</dd><dt><span class="term"><code class="literal">unix</code></span></dt><dd>Utilizes the posixAccount schema attributes per
	      <a class="ulink" href="https://tools.ietf.org/html/rfc2307" target="_top">RFC 2307</a>.
	      The posixAccount schema is available by default in Windows
	      Server, but typically only utilized when installing the
	      Active Directory "Server for NIS" feature (which is deprecated
	      since Server 2012 R2).
	      See also <a class="xref" href="#ntsec-mapping-nsswitch-posix" title="The unix schema">the section called &#8220;The <code class="literal">unix</code> schema&#8221;</a>.
	      </dd><dt><span class="term"><code class="literal">desc</code></span></dt><dd>Utilizes XML-style attributes in the description attribute.
	      Supported for AD and SAM accounts.
	      See <a class="xref" href="#ntsec-mapping-nsswitch-desc" title="The desc schema">the section called &#8220;The <code class="literal">desc</code> schema&#8221;</a>
	      for a more detailed description.</dd><dt><span class="term"><code class="literal">env</code></span></dt><dd>Utilizes the user's environment.  This schema is only supported
	      for setting the home directory yet.
	      See <a class="xref" href="#ntsec-mapping-nsswitch-home" title="The db_home setting">the section called &#8220;The <code class="literal">db_home</code> setting&#8221;</a> for
	      the description.</dd></dl></div><p>
The variable schemata are as follows.  Note that the leading characters
(<code class="literal">@</code> and <code class="literal">/</code>) are an integral part of the
definition.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">@ad_attribute</code></span></dt><dd><code class="literal">ad_attribute</code> is any arbitrary AD attribute
	      name which should (ideally) be available in the User class or
	      in any attached auxiliary class.  It's always treated as a
	      single string argument.  Only the first string of a multi-string
	      attributes will be read.</dd><dt><span class="term"><code class="literal">/path</code></span></dt><dd>An arbitrary string, typically a path.  The leading slash is
	      required.  Given that a single, fixed path for all users
	      only makes marginal sense, the /path schema supports wildcards.
	      A wildcard is a per-cent (<code class="literal">%</code>) character,
	      followed by another character giving the meaning.  The supported
	      wildcard characters are:
	      
	      <div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">%u</code></span></dt><dd>The Cygwin username (that's lowercase
			    <code class="literal">u</code>).</dd><dt><span class="term"><code class="literal">%U</code></span></dt><dd>The Windows username (that's uppercase
			    <code class="literal">U</code>).</dd><dt><span class="term"><code class="literal">%D</code></span></dt><dd>Windows domain in NetBIOS style.</dd><dt><span class="term"><code class="literal">%H</code></span></dt><dd>Windows home directory in POSIX style.  Note that,
			    for the <code class="literal">db_home:</code> setting, this
			    only makes sense right after the preceeding slash,
			    as in
<pre class="screen">
db_home:  /%H/cygwin
</pre></dd><dt><span class="term"><code class="literal">%_</code></span></dt><dd>Since space and TAB characters are used to separate
			    the schemata, a space in the filename has to be
			    given as <code class="literal">%_</code> (that's an
			    underscore).</dd><dt><span class="term"><code class="literal">%%</code></span></dt><dd>A per-cent character.</dd></dl></div><p>Any other <code class="literal">%X</code> expression is treated as if
	      the character <code class="literal">X</code> has been given alone.</p></dd></dl></div><p>
The exact meaning of a schema depends on the setting it's used for.  The
following sections explain the settings in detail.
</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="ntsec-mapping-nsswitch-home"></a>The <code class="literal">db_home</code> setting</h5></div></div></div><p>
The <code class="literal">db_home:</code> setting defines how Cygwin fetches the user's
home directory, or, more precise, the content of the <code class="literal">pw_dir</code>
member of the user's passwd entry.  The following list describes the meaning
of each schema when used with <code class="literal">db_home:</code>
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">windows</code></span></dt><dd>The user's home directory is set to the same directory which is
	      used as Windows home directory.  This is the
<code class="literal">homeDirectory</code> AD attribute.
	      For SAM accounts, this is equivalent to the "Home folder" setting
	      in SAM.  If both attributes are unset, Cygwin falls back to the
	      user's local profile directory, typically something along the
	      lines of <code class="filename">C:\Users\$USERNAME</code>.  Of course, the
	      Windows directory is converted to POSIX-style by Cygwin.
	      </dd><dt><span class="term"><code class="literal">cygwin</code></span></dt><dd>AD only: The user's home directory is set to the POSIX path given
	      in the <code class="literal">cygwinHome</code> attribute from the
	      <code class="literal">cygwinUser</code> auxiliary class.
	      See also <a class="xref" href="#ntsec-mapping-nsswitch-cygwin" title="The cygwin schema">the section called &#8220;The <code class="literal">cygwin</code> schema&#8221;</a>.
	      </dd><dt><span class="term"><code class="literal">unix</code></span></dt><dd>AD only: The user's home directory is set to the POSIX path given
	      in the <code class="literal">unixHomeDirectory</code> attribute from the
	      <code class="literal">posixAccount</code> auxiliary class.
	      See also <a class="xref" href="#ntsec-mapping-nsswitch-posix" title="The unix schema">the section called &#8220;The <code class="literal">unix</code> schema&#8221;</a>.
	      </dd><dt><span class="term"><code class="literal">desc</code></span></dt><dd>The user's home directory is set to the POSIX path given in the
	      home="..." XML-alike setting in the user's
	      <code class="literal">description</code> attribute in SAM or AD.
	      See <a class="xref" href="#ntsec-mapping-nsswitch-desc" title="The desc schema">the section called &#8220;The <code class="literal">desc</code> schema&#8221;</a>
	      for a detailed description.</dd><dt><span class="term"><code class="literal">env</code></span></dt><dd>Derives the home directory of the current user from the
	      environment variable <code class="literal">HOME</code> (falling back to
	      <code class="literal">HOMEDRIVE\HOMEPATH</code> and
	      <code class="literal">USERPROFILE</code>, in that order).  This is faster
	      than the <code class="literal">windows</code> schema at the
	      expense of determining only the current user's home directory
	      correctly.  This schema is skipped for any other account.
	      </dd><dt><span class="term"><code class="literal">@ad_attribute</code></span></dt><dd>AD only: The user's home directory is set to the path given
	      in the <code class="literal">ad_attribute</code> attribute.  The path
	      can be given as Windows or POSIX path.</dd><dt><span class="term"><code class="literal">/path</code></span></dt><dd>The user's home directory is set to the given POSIX path.
	      Remember the wildcards described in
	      <a class="xref" href="#ntsec-mapping-nsswitch-passwd" title="Settings defining how to create the passwd entry">the section called &#8220;Settings defining how to create the <code class="literal">passwd</code> entry&#8221;</a>.</dd><dt><span class="term">Fallback</span></dt><dd>If none of the schemes given for <code class="literal">db_home:</code>
	      define a non-empty directory, the user's home directory is set to
	      <code class="filename">/home/$USERNAME</code>.</dd></dl></div><p>
<code class="literal">db_home:</code> defines no default schemata.  If this setting is not
present in <code class="filename">/etc/nsswitch.conf</code>, the aforementioned fallback
takes over, which is equivalent to a <code class="filename">/etc/nsswitch.conf</code>
settting of
</p><pre class="screen">
  db_home: /home/%U
</pre></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="ntsec-mapping-nsswitch-shell"></a>The <code class="literal">db_shell</code> setting</h5></div></div></div><p>
The <code class="literal">db_shell:</code> setting defines how Cygwin fetches the user's
login shell, the content of the <code class="literal">pw_shell</code> member of the
user's passwd entry.  The following list describes the meaning of each schema
when used with <code class="literal">db_shell:</code>
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">windows</code></span></dt><dd>The <code class="literal">windows</code> schema is ignored for now.
	      The logical choice would be CMD, but that introduces some
	      problems, for instance the fact that CMD has no concept of
	      running as <code class="literal">login shell</code>.  This may change
	      in future.</dd><dt><span class="term"><code class="literal">cygwin</code></span></dt><dd>AD only: The user's home directory is set to the POSIX path given
	      in the <code class="literal">cygwinShell</code> attribute from the
	      <code class="literal">cygwinUser</code> auxiliary class.
	      See also <a class="xref" href="#ntsec-mapping-nsswitch-cygwin" title="The cygwin schema">the section called &#8220;The <code class="literal">cygwin</code> schema&#8221;</a>.
	      </dd><dt><span class="term"><code class="literal">unix</code></span></dt><dd>AD only: The user's login shell is set to the POSIX path given
	      in the <code class="literal">loginShell</code> attribute from the
	      <code class="literal">posixAccount</code> auxiliary class.
	      See also <a class="xref" href="#ntsec-mapping-nsswitch-posix" title="The unix schema">the section called &#8220;The <code class="literal">unix</code> schema&#8221;</a>.
	      </dd><dt><span class="term"><code class="literal">desc</code></span></dt><dd>The user's login shell is set to the POSIX path given in the
	      shell="..." XML-alike setting in the user's
	      <code class="literal">description</code> attribute in SAM or AD.
	      See <a class="xref" href="#ntsec-mapping-nsswitch-desc" title="The desc schema">the section called &#8220;The <code class="literal">desc</code> schema&#8221;</a>
	      for a detailed description.</dd><dt><span class="term"><code class="literal">@ad_attribute</code></span></dt><dd>AD only: The user's login shell is set to the path given
	      in the <code class="literal">ad_attribute</code> attribute.  The path
	      can be given as Windows or POSIX path.</dd><dt><span class="term"><code class="literal">/path</code></span></dt><dd>The user's login shell is set to the given POSIX path.
	      Albeit not being as important here, the wildcards described in
	      <a class="xref" href="#ntsec-mapping-nsswitch-passwd" title="Settings defining how to create the passwd entry">the section called &#8220;Settings defining how to create the <code class="literal">passwd</code> entry&#8221;</a>
	      are also available for specifying a login shell path.</dd><dt><span class="term">Fallback</span></dt><dd>If none of the schemes given for <code class="literal">db_shell:</code>
	      define a non-empty pathname, the user's login shell is set to
	      <code class="filename">/bin/bash</code>.</dd></dl></div><p>
<code class="literal">db_shell:</code> defines no default schemata.  If this setting is
not present in <code class="filename">/etc/nsswitch.conf</code>, the aforementioned
fallback takes over, which is equivalent to a
<code class="filename">/etc/nsswitch.conf</code> settting of
</p><pre class="screen">
  db_shell: /bin/bash
</pre></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="ntsec-mapping-nsswitch-gecos"></a>The <code class="literal">db_gecos</code> setting</h5></div></div></div><p>
The <code class="literal">db_gecos:</code> setting defines how to fetch additional
content for the <code class="literal">pw_gecos</code> member of the user's passwd entry.
There's always a fixed, Cygwin-specific part in the <code class="literal">pw_gecos</code>
field for identifying the account.  However, an administrator might want to
add informative content like, for instance, the user's full name.  That's
what the <code class="literal">db_gecos:</code> setting is for.
The following list describes the meaning of each schema when used with
<code class="literal">db_gecos:</code>
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">windows</code></span></dt><dd>Add the AD <code class="literal">displayName</code> attribute or, for
	      SAM accounts, the "Full name" entry to the
	      <code class="literal">pw_gecos</code> field.</dd><dt><span class="term"><code class="literal">cygwin</code></span></dt><dd>AD only: The content of the <code class="literal">cygwinGecos</code>
	      attribute from the <code class="literal">cygwinUser</code> auxiliary class
	      is added to <code class="literal">pw_gecos</code>.
	      See also <a class="xref" href="#ntsec-mapping-nsswitch-cygwin" title="The cygwin schema">the section called &#8220;The <code class="literal">cygwin</code> schema&#8221;</a>.
	      </dd><dt><span class="term"><code class="literal">unix</code></span></dt><dd>AD only: The content of the <code class="literal">gecos</code> attribute
	      from the <code class="literal">posixAccount</code> auxiliary class
	      is added to <code class="literal">pw_gecos</code>.
	      See also <a class="xref" href="#ntsec-mapping-nsswitch-posix" title="The unix schema">the section called &#8220;The <code class="literal">unix</code> schema&#8221;</a>.
	      </dd><dt><span class="term"><code class="literal">desc</code></span></dt><dd>The content of the gecos="..." XML-alike setting in the user's
	      <code class="literal">description</code> attribute in SAM or AD is added
	      to <code class="literal">pw_gecos</code>.
	      See <a class="xref" href="#ntsec-mapping-nsswitch-desc" title="The desc schema">the section called &#8220;The <code class="literal">desc</code> schema&#8221;</a>
	      for a detailed description.</dd><dt><span class="term"><code class="literal">@ad_attribute</code></span></dt><dd>AD only: The content of the <code class="literal">ad_attribute</code>
	      attribute is added to <code class="literal">pw_gecos</code>.</dd><dt><span class="term"><code class="literal">/path</code></span></dt><dd>The string following the slash is added to
	      <code class="literal">pw_gecos</code>.  Here, the wildcards described in
	      <a class="xref" href="#ntsec-mapping-nsswitch-passwd" title="Settings defining how to create the passwd entry">the section called &#8220;Settings defining how to create the <code class="literal">passwd</code> entry&#8221;</a>
	      may come in handy.</dd><dt><span class="term">Fallback</span></dt><dd>If none of the schemes given for <code class="literal">db_gecos:</code>
	      define a non-empty string, nothing is added to
	      <code class="literal">pw_gecos</code>.</dd></dl></div><p>
<code class="literal">db_gecos:</code> defines no default schemata.
</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="ntsec-mapping-nsswitch-cygwin"></a>The <code class="literal">cygwin</code> schema</h5></div></div></div><p>
The <code class="literal">cygwin</code> schema is based on a Cygwin-specific Active
Directory schema extension.  Using this schema extension allows to maintain
Cygwin-specific settings entirely within AD, without colliding with any other
schema.
</p><p>
The cygwin schema extension is available in a default Cygwin installation
in the file <code class="filename">/usr/share/cygwin/cygwin.ldif</code>.  To install
the schema extension, you have to be schema admin, and you have to run the
<span class="command"><strong>ldifde</strong></span> command on the schema master.  The installation
itself is rather simple.  Assuming you're schema admin and running a shell
with administrative privileges:
</p><pre class="screen">
  $ cd /usr/share/cygwin
  $ ldifde -i -f cygwin.ldif -k -c "CN=schema,CN=Configuration,DC=X" #schemaNamingContext
</pre><p>
Afterwards, the auxiliary class <code class="literal">cygwinUser</code> is attached to
the class <code class="literal">User</code>, and the auxiliary class
<code class="literal">cygwinGroup</code> is attached to the class
<code class="literal">Group</code>.  The new attributes can be immediately edited
using <span class="command"><strong>ADSI Edit</strong></span>.
</p><p>
At the time of writing the following attributes are utilized by Cygwin:
</p><div class="segmentedlist"><table border="0"><thead><tr class="segtitle"></tr></thead><tbody><tr class="seglistitem"><td class="seg"><code class="literal">cygwinHome</code></td><td class="seg">Used as Cygwin home directory with <code class="literal">db_home: cygwin</code>.
	 See <a class="xref" href="#ntsec-mapping-nsswitch-home" title="The db_home setting">the section called &#8220;The <code class="literal">db_home</code> setting&#8221;</a>.</td></tr><tr class="seglistitem"><td class="seg"><code class="literal">cygwinShell</code></td><td class="seg">Used as Cygwin login shell with <code class="literal">db_shell: cygwin</code>.
	 See <a class="xref" href="#ntsec-mapping-nsswitch-shell" title="The db_shell setting">the section called &#8220;The <code class="literal">db_shell</code> setting&#8221;</a>.</td></tr><tr class="seglistitem"><td class="seg"><code class="literal">cygwinGecos</code></td><td class="seg">Content will be added to the pw_gecos field with
	 <code class="literal">db_gecos: cygwin</code>.
	 See <a class="xref" href="#ntsec-mapping-nsswitch-gecos" title="The db_gecos setting">the section called &#8220;The <code class="literal">db_gecos</code> setting&#8221;</a>.</td></tr></tbody></table></div></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="ntsec-mapping-nsswitch-posix"></a>The <code class="literal">unix</code> schema</h5></div></div></div><p>
The <code class="literal">unix</code> schema utilizes the 
<code class="literal">posixAccount</code> attribute extension.  This is one of two
schema extensions which are connected to AD accounts, available by default.
They are usually <span class="bold"><strong>not set</strong></span>, unless used by
the Active Directory <code class="literal">Server for NIS</code> feature (deprecated
since Server 2012 R2).

Two schemata are interesting for Cygwin, <code class="literal">posixAccount</code>,
connected to user accounts, and <code class="literal">posixGroup</code>, connected
to group accounts.  Both follow the description of RFC 2307,
<a class="ulink" href="https://tools.ietf.org/html/rfc2307" target="_top">an Approach for Using LDAP as
a Network Information Service</a>.
The user attributes utilized by Cygwin are:
</p><div class="segmentedlist"><table border="0"><thead><tr class="segtitle"></tr></thead><tbody><tr class="seglistitem"><td class="seg"><code class="literal">unixHomeDirectory</code></td><td class="seg">Used as Cygwin home directory with <code class="literal">db_home: unix</code>.
	 See <a class="xref" href="#ntsec-mapping-nsswitch-home" title="The db_home setting">the section called &#8220;The <code class="literal">db_home</code> setting&#8221;</a>.</td></tr><tr class="seglistitem"><td class="seg"><code class="literal">loginShell</code></td><td class="seg">Used as Cygwin login shell with <code class="literal">db_shell: unix</code>.
	 See <a class="xref" href="#ntsec-mapping-nsswitch-shell" title="The db_shell setting">the section called &#8220;The <code class="literal">db_shell</code> setting&#8221;</a>.</td></tr><tr class="seglistitem"><td class="seg"><code class="literal">gecos</code></td><td class="seg">Content will be added to the pw_gecos field with
	 <code class="literal">db_gecos: unix</code>.
	 See <a class="xref" href="#ntsec-mapping-nsswitch-gecos" title="The db_gecos setting">the section called &#8220;The <code class="literal">db_gecos</code> setting&#8221;</a>.</td></tr><tr class="seglistitem"><td class="seg"><code class="literal">uidNumber</code></td><td class="seg">See <a class="xref" href="#ntsec-mapping-nfs" title="NFS account mapping">the section called &#8220;NFS account mapping&#8221;</a> and
	 <a class="xref" href="#ntsec-mapping-samba" title="Samba account mapping">the section called &#8220;Samba account mapping&#8221;</a>.</td></tr></tbody></table></div><p>
The group attributes utilized by Cygwin are:
</p><div class="segmentedlist"><table border="0"><thead><tr class="segtitle"></tr></thead><tbody><tr class="seglistitem"><td class="seg"><code class="literal">gidNumber</code></td><td class="seg">See <a class="xref" href="#ntsec-mapping-nfs" title="NFS account mapping">the section called &#8220;NFS account mapping&#8221;</a> and
	 <a class="xref" href="#ntsec-mapping-samba" title="Samba account mapping">the section called &#8220;Samba account mapping&#8221;</a>.</td></tr></tbody></table></div><p>
Apart from power shell scripting or inventing new CLI tools, these attributes
can be changed using the <code class="literal">Attribute Editor</code> tab in the user
properties dialog of the <code class="literal">Active Directory Users and Computers</code>
MMC snap-in.  Alternatively, if the <code class="literal">Server for NIS</code>
administration feature has been installed, there will be a
<code class="literal">UNIX Attributes</code> tab which contains the required fields,
except for the gecos field.  Last resort is <span class="command"><strong>ADSI Edit</strong></span>.
</p></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="ntsec-mapping-nsswitch-desc"></a>The <code class="literal">desc</code> schema</h5></div></div></div><p>
When using user accounts from the local account database, the SAM, there
are only a very limited number of settings available.  In contrast to
Active Directory there's no way to add fields to a user's entry.  You have
to make do with the fields available.  The method to utilize the
<code class="literal">description</code> field has been mainly introduced for those
accounts, usually the only ones a home user has.  However, for symmetry,
and because there may be a reason to use this in an AD environment, this
schema is also supported for AD users.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
The presentation of local user account settings on Windows is confusing,
to say the least.  The <code class="literal">description</code> field is not visible at
all in the user settings available via the <code class="literal">User Accounts</code>
control settings.  And while it's called <code class="literal">Description</code> in the
<code class="literal">Local Users and Groups</code> MMC snap-in (available, for instance,
via the <code class="literal">Computer Management</code> GUI), in the command
line tool <span class="command"><strong>net user</strong></span> the same field is called
<code class="literal">comment</code>.  The latter is especially confusing for
AD admins, because the <code class="literal">comment</code> attribute in AD is called
<code class="literal">usercomment</code> on the command line.  Confused?  Never mind,
you're not the only one...
</p></div><p>
Fortunately you can utilize the <code class="literal">description</code> field even if
you're running a "home edition" of Windows, by using the command line.  The
<span class="command"><strong>net user</strong></span> command allows to set all values in the SAM, even
if the GUI is crippled.
</p><p>
A Cygwin SAM comment entry looks like this:
</p><pre class="screen">
&lt;cygwin key="value" key="value" [...] /&gt;
</pre><p>
The supported keys are:
</p><div class="segmentedlist"><table border="0"><thead><tr class="segtitle"></tr></thead><tbody><tr class="seglistitem"><td class="seg"><code class="literal">home="value"</code></td><td class="seg">Sets the Cygwin home dir to value.</td></tr><tr class="seglistitem"><td class="seg"><code class="literal">shell="value"</code></td><td class="seg">Sets the Cygwin login shell to value.</td></tr><tr class="seglistitem"><td class="seg"><code class="literal">gecos="value"</code></td><td class="seg">Adds the string value to the user's gecos field.</td></tr></tbody></table></div><p>
The next two settings are only supported for SAM accounts.
</p><div class="segmentedlist"><table border="0"><thead><tr class="segtitle"></tr></thead><tbody><tr class="seglistitem"><td class="seg"><code class="literal">group="value"</code></td><td class="seg">Sets the Cygwin primary group of the account to value, provided that
    	 the user <span class="emphasis"><em>is</em></span> already a member of that group.
	 This allows to override the default <code class="literal">None</code> primary
	 group for local accounts.  One nice idea here is, for instance,
	 group="Users".</td></tr><tr class="seglistitem"><td class="seg"><code class="literal">unix="value"</code></td><td class="seg">Sets the NFS/Samba uid of the user to the decimal value.
         See <a class="xref" href="#ntsec-mapping-nfs" title="NFS account mapping">the section called &#8220;NFS account mapping&#8221;</a> and
	 <a class="xref" href="#ntsec-mapping-samba" title="Samba account mapping">the section called &#8220;Samba account mapping&#8221;</a>.</td></tr></tbody></table></div><p>
The &lt;cygwin .../&gt; string can start at any point in the comment, but
you have to follow the rules:
</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem">
It starts with "&lt;cygwin " and ends with "/&gt;".
</li><li class="listitem">
The "cygwin" string and the key names have to be lowercase.
</li><li class="listitem">
No spaces between key and "value", just the equal sign.
</li><li class="listitem">
The value must be placed within double quotes and it must not contain a double
quote itself.  The double quotes are required for the decimal values as well!
</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
There's also a length restriction imposed by Windows.  The
<code class="literal">description</code> entry has a maximum length of 1023 characters.
</p></div><p>
CMD example:
</p><pre class="screen">
net user corinna /comment:"&lt;cygwin home=\"/home/foo\"/&gt;"
</pre><p>
Bash example (use single quotes):
</p><pre class="screen">
net user corinna /comment:'&lt;cygwin home="/home/foo"/&gt;'
</pre><p>
For changing group comments, use the `net localgroup' command.  The supported
key/value pair for SAM groups are:
</p><div class="segmentedlist"><table border="0"><thead><tr class="segtitle"></tr></thead><tbody><tr class="seglistitem"><td class="seg"><code class="literal">unix="value"</code></td><td class="seg">Sets the NFS/Samba gid of the group to the decimal value.
         See <a class="xref" href="#ntsec-mapping-nfs" title="NFS account mapping">the section called &#8220;NFS account mapping&#8221;</a> and
	 <a class="xref" href="#ntsec-mapping-samba" title="Samba account mapping">the section called &#8220;Samba account mapping&#8221;</a>.</td></tr></tbody></table></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ntsec-mapping-nfs"></a>NFS account mapping</h4></div></div></div><p>
Microsoft's NFS client does not map the uid/gid values on the NFS shares
to SIDs.  There's no such thing as a (fake) security descriptor returned
to the application.  Rather, via an undocumented API an application can
fetch <a class="ulink" href="https://tools.ietf.org/html/rfc1813" target="_top">RFC 1813</a>
compatible NFSv3 stat information from the share.  This is what Cygwin is
using to show stat information for files on NFS shares.
</p><p>
The problem is, while all other information in this stat record, like
timestamps, file size etc., can be used by Cygwin, Cygwin had no way to
map the values of the st_uid and st_gid members to a Windows SID for a
long time.  So it just faked the file owner info and claimed that it's
you.
</p><p>
However, SFU has, over time, developed multiple methods to map UNIX
uid/gid values on NFS shares to Windows SIDs.  You'll find the full
documentation of the mapping methods in
<a class="ulink" href="http://blogs.technet.com/b/filecab/archive/2012/10/09/nfs-identity-mapping-in-windows-server-2012.aspx" target="_top">NFS Identity Mapping in Windows Server 2012</a>
</p><p>
Cygwin now utilizes the
<a class="ulink" href="https://tools.ietf.org/html/rfc2307" target="_top">RFC 2307</a>
mapping for this purpose.  This is most of the time provided by an AD domain,
but it could also be a standalone LDAP mapping server.  Per
<a class="ulink" href="https://tools.ietf.org/html/rfc2307" target="_top">RFC 2307</a>, the uid is
in the attribute <code class="literal">uidNumber</code>.  For groups, the gid is in the
<code class="literal">gidNumber</code> attribute.
See <a class="xref" href="#ntsec-mapping-nsswitch-posix" title="The unix schema">the section called &#8220;The <code class="literal">unix</code> schema&#8221;</a>.
</p><p>
When Cygwin stat()s files on an NFS share, it asks the mapping server via
LDAP in two different ways, depending on the role of the mapping server.
</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem">
If the server is an AD domain controller, it asks for an account with
<code class="literal">uidNumber</code> attribute == <code class="literal">st_uid</code> field of
the stat record returned by NFS.  If an account matches, AD returns the
Windows SID, so we have an immediate mapping from UNIX uid to a Windows SID,
if the user account has a valid <code class="literal">uidNumber</code> attribute.  For
groups, the method is the same, just that Cygwin asks for a group with
<code class="literal">gidNumber</code> attribute == <code class="literal">st_gid</code> field of the
stat record.
</li><li class="listitem">
If the server is a standalone LDAP mapping server Cygwin asks for the
same <code class="literal">uidNumber</code>/<code class="literal">gidNumber</code> attributes, but
it can't expect that the LDAP server knows anything about Windows SIDs.
Rather, the mapping server returns the account name.  Cygwin then asks the
DC for an account with this name, and if that succeeds, we have a mapping
between UNIX uid/gid and Windows SIDs.
</li></ul></div><p>
The mapping will be cached for the lifetime of the process, and inherited
by child processes.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ntsec-mapping-samba"></a>Samba account mapping</h4></div></div></div><p>
A fully set up Samba file server with domain integration is running winbindd to
map Windows SIDs to artificially created UNIX uids and gids, and this mapping is
transparent within the domain, so Cygwin doesn't have to do anything special.
</p><p>
However, setting up winbindd isn't for everybody, and it fails to map
Windows accounts to already existing UNIX users or groups.  In contrast
to NFS, Samba returns security descriptors, but unmapped UNIX accounts
get special SIDs:
</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem">
A UNIX user account with uid X is mapped to the Windows SID S-1-22-1-X.
</li><li class="listitem">
A UNIX group account with gid X is mapped to SID S-1-22-2-X.
</li></ul></div><p>
As you can see, even though we have SIDs, they just reflect the actual
uid/gid values on the UNIX box in the RID value.  It's only marginally
different from the NFS method, so why not just use the same method as
for NFS?
</p><p>
That's what Cygwin will do.  If it encounters a S-1-22-x-y SID, it
will perform the same
<a class="ulink" href="https://tools.ietf.org/html/rfc2307" target="_top">RFC 2307</a>
mapping as for NFS shares.
</p><p>
For home users without any Windows domain or LDAP server per
<a class="ulink" href="https://tools.ietf.org/html/rfc2307" target="_top">RFC 2307</a>,
but with a Linux machine running Samba, just add this information to
your SAM account.  Assuming the uid of your Linux user account is 505
and the gid of your primary group is, say, 100, just add the values to
your SAM user and group accounts.  The following example assumes you
didn't already add something else to the comment field.
</p><p>
To your user's SAM comment (remember: called <code class="literal">Description</code>
in the GUI),
add:
</p><pre class="screen">
  &lt;cygwin group="Users" unix="505"/&gt;
</pre><p>
To the <code class="literal">Users</code> group SAM comment add:
</p><pre class="screen">
  &lt;cygwin unix="100"/&gt;
</pre><p>
This should be sufficient to work on your Samba share and to see
all files owned by your Linux user account as your files.
</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ntsec-files"></a>File permissions</h3></div></div></div><p>On NTFS and if the <code class="literal">noacl</code> mount option is not
specified for a mount point, Cygwin sets file permissions as on POSIX
systems.  Basically this is done by defining a Security Descriptor with the
matching owner and group SIDs, and a DACL which contains ACEs for the owner,
the group and for "Everyone", which represents what POSIX calls "others".</p><p>There's just one problem when trying to map the POSIX permission model
onto the Windows permission model.</p><p>There's a leak in the definition of a "correct" ACL which disallows a
certain POSIX permission setting.  The official documentation explains in short
the following:</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p>The requested permissions are checked against all
ACEs of the user as well as all groups the user is member of.  The
permissions given in these user and groups access allowed ACEs are
accumulated and the resulting set is the set of permissions of that
user given for that object.</p></li><li class="listitem"><p>The order of ACEs is important. The system reads them in
sequence until either any single requested permission is denied or all
requested permissions are granted.  Reading stops when this condition is
met.  Later ACEs are not taken into account.</p></li><li class="listitem"><p>All access denied ACEs <span class="bold"><strong>should</strong></span> precede any access allowed ACE.  ACLs
following this rule are called "canonical".</p></li></ul></div><p>Note that the last rule is a preference or a definition of
correctness.  It's not an absolute requirement.  All Windows kernels
will correctly deal with the ACL regardless of the order of allow and
deny ACEs.  The second rule is not modified to get the ACEs in the
preferred order.</p><p>Unfortunately, the security tab in the file properties dialog of
the Windows Explorer will pop up a warning stating "The permissions on
... are incorrectly ordered, which may cause some entries to be
ineffective."  Pressing the Cancel button of the properties dialog
fortunately leaves the sort order unchanged, but pressing OK will cause
Explorer to canonicalize the order of the ACEs, thereby invalidating
POSIX compatibility.</p><p>Canonical ACLs are unable to reflect each possible combination
of POSIX permissions. Example:</p><pre class="screen">
rw-r-xrw-
</pre><p>Ok, so here's the first try to create a matching ACL, assuming
the Windows permissions only have three bits, as their POSIX counterpart:
</p><pre class="screen">
UserAllow:   110
GroupAllow:  101
OthersAllow: 110
</pre><p>Hmm, because of the accumulation of allow rights the user may
execute because the group may execute.</p><p>Second try:</p><pre class="screen">
UserDeny:    001
GroupAllow:  101
OthersAllow: 110
</pre><p>Now the user may read and write but not execute. Better? No!
Unfortunately the group may write now because others may write.</p><p>Third try:</p><pre class="screen">
UserDeny:    001
GroupDeny:   010
GroupAllow:  001
OthersAllow: 110
</pre><p>Now the group may not write as intended but unfortunately the user may
not write anymore, either. How should this problem be solved? According to
the canonical order a UserAllow has to follow the GroupDeny but it's
easy to see that this can never be solved that way.</p><p>The only chance:</p><pre class="screen">
UserDeny:    001
UserAllow:   010
GroupDeny:   010
GroupAllow:  001
OthersAllow: 110
</pre><p>Again: This works on all supported versions of Windows.  Only the GUIs
aren't able (or willing) to deal with that order.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ntsec-setuid-overview"></a>Switching the user context</h3></div></div></div><p>Windows users have been accustomed to the "Switch User" feature, which
switches the entire desktop to another user while leaving the original user's
desktop "suspended".  Another Windows feature is the "Run as..." context menu
entry, which allows you to start an application using another user account
when right-clicking on applications and shortcuts.</p><p>On POSIX systems, this operation can be performed by processes
running under the privileged user accounts (usually the "root" user
account) on a per-process basis.  This is called "switching the user
context" for that process, and is performed using the POSIX
<span class="command"><strong>setuid</strong></span> and <span class="command"><strong>seteuid</strong></span> system
calls.</p><p>While this sort of feature is available on Windows as well,
Windows does not support the concept of these calls in a simple fashion.
Switching the user context in Windows is generally a tricky process with
lots of "behind the scenes" magic involved.</p><p>Windows uses so-called `access tokens' to identify a user and its
permissions.  Usually the access token is created at logon time and then
it's attached to the starting process.  Every new process within a session
inherits the access token from its parent process.  Every thread can
get its own access token, which allows, for instance, to define threads
with restricted permissions.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ntsec-logonuser"></a>Switching the user context with password authentication</h4></div></div></div><p>To switch the user context, the process has to request such an access
token for the new user.  This is typically done by calling the Win32 API
function <span class="command"><strong>LogonUser</strong></span> with the user name and the user's
cleartext password as arguments.  If the user exists and the password was
specified correctly, the access token is returned and either used in
<span class="command"><strong>ImpersonateLoggedOnUser</strong></span> to change the user context of
the current thread, or in <span class="command"><strong>CreateProcessAsUser</strong></span> to
change the user context of a spawned child process.</p><p>Later versions of Windows define new functions in this context and
there are also functions to manipulate existing access tokens (usually
only to restrict them).  Windows Vista also adds subtokens which are
attached to other access tokens which plays an important role in the UAC
(User Access Control) facility of Vista and later.  However, none of
these extensions to the original concept are important for this
documentation.</p><p>Back to this logon with password, how can this be used to
implement <span class="command"><strong>set(e)uid</strong></span>?  Well, it requires modification
of the calling application.  Two Cygwin functions have been introduced
to support porting <span class="command"><strong>setuid</strong></span> applications which only
require login with passwords.  You only give Cygwin the right access
token and then you can call <span class="command"><strong>seteuid</strong></span> or
<span class="command"><strong>setuid</strong></span> as usual in POSIX applications.  Porting such
a <span class="command"><strong>setuid</strong></span> application is illustrated by a short
example:</p><pre class="screen">

/* First include all needed cygwin stuff. */
#ifdef __CYGWIN__
#include &lt;windows.h&gt;
#include &lt;sys/cygwin.h&gt;
#endif

[...]

  struct passwd *user_pwd_entry = getpwnam (username);
  char *cleartext_password = getpass ("Password:");

[...]

#ifdef __CYGWIN__
  /* Patch the typical password test. */
  {
    HANDLE token;

    /* Try to get the access token from Windows. */
    token = cygwin_logon_user (user_pwd_entry, cleartext_password);
    if (token == INVALID_HANDLE_VALUE)
       error_exit;
    /* Inform Cygwin about the new impersonation token. */
    cygwin_set_impersonation_token (token);
    /* Cygwin is now able, to switch to that user context by setuid or seteuid calls. */
  }
#else
    /* Use standard method on non-Cygwin systems. */
    hashed_password = crypt (cleartext_password, salt);
    if (!user_pwd_entry ||
        strcmp (hashed_password, user_pwd_entry-&gt;pw_passwd))
      error_exit;
#endif /* CYGWIN */

[...]

  /* Everything else remains the same! */

  setegid (user_pwd_entry-&gt;pw_gid);
  seteuid (user_pwd_entry-&gt;pw_uid);
  execl ("/bin/sh", ...);


</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ntsec-nopasswd1"></a>Switching the user context without password, Method 1: Kerberos/MsV1_0 S4U authentication</h4></div></div></div><p>An unfortunate aspect of the implementation of
<span class="command"><strong>set(e)uid</strong></span> is the fact that the calling process
requires the password of the user to switch to.  Applications such as
<span class="command"><strong>sshd</strong></span> wishing to switch the user context after a
successful public key authentication, or the <span class="command"><strong>cron</strong></span>
application which, again, wants to switch the user without any authentication
are stuck here.  But there are other ways to get new user tokens.</p><p>Starting with Cygwin 3.0, Cygwin tries to create a token by using
<code class="literal">Windows S4U authentication</code> by default.  For a quick
description, see
<a class="ulink" href="https://blogs.msdn.microsoft.com/winsdk/2015/08/28/logon-as-a-user-without-a-password/" target="_top">this blog posting</a>.  Cygwin versions prior
to 3.0 tried to creat a user token from scratch using an officially
undocumented function <span class="command"><strong>NtCreateToken</strong></span> which
is now disabled.</p><p>So we just start the services which have to switch the user context
(<span class="command"><strong>cygsshd</strong></span>, <span class="command"><strong>inetd</strong></span>, <span class="command"><strong>cron</strong></span>,
...) as Windows services under the SYSTEM (or LocalSystem in the GUI)
account and everything just works.  Unfortunately that's too simple.
Using <code class="literal">S4U</code> has a drawback.</p><p>Annoyingly, you don't have the usual comfortable access
to network shares.  The reason is that the token has been created
without knowing the password.  The password are your credentials
necessary for network access.  Thus, if you logon with a password, the
password is stored hidden as "token credentials" within the access token
and used as default logon to access network resources.  Since these
credentials are missing from the token created with <code class="literal">S4U</code>
or <span class="command"><strong>NtCreateToken</strong></span>, you only can access network shares
from the new user's process tree by using explicit authentication, on
the command line for instance:</p><pre class="screen">
bash$ net use '\\server\share' /user:DOMAIN\my_user my_users_password
</pre><p>Note that, on some systems, you can't even define a drive letter
to access the share, and under some circumstances the drive letter you
choose collides with a drive letter already used in another session.
Therefore it's better to get used to accessing these shares using the UNC
path as in</p><pre class="screen">
bash$ grep foo //server/share/foofile
</pre></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ntsec-nopasswd3"></a>Switching the user context without password, Method 2: With password</h4></div></div></div><p>Not being able to access network shares without having to specify
a cleartext password on the command line or in a script is a harsh problem
for automated logons for testing purposes and similar stuff.</p><p>Fortunately there is a solution, but it has its own drawbacks.
But, first things first, how does it work?  The title of this section
says it all.  Instead of trying to logon without password, we just logon
with password.  The password gets stored two-way encrypted in a hidden,
obfuscated area of the registry, the LSA private registry area.  This
part of the registry contains, for instance, the passwords of the Windows
services which run under some non-default user account.</p><p>So what we do is to utilize this registry area for the purpose of
<span class="command"><strong>set(e)uid</strong></span>.  The Cygwin command <span class="command"><strong><a class="link" href="#passwd" title="passwd">passwd</a> -R</strong></span> allows a user to specify
his/her password for storage in this registry area.  When this user
tries to login using ssh with public key authentication, Cygwin's
<span class="command"><strong>set(e)uid</strong></span> examines the LSA private registry area and
searches for a Cygwin specific key which contains the password.  If it
finds it, it calls <span class="command"><strong>LogonUser</strong></span> under the hood, using
this password.  If that works, <span class="command"><strong>LogonUser</strong></span> returns an
access token with all credentials necessary for network access.</p><p>For good measure, and since this way to implement
<span class="command"><strong>set(e)uid</strong></span> is not only used by Cygwin but also by
Microsoft's SFU (Services for Unix), we also look for a key stored by
SFU (using the SFU command <span class="command"><strong>regpwd</strong></span>) and use that if it's
available.</p><p>We got it.  A full access token with its own logon session, with
all network credentials.  Hmm, that's heaven...</p><p>Back on earth, what about the drawbacks?</p><p>First, adding a password to the LSA private registry area
requires administrative access.  So calling <span class="command"><strong>passwd -R</strong></span>
as a normal user will fail!  Cygwin provides a workaround for
this.  If <span class="command"><strong>cygserver</strong></span> is started as a service running
under the SYSTEM account (which is the default way to run
<span class="command"><strong>cygserver</strong></span>) you can use <span class="command"><strong>passwd -R</strong></span>
as normal, non-privileged user as well.</p><p>Second, as aforementioned, the password is two-way encrypted in a
hidden, obfuscated registry area.  Only SYSTEM has access to this area
for listing purposes, so, even as an administrator, you can't examine
this area with regedit.  Right?  No.  Every administrator can start
regedit as SYSTEM user, the Internet is your friend here.</p><p>Additionally, if an administrator knows under which name
the private key is stored (which is well-known since the algorithms
used to create the Cygwin and SFU keys are no secret), every administrator
can access the password of all keys stored this way in the registry.</p><p>Conclusion: If your system is used exclusively by you, and if
you're also the only administrator of your system, and if your system is
adequately locked down to prevent malicious access, you can safely use
this method.  If your machine is part of a network which has
dedicated administrators, and you're not one of these administrators,
but you (think you) can trust your administrators, you can probably
safely use this method.</p><p>In all other cases, don't use this method.  You have been warned.</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ntsec-setuid-impl"></a>Switching the user context, how does it all fit together?</h4></div></div></div><p>Now we learned about three different ways to switch the user
context using the <span class="command"><strong>set(e)uid</strong></span> system call, but
how does <span class="command"><strong>set(e)uid</strong></span> really work?  Which method does it
use now?</p><p>The answer is, all three of them.  So here's a brief overview
what <span class="command"><strong>set(e)uid</strong></span> does under the hood:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>When <span class="command"><strong>set(e)uid</strong></span> is called, it tests if the
user context had been switched by an earlier call already, and if the
new user account is the privileged user account under which the process
had been started originally.  If so, it just switches to the original
access token of the process it had been started with.</p></li><li class="listitem"><p>
Next, it tests if an access token has been stored by an earlier call
to <span class="command"><strong>cygwin_set_impersonation_token</strong></span>.  If so, it tests
if that token matches the requested user account.  If so, the stored
token is used for the user context switch.</p><p>
If not, there's no predefined token which can just be used for
the user context switch, so we have to create a new token.  The order
is as follows.</p></li><li class="listitem"><p>Check if the user has stored the logon password in the LSA
private registry area, either under a Cygwin key, or under a SFU key.
If so, use this to call <span class="command"><strong>LogonUser</strong></span>.  If this
succeeds, we use the resulting token for the user context switch.</p></li><li class="listitem"><p>Otherwise, use the default <code class="literal">S4U</code> authentication
to create a token.</p></li><li class="listitem"><p>Older systems, like WOW64 under Windows 7 64 bit, don't support
<code class="literal">S4U</code> authentication for local machine accounts.  On
these systems Cygwin falls back to an old and otherwise deprecated
method to create a user token from scratch.  The underlying system call
is undocumented and has an unfortunate requirement: We have to create a
special account with dangerous permissions to perform this action.
Therefore this is only enabled on affected systems.</p></li><li class="listitem"><p>If all of the above fails, our process has insufficient privileges
to switch the user context at all, so <span class="command"><strong>set(e)uid</strong></span>
fails and returns -1, setting errno to EPERM.</p></li></ul></div></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-cygserver"></a>Cygserver</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="what-is-cygserver"></a>What is Cygserver?</h3></div></div></div><p>
  Cygserver is a program which is designed to run as a background service.
  It provides Cygwin applications with services which require security
  arbitration or which need to persist while no other cygwin application
  is running.
</p><p>
  The implemented services so far are:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>XSI IPC Message Queues.</p></li><li class="listitem" style="list-style-type: disc"><p>XSI IPC Semaphores.</p></li><li class="listitem" style="list-style-type: disc"><p>XSI IPC Shared Memory.</p></li><li class="listitem" style="list-style-type: disc"><p>Allows non-privileged users to store obfuscated
  passwords in the registry to be used by <span class="command"><strong>setuid</strong></span> and
  <span class="command"><strong>seteuid</strong></span> calls to create user tokens with network
  credentials.  This service is used by <span class="command"><strong><a class="link" href="#passwd" title="passwd">passwd</a> -R</strong></span>.  Using the stored
  passwords in <span class="command"><strong>set(e)uid</strong></span> does not require running
  Cygserver.  For details, see <a class="xref" href="#ntsec-setuid-overview" title="Switching the user context">the section called &#8220;Switching the user context&#8221;</a>.
  </p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="cygserver-command-line"></a>Cygserver command line options</h3></div></div></div><p>
  Options to Cygserver take the normal UNIX-style `-X' or `--longoption' form.
  Nearly all options have a counterpart in the configuration file (see below)
  so setting them on the command line isn't really necessary.  Command line
  options override settings from the Cygserver configuration file.
</p><p>
  The one-character options are prepended by a single dash, the long variants
  are prepended with two dashes.  Arguments to options are marked in angle
  brackets below.  These are not part of the actual syntax but are used only to
  denote the arguments.  Note that all arguments are required.  Cygserver
  has no options with optional arguments.
</p><p>
  The recognized options are:
</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><pre class="screen">-f, --config-file &lt;file&gt;</pre><p>  
    Use &lt;file&gt; as configuration file instead of the default configuration
    line.  The default configuration file is /etc/cygserver.conf. 
    The --help and --version options will print the default configuration
    pathname.
  </p><p>
    This option has no counterpart in the configuration file, for obvious
   reasons.
  </p></li><li class="listitem"><pre class="screen">-c, --cleanup-threads &lt;num&gt;</pre><p>  
    Number of threads started to perform cleanup tasks.  Default is 2.
    Configuration file option:  kern.srv.cleanup_threads
  </p></li><li class="listitem"><pre class="screen">-r, --request-threads &lt;num&gt;</pre><p>  
    Number of threads started to serve application requests.  Default is 10.
    The -c and -r options can be used to play with Cygserver's performance
    under heavy load conditions or on slow machines.
    Configuration file option:  kern.srv.request_threads
  </p></li><li class="listitem"><pre class="screen">-d, --debug</pre><p>  
    Log debug messages to stderr.  These will clutter your stderr output with
    a lot of information, typically only useful to developers.
  </p></li><li class="listitem"><pre class="screen">-e, --stderr</pre><p>  
    Force logging to stderr.  This is the default if stderr is connected to
    a tty.  Otherwise, the default is logging to the system log.  By using
    the -e, -E, -y, -Y options (or the appropriate settings in the
    configuration file), you can explicitly set the logging output as you
    like, even to both, stderr and syslog.
    Configuration file option:  kern.log.stderr
  </p></li><li class="listitem"><pre class="screen">-E, --no-stderr</pre><p>  
    Don't log to stderr.  Configuration file option:  kern.log.stderr
  </p></li><li class="listitem"><pre class="screen">-y, --syslog</pre><p>  
    Force logging to the system log.  This is the default, if stderr is not
    connected to a tty, e. g. redirected to a file.
    Configuration file option:  kern.log.syslog
  </p></li><li class="listitem"><pre class="screen">-Y, --no-syslog</pre><p>  
    Don't log to syslog.  Configuration file option:  kern.log.syslog
  </p></li><li class="listitem"><pre class="screen">-l, --log-level &lt;level&gt;</pre><p> 
    Set the verbosity level of the logging output.  Valid values are between
    1 and 7.  The default level is 6, which is relatively chatty.  If you set
    it to 1, you will get only messages which are printed under severe conditions,
    which will result in stopping Cygserver itself.
    Configuration file option:  kern.log.level
  </p></li><li class="listitem"><pre class="screen">-m, --no-sharedmem</pre><p>  
    Don't start XSI IPC Shared Memory support.  If you don't need XSI IPC
    Shared Memory support, you can switch it off here.
    Configuration file option:  kern.srv.sharedmem
  </p></li><li class="listitem"><pre class="screen">-q, --no-msgqueues</pre><p>  
    Don't start XSI IPC Message Queues. 
    Configuration file option:  kern.srv.msgqueues
  </p></li><li class="listitem"><pre class="screen">-s, --no-semaphores</pre><p>  
    Don't start XSI IPC Semaphores.
    Configuration file option:  kern.srv.semaphores
  </p></li><li class="listitem"><pre class="screen">-S, --shutdown</pre><p>  
    Shutdown a running daemon and exit.  Other methods are sending a SIGHUP
    to the Cygserver PID or, if running as service, calling `net stop
    cygserver' or `cygrunsrv -E cygserver'.
  </p></li><li class="listitem"><pre class="screen">-h, --help</pre><p>  
    Output usage information and exit.
  </p></li><li class="listitem"><pre class="screen">-V, --version</pre><p>  
    Output version information and exit.
  </p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="install-cygserver"></a>How to install Cygserver</h3></div></div></div><p>
  Cygserver is part of the base <span class="bold"><strong>cygwin</strong></span> package.
  Therefore, whenever Cygwin is installed, so is Cygserver.
</p><p>
  You may want to install Cygserver as a service. See
  <a class="xref" href="#start-cygserver" title="How to start Cygserver">the section called &#8220;How to start Cygserver&#8221;</a>.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="start-cygserver"></a>How to start Cygserver</h3></div></div></div><p>
  Before you run Cygserver for the first time, you should run the
  /usr/bin/cygserver-config script once.  It creates the default
  configuration file and, upon request, installs Cygserver as service.
  The script only performs a default install, with no further options
  given to Cygserver when running as service.  Due to the wide
  configurability by changing the configuration file, that's typically
  not necessary.
</p><p>
  You should always run Cygserver as a service under LocalSystem account. 
  This is the way it is installed for you by the /usr/bin/cygserver-config
  script.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="cygserver-config"></a>The Cygserver configuration file</h3></div></div></div><p>
  Cygserver has many options, which allow you to customize the server
  to your needs.  Customization is accomplished by editing the configuration
  file, which is by default /etc/cygserver.conf.  This file is only read
  once, at startup of Cygserver.  There's no option to re-read the file at
  runtime by, say, sending a signal to Cygserver.
</p><p>
  The configuration file determines how Cygserver operates.  There are
  options which set the number of threads running in parallel, options
  for setting how and what to log and options to set various maximum
  values for the IPC services.
</p><p>
  The default configuration file delivered with Cygserver is installed
  to /etc/defaults/etc.  The /usr/bin/cygserver-config script copies it to
  /etc, giving you the option to overwrite an already existing file or to
  leave it alone.  Therefore, the /etc file is safe to be changed by you,
  since it will not be overwritten by a later update installation.
</p><p>
  The default configuration file contains many comments which describe
  everything needed to understand the settings.  A comment at the start of the
  file describes the syntax rules for the file.  The default options are shown
  in the file but are commented out.
</p><p>
  It is generally a good idea to uncomment only options which you intend to
  change from the default values.  Since reading the options file on Cygserver
  startup doesn't take much time, it's also considered good practice to keep
  all other comments in the file.  This keeps you from searching for clues
  in other sources.
</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-utils"></a>Cygwin Utilities</h2></div></div></div><p>Cygwin comes with a number of command-line utilities that are used to
    manage the UNIX emulation portion of the Cygwin environment. While many of
    these reflect their UNIX counterparts, each was written specifically for
    Cygwin. You may use the long or short option names interchangeably; for
    example, <code class="literal">--help</code> and <code class="literal">-h</code> function
    identically. All of the Cygwin command-line utilities support the
    <code class="literal">--help</code> and <code class="literal">--version</code> options. </p><div class="refentry"><a name="chattr"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>chattr &#8212; Change file attributes</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">chattr</code>  [-RVf] [
	  { +  |   -  |   = }
	  <em class="replaceable"><code>MODE</code></em>
	...] [<em class="replaceable"><code>FILE</code></em>...]</p></div><div class="cmdsynopsis"><p><code class="command">chattr</code>    -H  |   -v  </p></div></div><div class="refsect1"><a name="chattr-options"></a><h2>Options</h2><pre class="screen">
  -R, --recursive     recursively apply the changes to directories and
                      their contents
  -V, --verbose       Be verbose during operation
  -f, --force         suppress error messages
  -H, --help          this help text
  -v, --version       display the program version
</pre></div><div class="refsect1"><a name="chattr-desc"></a><h2>Description</h2><p>The <span class="command"><strong>chattr</strong></span> program allows to change file
      attributes, namely DOS attributes, as well as making files sparse,
      encrypt or compress them on FS level, or setting directories'
      case sensitivity.
    </p><p>The format of 'mode' is {+-=}[acCehnprsStu]</p><p>The operator '+' causes the selected attributes to be added to the
      existing attributes of the files; '-' causes them to be removed; and
      '=' causes them to be the only attributes that the files have.
      A single '=' causes all attributes to be removed.</p><p>Supported attributes:</p><pre class="screen">
  'r', 'Readonly':      file is read-only
  'h', 'Hidden':        file or directory is hidden
  's', 'System':        file or directory that the operating system uses
  'a', 'Archive':       file or directory has the archive marker set
  't', 'Temporary':     file is being used for temporary storage
  'S', 'Sparse':        file is sparse
  'c', 'Compressed':    file or directory is compressed
  'n', 'Notindexed':    file or directory is not to be indexed by the
			content indexing service
  'e', 'Encrypted':     file is encrypted
  'p', 'Pinned':        file is pinned
  'u', 'Unpinned':      file is unpinned
  'C', 'Casesensitive': directory is handled case sensitive
    </pre></div><div class="refsect1"><a name="chattr-Cprec"></a><h2>Case-sensitive directories</h2><p>Case-sensitive directories are supported starting with
        Windows 10 1803.  They are only supported on local NTFS filesystems.
	</p><p>The system-wide availability of case-sensitive directories
	depends on the setting of the registry value of type DWORD called
	HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem\NtfsEnableDirCaseSensitivity.  The value 0 disables case-sensitive directories.
	The value 1 enables case-sensitive directories.  The value 3
	enables case-sensitive directories, too, with the additional
	requirement that a directory can only be set to case-sensitive
	if it's empty.  No other value is supported.</p><p>Removing case-sensitivity on a directory requires that the
        directory does not contain files only differing by case.</p><p>Trying to access a case-sensitive directory on a remote NTFS leads
	to all kinds of weird errors and is therefore
	<span class="emphasis"><em>not</em></span> recommended.</p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="cygcheck"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>cygcheck &#8212; List system information, check installed packages, or query package database</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">cygcheck</code>  [-v] [-h]  <em class="replaceable"><code>PROGRAM</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">cygcheck</code>   -c  [-d] [-n] [<em class="replaceable"><code>PACKAGE</code></em>]</p></div><div class="cmdsynopsis"><p><code class="command">cygcheck</code>   -s  [-r] [-v] [-h]</p></div><div class="cmdsynopsis"><p><code class="command">cygcheck</code>   -k </p></div><div class="cmdsynopsis"><p><code class="command">cygcheck</code>   -e  [--requires] [--build-reqs]  <em class="replaceable"><code>PATTERN</code></em>... </p></div><div class="cmdsynopsis"><p><code class="command">cygcheck</code>   -i  [--inst] [--curr] [--prev] [--test] [--deps] [--build-deps]  <em class="replaceable"><code>PATTERN</code></em>... </p></div><div class="cmdsynopsis"><p><code class="command">cygcheck</code>   -f   <em class="replaceable"><code>FILE</code></em>... </p></div><div class="cmdsynopsis"><p><code class="command">cygcheck</code>   -l  [<em class="replaceable"><code>PACKAGE</code></em>...]</p></div><div class="cmdsynopsis"><p><code class="command">cygcheck</code>   -p <em class="replaceable"><code>REGEXP</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">cygcheck</code>   --delete-orphaned-installation-keys </p></div><div class="cmdsynopsis"><p><code class="command">cygcheck</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="cygcheck-options"></a><h2>Options</h2><pre class="screen">
At least one command option or a PROGRAM is required, as shown above.

  PROGRAM              list library (DLL) dependencies of PROGRAM
  -c, --check-setup    show installed version of PACKAGE and verify integrity
                       (or for all installed packages if none specified)
  -d, --dump-only      do not verify packages (with -c)
  -n, --names-only     just list package names (implies -c -d)
  -s, --sysinfo        produce diagnostic system information (implies -c -d)
  -r, --registry       also scan registry for Cygwin settings (with -s)
  -k, --keycheck       perform a keyboard check session (must be run from a
                       plain console only, not from a pty/rxvt/xterm)
  -e, --search-package list all available packages matching PATTERN
                       PATTERN is a glob pattern with * and ? as wildcard chars
      search selection specifiers (multiple allowed):
      --requires       list packages depending on packages matching PATTERN
      --build-reqs     list packages depending on packages matching PATTERN
                       when building these packages
                       only the most recent available releases are checked
                       to collect requirements info
  -i, --info-package   print full info on packages matching PATTERN, installed
                       and available releases
                       PATTERN is a glob pattern with * and ? as wildcard chars
      info selection specifiers (multiple allowed):
      --inst           only print info on installed package release
      --curr           only print info on most recent available release
      --prev           only print info on older, still available releases
      --test           only print info on test releases
      --deps           additionally print package dependencies
      --build-deps     additionally print package build dependencies
  -f, --find-package   find the package to which FILE belongs
  -l, --list-package   list contents of PACKAGE (or all packages if none given)
  -p, --package-query  search for REGEXP in the entire cygwin.com package
                       repository (requires internet connectivity)
  --delete-orphaned-installation-keys
                       Delete installation keys of old, now unused
                       installations from the registry.  Requires the right
                       to change the registry.
  -v, --verbose        produce more verbose output
  -h, --help           annotate output with explanatory comments when given
                       with another command, otherwise print this help
  -V, --version        print the version of cygcheck and exit

Notes:
  -c, -f, and -l only report on packages that are currently installed.
  -i and -e report on available packages, too.  To search for files within
  uninstalled Cygwin packages, use -p.  The -p REGEXP matches package names,
  descriptions, and names of files/paths within all packages.
</pre></div><div class="refsect1"><a name="cygcheck-desc"></a><h2>Description</h2><p> The <span class="command"><strong>cygcheck</strong></span> program is a diagnostic utility for
      dealing with Cygwin programs. If you are familiar with
      <span class="command"><strong>dpkg</strong></span> or <span class="command"><strong>rpm</strong></span>,
      <span class="command"><strong>cygcheck</strong></span> is similar in many ways. (The major
      difference is that <span class="command"><strong>setup</strong></span> handles installing and
      uninstalling packages; see <a class="xref" href="#internet-setup" title="Internet Setup">the section called &#8220;Internet Setup&#8221;</a> for more
      information.) </p><p> The <code class="literal">-c</code> option checks the version and status of
      installed Cygwin packages. If you specify one or more package names,
      <span class="command"><strong>cygcheck</strong></span> will limit its output to those packages, or
      with no arguments it lists all packages. A package will be marked
      <code class="literal">Incomplete</code> if files originally installed are no longer
      present. The best thing to do in that situation is reinstall the package
      with <span class="command"><strong>setup</strong></span>. To see which files are missing, use
      the <code class="literal">-v</code> option. If you do not need to know the status
      of each package and want <span class="command"><strong>cygcheck</strong></span> to run faster, add
      the <code class="literal">-d</code> option and <span class="command"><strong>cygcheck</strong></span> will
      only output the name and version for each package. Add the
      <code class="literal">-n</code> option to output only the names of packages. </p><p> If you list one or more programs on the command line,
      <span class="command"><strong>cygcheck</strong></span> will diagnose the runtime environment of that
      program or programs, providing the names of DLL files on which the
      program depends. If you specify the <code class="literal">-s</code> option,
      <span class="command"><strong>cygcheck</strong></span> will give general system information. If you
      list one or more programs on the command line and specify
      <code class="literal">-s</code>, <span class="command"><strong>cygcheck</strong></span> will report on
      both.</p><p> The <code class="literal">-e</code> option allows to seach for available
      packages in the Cygwin distribution.  <code class="literal">PATTERN</code> is
      a glob pattern, using * and ? as wildcard characters, just as in
      filename patterns.  <code class="literal">PATTERN</code> is searched for in
      the package name and the summary of a package.
      The <code class="literal">--requires</code> and <code class="literal">--build-reqs</code>
      options allow to search for packages which have a certain dependency,
      either at runtime or at build time.</p><p> The <code class="literal">-i</code> option prints a lot of information
      available for installed packages, as well as for available packages
      in the Cygwin distribution.  <code class="literal">PATTERN</code> is a glob
      pattern, using * and ? as wildcard characters, just as in filename
      patterns.  <code class="literal">PATTERN</code> is compared against the
      package name as well as against the combined package name and version.
      With additional info selectors, <code class="literal">--inst</code>,
      <code class="literal">--curr</code>, <code class="literal">--prev</code>, and
      <code class="literal">--test</code>, allow to specify that only information
      in terms of installed, current latest available, older available,
      as well as test packages respectively, is requested.
      The <code class="literal">--deps</code> and <code class="literal">--build-deps</code>
      options allow to print additional dependency information.</p><div class="example"><a name="utils-cygcheck-eiex"></a><p class="title"><b>Example 3.4. Example <span class="command">cygcheck</span> -e/-i
      usage</b></p><div class="example-contents"><pre class="screen">
$ cygcheck -e grep
grep : search for regular expression matches in text files
grep-debuginfo : Debug info for grep
grepmail : search mailboxes for mail matching an expression
pdfgrep : Command-line utility for searching text in PDFs
pdfgrep-debuginfo : Debug info for pdfgrep
sgrep : Search indexed text regions like SGML,XML and HTML files

$ cygcheck -i --curr --deps grep
Latest available package:
-------------------------

Name        : grep
Version     : 3.8
Release     : 2
Architecture: x86_64
Size        : 401340 (392 K)
Source      : grep-3.8-2-src.tar.xz
Dependencies: bash, cygwin, libintl8, libpcre2_8_0
Summary     : search for regular expression matches in text files
Description :
GNU grep searches one or more input files for lines containing a
match to a specified pattern. By default, grep outputs the matching lines.
The GNU implementation includes several useful extensions over POSIX.

</pre></div></div><br class="example-break"><p> Note that <code class="literal">-e</code> and <code class="literal">-i</code>
      options fetch info from a distribution db file.  This file will be
      downloading on demand and refreshed if it's older than 24 hours.</p><p> The <code class="literal">-f</code> option helps you to track down which
      package a file came from, and <code class="literal">-l</code> lists all files in a
      package. For example, to find out about
      <code class="filename">/usr/bin/less</code> and its package:
    </p><div class="example"><a name="utils-cygcheck-ex"></a><p class="title"><b>Example 3.5. Example <span class="command">cygcheck</span> -f/-l
      usage</b></p><div class="example-contents"><pre class="screen">
$ cygcheck -f /usr/bin/less
less-381-1

$ cygcheck -l less
/usr/bin/less.exe
/usr/bin/lessecho.exe
/usr/bin/lesskey.exe
/usr/man/man1/less.1
/usr/man/man1/lesskey.1
</pre></div></div><br class="example-break"><p>The <code class="literal">-h</code> option prints additional helpful messages
      in the report, at the beginning of each section. It also adds table
      column headings. While this is useful information, it also adds some to
      the size of the report, so if you want a compact report or if you know
      what everything is already, just leave this out.</p><p>The <code class="literal">-v</code> option causes the output to be more
      verbose. What this means is that additional information will be reported
      which is usually not interesting, such as the internal version numbers of
      DLLs, additional information about recursive DLL usage, and if a file in
      one directory in the PATH also occurs in other directories on the PATH. </p><p>The <code class="literal">-r</code> option causes <span class="command"><strong>cygcheck</strong></span>
      to search your registry for information that is relevant to Cygwin
      programs. These registry entries are the ones that have "Cygwin" in the
      name. If you are paranoid about privacy, you may remove information from
      this report, but please keep in mind that doing so makes it harder to
      diagnose your problems.</p><p>In contrast to the other options that search the packages that are
      installed on your local system, the <code class="literal">-p</code> option can be
      used to search the entire official Cygwin package repository. It takes as
      argument a Perl-compatible regular expression which is used to match
      package names, package descriptions, and path/filenames of the contents
      of packages. This feature requires an active internet connection, since
      it must query the <code class="literal">cygwin.com</code> web site. In fact, it is
      equivalent to the search that is available on the <a class="ulink" href="https://cygwin.com/packages/" target="_top">Cygwin package listing</a>
      page.</p><p>For example, perhaps you are getting an error because you are missing
      a certain DLL and you want to know which package includes that file:
    </p><div class="example"><a name="utils-search-ex"></a><p class="title"><b>Example 3.6. Searching all packages for a
      file</b></p><div class="example-contents"><pre class="screen">
$ cygcheck -p 'cygintl-2\.dll'
Found 1 matches for 'cygintl-2\.dll'.

libintl2-0.12.1-3         GNU Internationalization runtime library

$ cygcheck -p 'libexpat.*\.a'
Found 2 matches for 'libexpat.*\.a'.

expat-1.95.7-1            XML parser library written in C
expat-1.95.8-1            XML parser library written in C

$ cygcheck -p '/ls\.exe'
Found 2 matches for '/ls\.exe'.

coreutils-5.2.1-5         GNU core utilities (includes fileutils, sh-utils and textutils)
coreutils-5.3.0-6         GNU core utilities (includes fileutils, sh-utils and textutils)
</pre></div></div><br class="example-break"><p>Note that this option takes a regular expression, not a glob or
      wildcard. This means that you need to use <code class="literal">.*</code> if you
      want something similar to the wildcard <code class="literal">*</code> commonly used
      in filename globbing. Similarly, to match the period character you should
      use <code class="literal">\.</code> since the <code class="literal">.</code> character in a
      regexp is a metacharacter that will match any character. Also be aware
      that the characters such as <code class="literal">\</code> and <code class="literal">*</code>
      are shell metacharacters, so they must be either escaped or quoted, as in
      the example above.</p><p>The third example above illustrates that if you want to match a whole
      filename, you should include the <code class="literal">/</code> path seperator. In
      the given example this ensures that filenames that happen to end in
      <code class="literal">ls.exe</code> such as <code class="literal">ncftpls.exe</code> are not
      shown. Note that this use does not mean "look for packages with
      <code class="literal">ls</code> in the root directory," since the
      <code class="literal">/</code> can match anywhere in the path. It's just there to
      anchor the match so that it matches a full filename.</p><p>By default the matching is case-sensitive. To get a case insensitive
      match, begin your regexp with <code class="literal">(?i)</code> which is a
      PCRE-specific feature. For complete documentation on Perl-compatible
      regular expression syntax and options, read the <span class="command"><strong>perlre</strong></span>
      manpage, or one of many websites such as <code class="literal">perldoc.com</code>
      that document the Perl language.</p><p>The <span class="command"><strong>cygcheck</strong></span> program should be used to send
      information about your system for troubleshooting when requested. When
      asked to run this command save the output so that you can email it, for
      example:</p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>cygcheck -s -v -r -h &gt; cygcheck_output.txt</code></strong>
</pre><p> Each Cygwin DLL stores its path and installation key in the
      registry. This allows troubleshooting of problems which could be a result
      of having multiple concurrent Cygwin installations. However, if you're
      experimenting a lot with different Cygwin installation paths, your
      registry could accumulate a lot of old Cygwin installation entries for
      which the installation doesn't exist anymore. To get rid of these
      orphaned registry entries, use the <span class="command"><strong>cygcheck
      --delete-orphaned-installation-keys</strong></span> command.</p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="cygpath"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>cygpath &#8212; Convert Unix and Windows format paths, or output system path information</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">cygpath</code>  { -d  |   -m  |   -u  |   -w  |   -t <em class="replaceable"><code>TYPE</code></em> } [-f <em class="replaceable"><code>FILE</code></em>] [-i] [<em class="replaceable"><code>CONVERSION_OPTION</code></em>...]  <em class="replaceable"><code>NAME</code></em>... </p></div><div class="cmdsynopsis"><p><code class="command">cygpath</code>  [-c <em class="replaceable"><code>HANDLE</code></em>]</p></div><div class="cmdsynopsis"><p><code class="command">cygpath</code>  [-A] { -D  |   -H  |   -O  |   -P  |   -S  |   -W  |   -F <em class="replaceable"><code>ID</code></em> }</p></div><div class="cmdsynopsis"><p><code class="command">cygpath</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="cygpath-options"></a><h2>Options</h2><pre class="screen">
Output type options:

  -d, --dos             print DOS (short) form of NAMEs (C:\PROGRA~1\)
  -m, --mixed           like --windows, but with regular slashes (C:/WINNT)
  -M, --mode            report on mode of file (currently binmode or textmode)
  -u, --unix            (default) print Unix form of NAMEs (/cygdrive/c/winnt)
  -w, --windows         print Windows form of NAMEs (C:\WINNT)
  -t, --type TYPE       print TYPE form: 'dos', 'mixed', 'unix', or 'windows'

Path conversion options:

  -a, --absolute        output absolute path
  -l, --long-name       print Windows long form of NAMEs (with -w, -m only,
                        don't mix with -r and -s)
  -r, --root-local      print Windows path with root-local path prefix (\\?\,
                        with -w only)
  -p, --path            NAME is a PATH list (i.e., '/bin:/usr/bin')
  -U, --proc-cygdrive   Emit /proc/cygdrive path instead of cygdrive prefix
                        when converting Windows path to UNIX path.
  -s, --short-name      print DOS (short) form of NAMEs (with -w, -m only,
                        don't mix with -l and -r)
  -C, --codepage CP     print DOS, Windows, or mixed pathname in Windows
                        codepage CP.  CP can be a numeric codepage identifier,
                        or one of the reserved words ANSI, OEM, or UTF8.
                        If this option is missing, cygpath defaults to the
                        character set defined by the current locale.

System information:

  -A, --allusers        use `All Users' instead of current user for -D, -P
  -D, --desktop         output `Desktop' directory and exit
  -H, --homeroot        output `Profiles' directory (home root) and exit
  -O, --mydocs          output `My Documents' directory and exit
  -P, --smprograms      output Start Menu `Programs' directory and exit
  -S, --sysdir          output system directory and exit
  -W, --windir          output `Windows' directory and exit
  -F, --folder ID       output special folder with numeric ID and exit

Other options:

  -f, --file FILE       read FILE for input; use - to read from STDIN
  -o, --option          read options from FILE as well (for use with --file)
  -c, --close HANDLE    close HANDLE (for use in captured process)
  -i, --ignore          ignore missing argument
  -h, --help            output usage information and exit
  -V, --version         output version information and exit
</pre></div><div class="refsect1"><a name="cygpath-desc"></a><h2>Description</h2><p>The <span class="command"><strong>cygpath</strong></span> program is a utility that converts
      Windows native filenames to Cygwin POSIX-style pathnames and vice versa.
      It can be used when a Cygwin program needs to pass a file name to a
      native Windows program, or expects to get a file name from a native
      Windows program. Alternatively, <span class="command"><strong>cygpath</strong></span> can output
      information about the location of important system directories in either
      format. </p><p>The <code class="literal">-u</code> and <code class="literal">-w</code> options indicate
      whether you want a conversion to UNIX (POSIX) format
      (<code class="literal">-u</code>) or to Windows format (<code class="literal">-w</code>). Use
      the <code class="literal">-d</code> to get DOS-style 8.3 file and path names. The
      <code class="literal">-m</code> option will output Windows-style format but with
      forward slashes instead of backslashes. This option is especially useful
      in shell scripts, which use backslashes as an escape character.</p><p>In combination with the <code class="literal">-w</code> and
      <code class="literal">-m</code> options, you can use the <code class="literal">-l</code> and
      <code class="literal">-s</code> options to use normal (long) or DOS-style 8.3
      (short) form. The <code class="literal">-d</code> option is identical to
      <code class="literal">-w</code> and <code class="literal">-s</code> together.</p><p>Note that short DOS-style 8.3 names are not always available.
      The generation of additional 8.3 filenames is the responsibility of
      the underlying filesystem.  Modern Windows OS allows to switch off
      8.3 filename generation and some filesystems never generate 8.3 names.
      In these cases, using the <code class="literal">-s</code> option may fail or
      may be ignored.</p><p>In combination with the <code class="literal">-w</code> option, you can use
      the <code class="literal">-r</code> option to generate root-local paths with
      leading \\?\ prefix.  This is especially useful if your path contains
      path components invalid in DOS paths, for instance file or directory
      names with trailing dot.</p><p>Note that the root-local path prefix is automatically prepended for
      paths exceeding a length of MAX_PATH (260) bytes.</p><p>The <code class="literal">-C</code> option allows to specify a Windows codepage
      to print DOS and Windows paths created with one of the
      <code class="literal">-d</code>, <code class="literal">-m</code>, or <code class="literal">-w</code>
      options. The default is to use the character set of the current locale
      defined by one of the internationalization environment variables
      <code class="envar">LC_ALL</code>, <code class="envar">LC_CTYPE</code>, or <code class="envar">LANG</code>,
      see <a class="xref" href="#setup-locale" title="Internationalization">the section called &#8220;Internationalization&#8221;</a>. This is sometimes not sufficient for
      interaction with native Windows tools, which might expect native,
      non-ASCII characters in a specific Windows codepage. Console tools, for
      instance, might expect pathnames in the current OEM codepage, while
      graphical tools like Windows Explorer might expect pathnames in the
      current ANSI codepage.</p><p>The <code class="literal">-U</code> option allows to use cygpath to create
    unambiguous Unix paths pointing outside the Cygwin tree andf thus having
    no explicit POSIX path.  Those paths usually use the cygdrive prefix.
    However, the cygdrive prefix can be changed by the user, so symbolic links
    created using the cygdrive prefix are not foolproof.  With
    <code class="literal">-U</code> cygpath will generate such paths prepended by the
    virtual <code class="filename">/proc/cygdrive</code> symbolic link, which will
    never change, so the created path is safe against changing the cygdrive
    prefix.</p><p>The <code class="literal">-C</code> option takes a single parameter:</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">ANSI</code>, to specify the current ANSI
          codepage</p></li><li class="listitem"><p><code class="literal">OEM</code>, to specify the current OEM (console)
          codepage</p></li><li class="listitem"><p><code class="literal">UTF8</code>, to specify UTF-8.</p></li><li class="listitem"><p>A numerical, decimal codepage number, for instance 936 for GBK,
          28593 for ISO-8859-3, etc. A full list of supported codepages is
          listed on the Microsoft MSDN page <a class="ulink" href="http://msdn.microsoft.com/en-us/library/dd317756(VS.85).aspx" target="_top">Code Page Identifiers</a>. A codepage of 0 is the same as if the
          <code class="literal">-C</code> hasn't been specified at all.</p></li></ul></div><p>The <code class="literal">-p</code> option means that you want to convert a
      path-style string rather than a single filename. For example, the PATH
      environment variable is semicolon-delimited in Windows, but
      colon-delimited in UNIX. By giving <code class="literal">-p</code> you are
      instructing <span class="command"><strong>cygpath</strong></span> to convert between these
      formats.</p><p>The <code class="literal">-i</code> option supresses the print out of the usage
      message if no filename argument was given. It can be used in make file
      rules converting variables that may be omitted to a proper format. Note
      that <span class="command"><strong>cygpath</strong></span> output may contain spaces (C:\Program
      Files) so should be enclosed in quotes. </p><div class="example"><a name="utils-cygpath-ex"></a><p class="title"><b>Example 3.7. Example <span class="command">cygpath</span> usage</b></p><div class="example-contents"><pre class="screen">

#!/bin/sh
if [ "${1}" = "" ];
	then
		XPATH=".";
	else
		XPATH="$(cygpath -C ANSI -w "${1}")";
fi
explorer $XPATH &amp;

</pre></div></div><br class="example-break"><p>The capital options <code class="literal">-D</code>, <code class="literal">-H</code>,
      <code class="literal">-P</code>, <code class="literal">-S</code>, and <code class="literal">-W</code>
      output directories used by Windows that are not the same on all systems,
      for example <code class="literal">-S</code> might output C:\WINNT\system32 or
      C:\Windows\System32. The <code class="literal">-H</code> shows the Windows profiles
      directory that can be used as root of home. The <code class="literal">-A</code>
      option forces use of the "All Users" directories instead of the current
      user for the <code class="literal">-D</code>, <code class="literal">-O</code> and
      <code class="literal">-P</code> options. The <code class="literal">-F</code> outputs other
      special folders specified by their internal numeric code (decimal or
      0x-prefixed hex). For valid codes and symbolic names, see the CSIDL_*
      definitions in the include file /usr/include/w32api/shlobj.h from package
      w32api. The current valid range of codes for folders is 0 (Desktop) to 59
      (CDBurn area). By default the output is in UNIX (POSIX) format; use the
      <code class="literal">-w</code> or <code class="literal">-d</code> options to get other
      formats.</p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="dumper"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>dumper &#8212; Dump core from WIN32PID to FILENAME.core</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">dumper</code>  [-n] [-d] [-q]  <em class="replaceable"><code>FILENAME</code></em>   <em class="replaceable"><code>WIN32PID</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">dumper</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="dumper-options"></a><h2>Options</h2><pre class="screen">
-n, --nokill   don't terminate the dumped process
-d, --verbose  be verbose while dumping
-h, --help     output help information and exit
-q, --quiet    be quiet while dumping (default)
-V, --version  output version information and exit
</pre></div><div class="refsect1"><a name="dumper-desc"></a><h2>Description</h2><p>The <span class="command"><strong>dumper</strong></span> utility can be used to create a core
      dump of running Windows process. This core dump can be later loaded into
      <span class="command"><strong>gdb</strong></span> and analyzed.
    </p><p>
      If the core file size limit is set to unlimited (e.g. <span class="command"><strong>ulimit -c
      unlimited</strong></span>) and an <code class="literal">error_start</code> executable
      hasn't been configured in the <code class="literal">CYGWIN</code> environment
      variable, Cygwin will automatically run <span class="command"><strong>dumper</strong></span> when a
      fatal error occurs.
    </p><p> <span class="command"><strong>dumper</strong></span> can be also be started from the command
      line to create a core dump of any running process.</p><p>For historical reasons, unless the <code class="literal">-n</code> option
    is given, after the core dump is created and when the
    <span class="command"><strong>dumper</strong></span> exits, the target process is also
    terminated.</p><p> To save space in the core dump, <span class="command"><strong>dumper</strong></span> doesn't
      write those portions of the target process's memory space that were loaded
      from executable and dll files and are unchanged (e.g. program code).
      Instead, <span class="command"><strong>dumper</strong></span> saves paths to the files which
      contain that data. When a core dump is loaded into gdb, it uses these
      paths to load the appropriate files. That means that if you create a core
      dump on one machine and try to debug it on another, you'll need to place
      identical copies of the executable and dlls in the same directories as on
      the machine where the core dump was created.
    </p></div><div class="refsect1"><a name="dumper-notes"></a><h2>Notes</h2><p>
      A Cygwin "core dump file" is an ELF file containing the mutable parts of
      the process memory and special note sections which capture the process,
      thread and loaded module context needed to recreate the process image in a
      debugger.
    </p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="getconf"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>getconf &#8212; Get configuration values</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">getconf</code>  [-v <em class="replaceable"><code>specification</code></em>]  <em class="replaceable"><code>variable_name</code></em>  [<em class="replaceable"><code>pathname</code></em>]</p></div><div class="cmdsynopsis"><p><code class="command">getconf</code>   -a  [<em class="replaceable"><code>pathname</code></em>]</p></div><div class="cmdsynopsis"><p><code class="command">getconf</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="getconf-options"></a><h2>Options</h2><pre class="screen">
  -v specification     Indicate specific version for which configuration
                       values shall be fetched.
  -a, --all            Print all known configuration values

Other options:

  -h, --help           This text
  -V, --version        Print program version and exit
</pre></div><div class="refsect1"><a name="getconf-desc"></a><h2>Description</h2><p>The <span class="command"><strong>getconf</strong></span> utility prints the value of the
      configuration variable specified by <code class="literal">variable_name</code>. If
      no <code class="literal">pathname</code> is given, <span class="command"><strong>getconf</strong></span>
      serves as a wrapper for the <code class="literal">confstr</code> and
      <code class="literal">sysconf</code> functions, supporting the symbolic constants
      defined in the <code class="literal">limits.h</code> and
      <code class="literal">unistd.h</code> headers, without their respective
      <code class="literal">_CS_</code> or <code class="literal">_SC_</code> prefixes. </p><p>If <code class="literal">pathname</code> is given, <span class="command"><strong>getconf</strong></span>
      prints the value of the configuration variable for the specified
      pathname. In this form, <span class="command"><strong>getconf</strong></span> serves as a wrapper
      for the <code class="literal">pathconf</code> function, supporting the symbolic
      constants defined in the <code class="literal">unistd.h</code> header, without the
      <code class="literal">_PC_</code> prefix. </p><p>If you specify the <code class="literal">-v</code> option, the parameter
      denotes a specification for which the value of the configuration variable
      should be printed. Note that the only specifications supported by Cygwin
      are <code class="literal">POSIX_V7_ILP32_OFFBIG</code> and the legacy
      <code class="literal">POSIX_V6_ILP32_OFFBIG</code> and
      <code class="literal">XBS5_ILP32_OFFBIG</code> equivalents.</p><p>Use the <code class="literal">-a</code> option to print a list of all available
      configuration variables for the system, or given
      <code class="literal">pathname</code>, and their values.</p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="getfacl"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>getfacl &#8212; Display file and directory access control lists (ACLs)</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">getfacl</code>  [-adceEn]  <em class="replaceable"><code>FILE</code></em>... </p></div><div class="cmdsynopsis"><p><code class="command">getfacl</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="getfacl-options"></a><h2>Options</h2><pre class="screen">
  -a, --access        display the file access control list only
  -d, --default       display the default access control list only
  -c, --omit-header   do not display the comment header
  -e, --all-effective print all effective rights
  -E, --no-effective  print no effective rights
  -n, --numeric       print numeric user/group identifiers
  -V, --version       print version and exit
  -h, --help          this help text

When multiple files are specified on the command line, a blank
line separates the ACLs for each file.
</pre></div><div class="refsect1"><a name="getfacl-desc"></a><h2>Description</h2><p> For each argument that is a regular file, special file or directory,
      <span class="command"><strong>getfacl</strong></span> displays the owner, the group, and the ACL.
      For directories <span class="command"><strong>getfacl</strong></span> displays additionally the
      default ACL. With no options specified, <span class="command"><strong>getfacl</strong></span>
      displays the filename, the owner, the group, the setuid (s), setgid (s),
      and sticky (t) bits if available, and both the ACL and the default ACL,
      if it exists. For more information on Cygwin and Windows ACLs, see
      <a class="xref" href="#ntsec" title="POSIX accounts, permission, and security">the section called &#8220;POSIX accounts, permission, and security&#8221;</a> in the Cygwin User's Guide. The format
      for ACL output is as follows:
      </p><pre class="screen">
     # file: filename
     # owner: name or uid
     # group: name or uid
     # flags: sst
     user::perm
     user:name or uid:perm
     group::perm
     group:name or gid:perm
     mask:perm
     other:perm
     default:user::perm
     default:user:name or uid:perm
     default:group::perm
     default:group:name or gid:perm
     default:mask:perm
     default:other:perm
</pre><p>
    </p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="gmondump"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>gmondump &#8212; Display formatted contents of profile data files</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">gmondump</code>  [-v] [FILENAME...]</p></div><div class="cmdsynopsis"><p><code class="command">gmondump</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="gmondump-options"></a><h2>Options</h2><pre class="screen">
  -h, --help             Display usage information and exit
  -v, --verbose          Display more file details (toggle: default false)
  -V, --version          Display version information and exit
</pre></div><div class="refsect1"><a name="gmondump-desc"></a><h2>Description</h2><p>The <span class="command"><strong>gmondump</strong></span> utility displays the contents of
      one or more profile data files. Such files usually have names starting
      with "gmon.out" and are created by a profiling program such as
      <span class="command"><strong>profiler</strong></span> or <span class="command"><strong>ssp</strong></span>. Compiling your
      gcc/g++ programs with option <code class="literal">-pg</code> also works.</p><p> By default, summary information is shown. You can use the
      option <code class="literal">-v</code> to get more detailed displays.</p><p>Note that <span class="command"><strong>gmondump</strong></span> just displays the raw data;
      one would usually use <span class="command"><strong>gprof</strong></span> to display the data in
      a useful form incorporating symbolic info such as function names and
      source line numbers.</p><p>Here is an example of <span class="command"><strong>gmondump</strong></span> operation:</p><pre class="screen">
$ gmondump gmon.out.21900.zstd.exe
file gmon.out.21900.zstd.exe, gmon version 0x51879, sample rate 100
  address range 0x100401000..0x1004cc668
  numbuckets 208282, hitbuckets 1199, hitcount 12124, numrawarcs 0
</pre></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="kill"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>kill &#8212; Send signals to processes</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">kill</code>  [-f] [-signal] [-s <em class="replaceable"><code>signal</code></em>]  <em class="replaceable"><code>pid</code></em>... </p></div><div class="cmdsynopsis"><p><code class="command">kill</code>    -l <em class="replaceable"><code>signal</code></em>  |   -L  </p></div><div class="cmdsynopsis"><p><code class="command">kill</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="kill-options"></a><h2>Options</h2><pre class="screen">
 -f, --force     force, using win32 interface if necessary
 -l, --list      print a list of signal names
 -L, --table     print a formatted table of signal names
 -s, --signal    send signal (use kill --list for a list)
 -W, --winpid    specified pids are windows PIDs, not Cygwin PIDs
                 (use with extreme caution!)
 -h, --help      output usage information and exit
 -V, --version   output version information and exit
</pre></div><div class="refsect1"><a name="kill-desc"></a><h2>Description</h2><p>The <span class="command"><strong>kill</strong></span> program allows you to send arbitrary
      signals to other Cygwin programs. The usual purpose is to end a running
      program from some other window when ^C won't work, but you can also send
      program-specified signals such as SIGUSR1 to trigger actions within the
      program, like enabling debugging or re-opening log files. Each program
      defines the signals they understand.</p><p>You may need to specify the full path to use <span class="command"><strong>kill</strong></span>
      from within some shells, including <span class="command"><strong>bash</strong></span>, the default
      Cygwin shell. This is because <span class="command"><strong>bash</strong></span> defines a
      <span class="command"><strong>kill</strong></span> builtin function; see the <span class="command"><strong>bash</strong></span>
      man page under <span class="emphasis"><em>BUILTIN COMMANDS</em></span> for more
      information. To make sure you are using the Cygwin version, try
      </p><pre class="screen">
$ /bin/kill --version
</pre><p> which should give the Cygwin
      <span class="command"><strong>kill</strong></span> version number and copyright information. </p><p>The <code class="literal">-f</code> option uses Windows functions to
      terminate processes forcefully. Use <code class="literal">-f</code> to
      terminate native Windows processes not started by Cygwin processes.
      <code class="literal">-f</code> can also be useful to terminate Cygwin processes
      not answering to SIGKILL.</p><p>Unless you specific the <code class="literal">-W</code> option, the "pid"
      values used by <span class="command"><strong>kill</strong></span> are the Cygwin pids, not the
      Windows pids. To get a list of running programs and their Cygwin pids,
      use the Cygwin <span class="command"><strong>ps</strong></span> program. <span class="command"><strong>ps -W</strong></span>
      will display <span class="emphasis"><em>all</em></span> windows pids.</p><p>The <span class="command"><strong>kill -l</strong></span> option prints the name of the given
      signal, or a list of all signal names if no signal is given.</p><p>The <span class="command"><strong>kill -L</strong></span> option is similar to <code class="literal">-l</code>,
      but it will print signal names and their corresponding numbers.</p><p>To send a specific signal, use the <code class="literal">-signN</code> option,
      either with a signal number or a signal name (minus the "SIG" part), as
      shown in these examples:</p><div class="example"><a name="utils-kill-ex"></a><p class="title"><b>Example 3.8. Using the kill command</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>kill 123</code></strong>
<code class="prompt">$</code> <strong class="userinput"><code>kill -1 123</code></strong>
<code class="prompt">$</code> <strong class="userinput"><code>kill -HUP 123</code></strong>
<code class="prompt">$</code> <strong class="userinput"><code>kill -f 123</code></strong>
</pre></div></div><br class="example-break"><p>Here is a list of available signals, their numbers, and some
      commentary on them, from the file
      <code class="literal">&lt;sys/signal.h&gt;</code>, which should be considered the
      official source of this information.</p><pre class="screen">
SIGHUP       1    hangup
SIGINT       2    interrupt
SIGQUIT      3    quit
SIGILL       4    illegal instruction (not reset when caught)
SIGTRAP      5    trace trap (not reset when caught)
SIGABRT      6    used by abort
SIGIOT       6    another name for SIGABRT
SIGEMT       7    EMT instruction
SIGFPE       8    floating point exception
SIGKILL      9    kill (cannot be caught or ignored)
SIGBUS      10    bus error
SIGSEGV     11    segmentation violation
SIGSYS      12    bad argument to system call
SIGPIPE     13    write on a pipe with no one to read it
SIGALRM     14    alarm clock
SIGTERM     15    software termination signal from kill
SIGURG      16    urgent condition on IO channel
SIGSTOP     17    sendable stop signal not from tty
SIGTSTP     18    stop signal from tty
SIGCONT     19    continue a stopped process
SIGCHLD     20    to parent on child stop or exit
SIGCLD      20    System V name for SIGCHLD
SIGTTIN     21    to readers pgrp upon background tty read
SIGTTOU     22    like TTIN for output if (tp-&gt;t_local&amp;LTOSTOP)
SIGIO       23    input/output possible
SIGPOLL     23    System V name for SIGIO
SIGXCPU     24    exceeded CPU time limit
SIGXFSZ     25    exceeded file size limit
SIGVTALRM   26    virtual time alarm
SIGPROF     27    profiling time alarm
SIGWINCH    28    window changed
SIGLOST     29    resource lost (eg, record-lock lost)
SIGPWR      29    power failure
SIGUSR1     30    user defined signal 1
SIGUSR2     31    user defined signal 2
</pre></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="ldd"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ldd &#8212; Print shared library dependencies</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">ldd</code>  [-ruv]  <em class="replaceable"><code>FILE</code></em>... </p></div><div class="cmdsynopsis"><p><code class="command">ldd</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="ldd-options"></a><h2>Options</h2><pre class="screen">
  -h, --help              print this help and exit
  -V, --version           print version information and exit
  -r, --function-relocs   process data and function relocations
                          (currently unimplemented)
  -u, --unused            print unused direct dependencies
                          (currently unimplemented)
  -v, --verbose           print all information
                          (currently unimplemented)
</pre></div><div class="refsect1"><a name="ldd-desc"></a><h2>Description</h2><p><span class="command"><strong>ldd</strong></span> prints the shared libraries (DLLs) loaded
      when running an executable or DLL.</p><div class="refsect2"><a name="ldd-desc-security"></a><h3>Security</h3><p>
	<span class="command"><strong>ldd</strong></span> invokes the Windows loader on the file specified,
	then uses the Windows debugging interface to report DLLs loaded, and
	(for executables) to attempt to stop execution before the entrypoint.
	Thus, you should never use ldd on an untrusted file.
      </p></div></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="locale"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>locale &#8212; Get locale-specific information</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">locale</code>  [-amvhV]</p></div><div class="cmdsynopsis"><p><code class="command">locale</code>  [-ck]  <em class="replaceable"><code>NAME</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">locale</code>  [-iusfnU]</p></div><div class="cmdsynopsis"><p><code class="command">locale</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="locale-options"></a><h2>Options</h2><pre class="screen">
System information:

  -a, --all-locales    List all available supported locales
  -m, --charmaps       List all available character maps
  -v, --verbose        More verbose output

Modify output format:

  -c, --category-name  List information about given category NAME
  -k, --keyword-name   Print information about given keyword NAME

Default locale information:

  -i, --input          Print current input locale
  -u, --user           Print locale of user's default UI language
  -s, --system         Print locale of system default UI language
  -f, --format         Print locale of user's regional format settings
                       (time, numeric &amp; monetary)
  -n, --no-unicode     Print system default locale for non-Unicode programs
  -U, --utf            Attach \".UTF-8\" to the result

Other options:

  -h, --help           This text
  -V, --version        Print program version and exit
</pre></div><div class="refsect1"><a name="locale-desc"></a><h2>Description</h2><p><span class="command"><strong>locale</strong></span> without parameters prints information about
      the current locale environment settings.</p><p>The <code class="literal">-i</code>, <code class="literal">-u</code>,
      <code class="literal">-s</code>, <code class="literal">-f</code>, and <code class="literal">-n</code>
      options can be used to request the various Windows locale settings. The
      purpose is to use this command in scripts to set the POSIX locale
      variables.</p><p>The <code class="literal">-i</code> option prints the current input language.
      This is called the "Input language" and basically equivalent to the
      current keyboard layout setting.</p><p>The <code class="literal">-u</code> option prints the current user's Windows UI
      locale to stdout. In Windows this setting is called the
      "Display Language".</p><p>The <code class="literal">-s</code> option prints the systems default instead.
    </p><p>The <code class="literal">-f</code> option prints the user's setting for time,
      date, number and currency. That's equivalent to the setting in the
      "Formats" or "Regional Options" tab in the "Region and Language" or
      "Regional and Language Options" dialog.</p><p>The <code class="literal">-n</code> option prints the system's default
      language used for applications which don't support Unicode.</p><p>With the <code class="literal">-U</code> option <span class="command"><strong>locale</strong></span>
      appends the string ".UTF-8" to enforce using UTF-8.  Using UTF-8
      as codeset is recommended.</p><p>Usage example:</p><pre class="screen">
bash$ export LANG=$(locale -uU)
bash$ echo $LANG
en_US.UTF-8
bash$ export LC_TIME=$(locale -fU)
bash$ echo $LC_TIME
de_DE.UTF-8
</pre><p>The <code class="literal">-a</code> option is helpful to learn which locales
      are supported by your Windows machine. It prints all available locales
      and the allowed modifiers. Example:</p><pre class="screen">
bash$ locale -a
C
C.utf8
POSIX
af_ZA
af_ZA.utf8
am_ET
am_ET.utf8
...
be_BY
be_BY.utf8
be_BY@latin
...
ca_ES
ca_ES.utf8
ca_ES@euro
catalan
...
</pre><p>The <code class="literal">-v</code> option prints more detailed information
      about each available locale. Example:</p><pre class="screen">
bash$ locale -av
locale: af_ZA           archive: /cygdrive/c/Windows/system32/kernel32.dll
-------------------------------------------------------------------------------
 language | Afrikaans
territory | South Africa
  codeset | ISO-8859-1

locale: af_ZA.utf8      archive: /cygdrive/c/Windows/system32/kernel32.dll
-------------------------------------------------------------------------------
 language | Afrikaans
territory | South Africa
  codeset | UTF-8

...

locale: ca_ES@euro      archive: /cygdrive/c/Windows/system32/kernel32.dll
-------------------------------------------------------------------------------
 language | Catalan
territory | Spain
  codeset | ISO-8859-15

locale: catalan         archive: /usr/share/locale/locale.alias
-------------------------------------------------------------------------------
 language | Catalan
territory | Spain
  codeset | ISO-8859-1

...
</pre><p>The <code class="literal">-m</code> option prints the names of the available
      charmaps supported by Cygwin to stdout.</p><p>Otherwise, if arguments are given, <span class="command"><strong>locale</strong></span> prints
      the values assigned to these arguments. Arguments can be names of locale
      categories (for instance: LC_CTYPE, LC_MONETARY), or names of keywords
      supported in the locale categories (for instance: thousands_sep,
      charmap). The <code class="literal">-c</code> option prints additionally the name
      of the category. The <code class="literal">-k</code> option prints additionally the
      name of the keyword. Example:</p><pre class="screen">
bash$ locale -ck LC_MESSAGES
LC_MESSAGES
yesexpr="^[yY]"
noexpr="^[nN]"
yesstr="yes"
nostr="no"
messages-codeset="UTF-8"
bash$ locale noexpr
^[nN]
    </pre></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="lsattr"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>lsattr &#8212; List file attributes</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">lsattr</code>  [-Radln] [<em class="replaceable"><code>FILE</code></em>...]</p></div><div class="cmdsynopsis"><p><code class="command">lsattr</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="lsattr-options"></a><h2>Options</h2><pre class="screen">
  -R, --recursive     recursively list attributes of directories and their
                      contents
  -V, --version       display the program version
  -a, --all           list all files in directories, including files that
                      start with '.'
  -d, --directory     list directories like other files, rather than listing
                      their contents.
  -l, --long          print options using long names instead of single
                      character abbreviations
  -n, --no-headers    don't print directory headers when recursing
  -h, --help          this help text
</pre></div><div class="refsect1"><a name="lsattr-desc"></a><h2>Description</h2><p>The <span class="command"><strong>lsattr</strong></span> program allows to list file
      attributes, namely DOS attributes, file sparseness, FS level
      encryption and compression state, as well as directories'
      case sensitivity setting.
    </p><p>Supported attributes:</p><pre class="screen">
  'r', 'Readonly':      file is read-only, directory is system-marked
  'h', 'Hidden':        file or directory is hidden
  's', 'System':        file or directory that the operating system uses
  'a', 'Archive':       file or directory has the archive marker set
  't', 'Temporary':     file is being used for temporary storage
  'S', 'Sparse':        file is sparse
  'r', 'Reparse':       file or directory that has a reparse point
  'c', 'Compressed':    file or directory is compressed
  'o', 'Offline':       the data of a file is moved to offline storage
  'n', 'Notindexed':    file or directory is not to be indexed by the
                        content indexing service
  'e', 'Encrypted':     file is encrypted
  'p', 'Pinned':        file is pinned
  'u', 'Unpinned':      file is unpinned
  'C', 'Casesensitive': directory is handled case sensitive
                        (Windows 10 1803 or later, local NTFS only,
                         WSL must be installed)
    </pre></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="minidumper"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>minidumper &#8212; Write minidump from WIN32PID to FILENAME.dmp</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">minidumper</code>  [-d] [-n] [-q] [-t <em class="replaceable"><code>TYPE</code></em>]  <em class="replaceable"><code>FILENAME</code></em>   <em class="replaceable"><code>WIN32PID</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">minidumper</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="minidumper-options"></a><h2>Options</h2><pre class="screen">
-t, --type     minidump type flags
-n, --nokill   don't terminate the dumped process
-d, --verbose  be verbose while dumping
-h, --help     output help information and exit
-q, --quiet    be quiet while dumping (default)
-V, --version  output version information and exit
  </pre></div><div class="refsect1"><a name="minidumper-desc"></a><h2>Description</h2><p>
    The <span class="command"><strong>minidumper</strong></span> utility can be used to create a
    minidump of a running Windows process.  This minidump can be later
    analysed using breakpad or Windows debugging tools.
  </p><p>
    <span class="command"><strong>minidumper</strong></span> can be used with cygwin's Just-In-Time
    debugging facility by adding <code class="code">error_start=minidumper</code> to the
    <code class="literal">CYGWIN</code> environment variable. If <code class="literal">CYGWIN</code>
    is set this way, then <span class="command"><strong>minidumper</strong></span> will be started whenever
    a program encounters a fatal exception.
  </p><p>
    <span class="command"><strong>minidumper</strong></span> can also be started from the command line to
    create a minidump of any running process.  For compatibility with
    <span class="command"><strong>dumper</strong></span> the target process is terminated after dumping
    unless the <code class="literal">-n</code> option is given.
  </p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="mkgroup"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>mkgroup &#8212; Write /etc/group-like output to stdout</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">mkgroup</code>  [
	    -l  |   -L  
	   [<em class="replaceable"><code>MACHINE</code></em>]
	] [-d [<em class="replaceable"><code>DOMAIN</code></em>]] [-c] [-S <em class="replaceable"><code>CHAR</code></em>] [-o <em class="replaceable"><code>OFFSET</code></em>] [-g <em class="replaceable"><code>GROUPNAME</code></em>] [-b] [-U  <em class="replaceable"><code>GROUPLIST</code></em>]</p></div><div class="cmdsynopsis"><p><code class="command">mkgroup</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="mkgroup-options"></a><h2>Options</h2><pre class="screen">
   -l,--local [machine]    Print local group accounts of \"machine\",
                           from local machine if no machine specified.
                           Automatically adding machine prefix for local
                           machine depends on settings in /etc/nsswitch.conf.
   -L,--Local [machine]    Ditto, but generate groupname with machine prefix.
   -d,--domain [domain]    Print domain groups,
                           from current domain if no domain specified.
   -c,--current            Print current group.
   -S,--separator char     For -L use character char as domain\\group
                           separator in groupname instead of default '+'.
   -o,--id-offset offset   Change the default offset (0x10000) added to gids
   -g,--group groupname    Only return information for the specified group.
                           One of -l, -d must be specified, too.
   -b,--no-builtin         Don't print BUILTIN groups.
   -U,--unix grouplist     Print UNIX groups when using -l on a UNIX Samba
                           server.  Grouplist is a comma-separated list of
                           groupnames or gid ranges (root,-25,50-100).
                           Enumerating large ranges can take a long time!
   -h,--help               Print this message.
   -v,--version            Print version information and exit.

Default is to print local groups on stand-alone machines, plus domain
groups on domain controllers and domain member machines.
</pre></div><div class="refsect1"><a name="mkgroup-desc"></a><h2>Description</h2><p>Don't use this command to generate a local /etc/group file, unless you
     really need one.  See the Cygwin User's Guide for more information.
     </p><p>The <span class="command"><strong>mkgroup</strong></span> program can be used to create a local
      <code class="filename">/etc/group</code> file.  Cygwin doesn't need this file,
      because it reads group information from the Windows account databases,
      but you can add an <code class="filename">/etc/group</code> file for instance, if
      your machine is often disconnected from its domain controller.
      </p><p>Note that this information is static, in contrast to the information
      automatically gathered by Cygwin from the Windows account databases. If
      you change the group information on your system, you'll need to regenerate
      the group file for it to have the new information.</p><p>By default, the information generated by <span class="command"><strong>mkgroup</strong></span>
      is equivalent to the information generated by Cygwin itself.  The
      <code class="literal">-d</code> and <code class="literal">-l/-L</code> options allow you to
      specify where the information comes from, some domain, or the local SAM
      of a machine. Note that you can only enumerate accounts from trusted
      domains.  Any non-trusted domain will be ignored.  Access-restrictions
      of your current account apply.  The <code class="literal">-l/-L</code> when used
      with a machine name, tries to contact that machine to enumerate local
      groups of other machines, typically outside of domains.  This scenario
      cannot be covered by Cygwin's account automatism.  If you want to use
      the <code class="literal">-L</code> option, but you don't like the default
      domain/group separator from <code class="filename">/etc/nsswitch.conf</code>,
      you can specify another separator using the <code class="literal">-S</code> option,
      for instance:</p><div class="example"><a name="utils-mkgroup-ex"></a><p class="title"><b>Example 3.9. Setting up group entry for current user with different
        domain/group separator</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>mkgroup -L server1 -S= &gt; /etc/group</code></strong>
</pre></div></div><br class="example-break"><p>For very simple needs, an entry for the current user's group can be
      created by using the option <code class="literal">-c</code>.</p><p>The <code class="literal">-o</code> option allows for (unlikely) special cases
      with multiple machines where the GIDs might match otherwise. The
      <code class="literal">-g</code> option only prints the information for one group.
      The <code class="literal">-U</code> option allows you to enumerate the standard
      UNIX groups on a Samba machine. It's used together with <code class="literal">-l
      samba-server</code> or <code class="literal">-L samba-server</code>. The normal
      UNIX groups are usually not enumerated, but they can show up as a group
      in <span class="command"><strong>ls -l</strong></span> output. </p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="mkpasswd"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>mkpasswd &#8212; Write /etc/passwd-like output to stdout</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">mkpasswd</code>  [
	    -l  |   -L  
	   [<em class="replaceable"><code>MACHINE</code></em>]
	] [-d [<em class="replaceable"><code>DOMAIN</code></em>]] [-c] [-S <em class="replaceable"><code>CHAR</code></em>] [-o <em class="replaceable"><code>OFFSET</code></em>] [-u <em class="replaceable"><code>USERNAME</code></em>] [-b] [-U  <em class="replaceable"><code>USERLIST</code></em>]</p></div><div class="cmdsynopsis"><p><code class="command">mkpassword</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="mkpasswd-options"></a><h2>Options</h2><pre class="screen">
   -l,--local [machine]    Print local user accounts of \"machine\",
                           from local machine if no machine specified.
                           Automatically adding machine prefix for local
                           machine depends on settings in /etc/nsswitch.conf.
   -L,--Local [machine]    Ditto, but generate username with machine prefix.
   -d,--domain [domain]    Print domain accounts,
                           from current domain if no domain specified.
   -c,--current            Print current user.
   -S,--separator char     For -L use character char as domain\\user
                           separator in username instead of the default '+'.
   -o,--id-offset offset   Change the default offset (0x10000) added to uids
                           of foreign local machine accounts.  Use with -l/-L.
   -u,--username username  Only return information for the specified user.
                           One of -l, -d must be specified, too
   -b,--no-builtin         Don't print BUILTIN users.
   -p,--path-to-home path  Use specified path instead of user account home dir
                           or /home prefix.
   -U,--unix userlist      Print UNIX users when using -l on a UNIX Samba
                           server.  Userlist is a comma-separated list of
                           usernames or uid ranges (root,-25,50-100).
                           Enumerating large ranges can take a long time!
   -h,--help               Displays this message.
   -V,--version            Version information and exit.

Default is to print local accounts on stand-alone machines, domain accounts
on domain controllers and domain member machines.
</pre></div><div class="refsect1"><a name="mkpasswd-desc"></a><h2>Description</h2><p>Don't use this command to generate a local /etc/passwd file, unless you
    really need one.  See the Cygwin User's Guide for more information.</p><p>The <span class="command"><strong>mkpasswd</strong></span> program can be used to create a
      <code class="filename">/etc/passwd</code> file.  Cygwin doesn't need this file,
      because it reads user information from the Windows account databases,
      but you can add an <code class="filename">/etc/passwd</code> file, for instance
      if your machine is often disconnected from its domain controller.</p><p>Note that this information is static, in contrast to the information
      automatically gathered by Cygwin from the Windows account databases. If
      you change the user information on your system, you'll need to regenerate
      the passwd file for it to have the new information.</p><p>By default, the information generated by <span class="command"><strong>mkpasswd</strong></span>
      is equivalent to the information generated by Cygwin itself.  The
      <code class="literal">-d</code> and <code class="literal">-l/-L</code> options allow you to
      specify where the information comes from, some domain, or the local SAM
      of a machine.  Note that you can only enumerate accounts from trusted
      domains.  Any non-trusted domain will be ignored.  Access-restrictions
      of your current account apply.  The <code class="literal">-l/-L</code> when used
      with a machine name, tries to contact that machine to enumerate local
      groups of other machines, typically outside of domains.  This scenario
      cannot be covered by Cygwin's account automatism.  If you want to use
      the <code class="literal">-L</code> option, but you don't like the default
      domain/group separator from <code class="filename">/etc/nsswitch.conf</code>,
      you can specify another separator using the <code class="literal">-S</code> option,
      analog to <span class="command"><strong>mkgroup</strong></span>.</p><p>For very simple needs, an entry for the current user can be created
      by using the option <code class="literal">-c</code>.</p><p>The <code class="literal">-o</code> option allows for special cases (such as
      multiple domains) where the UIDs might match otherwise. The
      <code class="literal">-p</code> option causes <span class="command"><strong>mkpasswd</strong></span> to use
      the specified prefix instead of the account home dir or <code class="literal">/home/
      </code>. For example, this command:
    </p><div class="example"><a name="utils-althome-ex"></a><p class="title"><b>Example 3.10. Using an alternate home root</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>mkpasswd -l -p "$(cygpath -H)" &gt; /etc/passwd</code></strong>
</pre></div></div><br class="example-break"><p>
      would put local users' home directories in the Windows
      'Profiles' directory. The <code class="literal">-u</code> option creates just an
      entry for the specified user. The <code class="literal">-U</code> option allows you
      to enumerate the standard UNIX users on a Samba machine. It's used
      together with <code class="literal">-l samba-server</code> or <code class="literal">-L
      samba-server</code>. The normal UNIX users are usually not enumerated,
      but they can show up as file owners in <span class="command"><strong>ls -l</strong></span> output.
    </p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="mount"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>mount &#8212; Display information about mounted filesystems, or mount a filesystem</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">mount</code>  [-f] [-o  <em class="replaceable"><code>MOUNT_OPTION,</code></em>... ]  
	  <em class="replaceable"><code>WIN32PATH</code></em>
	  <em class="replaceable"><code>POSIXPATH</code></em>
	 </p></div><div class="cmdsynopsis"><p><code class="command">mount</code>   -a </p></div><div class="cmdsynopsis"><p><code class="command">mount</code>   <em class="replaceable"><code>POSIXPATH</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">mount</code>  [-m]</p></div><div class="cmdsynopsis"><p><code class="command">mount</code>    -c <em class="replaceable"><code>POSIXPATH</code></em>  |   -p  </p></div><div class="cmdsynopsis"><p><code class="command">mount</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="mount-options"></a><h2>Options</h2><pre class="screen">
  -a, --all                     mount all filesystems mentioned in fstab
  -c, --change-cygdrive-prefix  change the cygdrive path prefix to &lt;posixpath&gt;
  -f, --force                   force mount, don't warn about missing mount
                                point directories
  -h, --help                    output usage information and exit
  -m, --mount-entries           write fstab entries to replicate mount points
                                and cygdrive prefixes
  -o, --options X[,X...]        specify mount options
  -p, --show-cygdrive-prefix    show user and/or system cygdrive path prefix
  -V, --version                 output version information and exit
</pre></div><div class="refsect1"><a name="mount-desc"></a><h2>Description</h2><p>The <span class="command"><strong>mount</strong></span> program is used to map your drives and
      shares onto Cygwin's simulated POSIX directory tree, much like as is done
      by mount commands on typical UNIX systems. However, in contrast to mount
      points given in <code class="filename">/etc/fstab</code>, mount points created or
      changed with <span class="command"><strong>mount</strong></span> are not persistent. They disappear
      immediately after the last process of the current user exited. Please see
      <a class="xref" href="#mount-table" title="The Cygwin Mount Table">the section called &#8220;The Cygwin Mount Table&#8221;</a> for more information on the concepts behind
      the Cygwin POSIX file system and strategies for using mounts. To remove
      mounts temporarily, use <span class="command"><strong>umount</strong></span></p><div class="refsect2"><a name="utils-mount"></a><h3>Using mount</h3><p>If you just type <span class="command"><strong>mount</strong></span> with no parameters, it
        will display the current mount table for you.</p><div class="example"><a name="utils-mount-ex"></a><p class="title"><b>Example 3.11. Displaying the current set of mount points</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>mount</code></strong>
C:/cygwin/bin on /usr/bin type ntfs (binary)
C:/cygwin/lib on /usr/lib type ntfs (binary)
C:/cygwin on / type ntfs (binary)
C: on /mnt/c type ntfs (binary,user,noumount)
D: on /mnt/d type fat (binary,user,noumount)
</pre></div></div><br class="example-break"><p>In this example, c:/cygwin is the POSIX root and the D drive is
        mapped to <code class="filename">/mnt/d</code>. Note that in this case, the root
        mount is a system-wide mount point that is visible to all users running
        Cygwin programs, whereas the <code class="filename">/mnt/d</code> mount is only
        visible to the current user.</p><p>The <span class="command"><strong>mount</strong></span> utility is also the mechanism for
        adding new mounts to the mount table in memory. The following example
        demonstrates how to mount the directory
        <code class="filename">//pollux/home/joe/data</code> to
        <code class="filename">/data</code> for the duration of the current session. </p><div class="example"><a name="utils-mount-add-ex"></a><p class="title"><b>Example 3.12. Adding mount points</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>ls /data</code></strong>
ls: /data: No such file or directory
<code class="prompt">$</code> <strong class="userinput"><code>mount //pollux/home/joe/data /data</code></strong>
mount: warning - /data does not exist!
<code class="prompt">$</code> <strong class="userinput"><code>mount</code></strong>
//pollux/home/joe/data on /data type smbfs (binary)
C:/cygwin/bin on /usr/bin type ntfs (binary)
C:/cygwin/lib on /usr/lib type ntfs (binary)
C:/cygwin on / type ntfs (binary)
C: on /c type ntfs (binary,user,noumount)
D: on /d type fat (binary,user,noumount)
</pre></div></div><br class="example-break"><p>A given POSIX path may only exist once in the mount table. Attempts
        to replace the mount will fail with a busy error. The
        <code class="literal">-f</code> (force) option causes the old mount to be
        silently replaced with the new one, provided the old mount point was a
        user mount point. It's not valid to replace system-wide mount points.
        Additionally, the <code class="literal">-f</code> option will silence warnings
        about the non-existence of directories at the Win32 path
        location.</p><p> The <code class="literal">-o</code> option is the method via which various
        options about the mount point may be recorded. The following options
        are available (note that most of the options are duplicates of other
        mount flags):</p><pre class="screen">
  acl        - Use the filesystem's access control lists (ACLs) to
               implement real POSIX permissions (default).
  binary     - Files default to binary mode (default).
  bind       - Allows to remount part of the file hierarchy somewhere else.
               Different from other mount calls, the first argument
               specifies an absolute POSIX path, rather than a Win32 path.
               This POSIX path is remounted to the POSIX path specified as
               the second parameter.  The conversion to a Win32 path is done
               within Cygwin immediately at the time of the call.  Note that
               symlinks are ignored while performing this path conversion.
  cygexec    - Treat all files below mount point as cygwin executables.
  dos        - Always convert leading spaces and trailing dots and spaces to
               characters in the UNICODE private use area.  This allows to use
               broken filesystems which only allow DOS filenames, even if they
               are not recognized as such by Cygwin.
  exec       - Treat all files below mount point as executable.
  ihash      - Always fake inode numbers rather than using the ones returned
               by the filesystem.  This allows to use broken filesystems which
               don't return unambiguous inode numbers, even if they are not
               recognized as such by Cygwin.
  noacl      - Ignore ACLs and fake POSIX permissions.
  nosuid     - No suid files are allowed (currently unimplemented)
  notexec    - Treat all files below mount point as not executable.
  override   - Override immutable mount points.
  posix=0    - Switch off case sensitivity for paths under this mount point.
  posix=1    - Switch on case sensitivity for paths under this mount point
               (default).
  sparse     - Switch on support for sparse files.  This option only makes
               sense on NTFS and then only if you really need sparse files.
	       This flag is always silently enabled on SSD drives.
  text       - Files default to CRLF text mode line endings.
</pre><p>For a more complete description of the mount options and the
        <code class="filename">/etc/fstab</code> file, see <a class="xref" href="#mount-table" title="The Cygwin Mount Table">the section called &#8220;The Cygwin Mount Table&#8221;</a>.</p><p>Note that all mount points added with <span class="command"><strong>mount</strong></span> are
        user mount points. System mount points can only be specified in the
        <code class="filename">/etc/fstab</code> file.</p><p>If you added mount points to <code class="filename">/etc/fstab</code> or
        your <code class="filename">/etc/fstab.d/&lt;username&gt;</code> file, you can
        add these mount points to your current user session using the
        <code class="literal">-a/--all</code> option, or by specifing the posix path
        alone on the command line. As an example, consider you added a mount
        point with the POSIX path <code class="filename">/my/mount</code>. You can add
        this mount point with either one of the following two commands to your
        current user session.</p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>mount /my/mount</code></strong>
<code class="prompt">$</code> <strong class="userinput"><code>mount -a</code></strong>
</pre><p>The first command just adds the <code class="filename">/my/mount</code>
        mount point to your current session, the <span class="command"><strong>mount -a</strong></span>
        adds all new mount points to your user session.</p><p>If you change a mount point to point to another native path, or if
        you changed the flags of a mount point, you have to
        <span class="command"><strong>umount</strong></span> the mount point first, before you can add it
        again. Please note that all such added mount points are added as user
        mount points, and that the rule that system mount points can't be
        removed or replaced in a running session still applies.</p><p>To bind a POSIX path to another POSIX path, use the
        <code class="literal">bind</code> mount flag.</p><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>mount -o bind /var /usr/var</code></strong>
</pre><p>This command makes the file hirarchy under
        <code class="filename">/var</code> additionally available under
        <code class="filename">/usr/var</code>.</p><p> The <code class="literal">-m</code> option causes the
        <span class="command"><strong>mount</strong></span> utility to output the current mount table in a
        series of fstab entries. You can save this output as a backup when
        experimenting with the mount table. Copy the output to
        <code class="filename">/etc/fstab</code> to restore the old state. It also makes
        moving your settings to a different machine much easier.</p></div><div class="refsect2"><a name="utils-cygdrive"></a><h3>Cygdrive mount points</h3><p>Whenever Cygwin cannot use any of the existing mounts to convert
        from a particular Win32 path to a POSIX one, Cygwin will, instead,
        convert to a POSIX path using a default mount point:
        <code class="filename">/cygdrive</code>. For example, if Cygwin accesses
        <code class="filename">z:\foo</code> and the z drive is not currently in the
        mount table, then <code class="filename">z:\</code> will be accessible as
        <code class="filename">/cygdrive/z</code>. The <span class="command"><strong>mount</strong></span> utility
        can be used to change this default automount prefix through the use of
        the "--change-cygdrive-prefix" option. In the following example, we
        will set the automount prefix to <code class="filename">/mnt</code>:</p><div class="example"><a name="utils-cygdrive-ex"></a><p class="title"><b>Example 3.13. Changing the default prefix</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>mount --change-cygdrive-prefix /mnt</code></strong>
</pre></div></div><br class="example-break"><p>Note that the cygdrive prefix can be set both per-user and
        system-wide, and that as with all mounts, a user-specific mount takes
        precedence over the system-wide setting. The <span class="command"><strong>mount</strong></span>
        utility creates system-wide mounts by default if you do not specify a
        type. You can always see the user and system cygdrive prefixes with the
        <code class="literal">-p</code> option. Using the <code class="literal">--options</code>
        flag with <code class="literal">--change-cygdrive-prefix</code> makes all new
        automounted filesystems default to this set of options. For instance
        (using the short form of the command line flags)</p><div class="example"><a name="utils-cygdrive-ex2"></a><p class="title"><b>Example 3.14. Changing the default prefix with specific mount options</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">$</code> <strong class="userinput"><code>mount -c /mnt -o binary,noacl</code></strong>
</pre></div></div><br class="example-break"></div><div class="refsect2"><a name="utils-limitations"></a><h3>Limitations</h3><p>Limitations: there is a hard-coded limit of 64 mount points.
        Also, although you can mount to pathnames that do not start with "/",
	there is no way to make use of such mount points.</p><p>Normally the POSIX mount point in Cygwin is an existing empty
        directory, as in standard UNIX. If this is the case, or if there is a
        place-holder for the mount point (such as a file, a symbolic link
        pointing anywhere, or a non-empty directory), you will get the expected
        behavior. Files present in a mount point directory before the mount
        become invisible to Cygwin programs. </p><p>It is sometimes desirable to mount to a non-existent directory, for
        example to avoid cluttering the root directory with names such as
        <code class="filename">a</code>, <code class="filename">b</code>, <code class="filename">c</code>
        pointing to disks. Although <span class="command"><strong>mount</strong></span> will give you a
        warning, most everything will work properly when you refer to the mount
        point explicitly. Some strange effects can occur however. For example
        if your current working directory is <code class="filename">/dir</code>, say,
        and <code class="filename">/dir/mtpt</code> is a mount point, then
        <code class="filename">mtpt</code> will not show up in an <span class="command"><strong>ls</strong></span>
        or <span class="command"><strong>echo *</strong></span> command and <span class="command"><strong>find .</strong></span> will
        not find <code class="filename">mtpt</code>. </p></div></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="newgrp"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>newgrp &#8212; change primary group for a command</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">newgrp</code>  [-] [<em class="replaceable"><code>group</code></em>] [<em class="replaceable"><code>command</code></em>
	 [<em class="replaceable"><code>args</code></em>...]
	]</p></div></div><div class="refsect1"><a name="newgrp-desc"></a><h2>Description</h2><p><span class="command"><strong>newgrp</strong></span> changes the primary group for a
        command.</p><p>If the <code class="option">-</code> flag is given as first argument, the
	user's environment will be reinitialized as though the user had logged
	in, otherwise the current environment, including current working
	directory, remains unchanged.</p><p><span class="command"><strong>newgrp</strong></span> changes the current primary group to the
        named group, or to the default group listed in /etc/passwd if no group
	name is given.</p><p>By default, the user's standard shell is started, called as login
        shell if the <code class="option">-</code> flag has been specified.  If a group
	has been given as argument, a command and its arguments can be
	specified on the command line.</p><p>The new primary group must be either the old primary group, or
        it must be part of the supplementary group list.  Setting the primary
	group to an arbitrary group is not allowed in Windows.</p></div><div class="refsect1"><a name="newgrp-seealso"></a><h2>See also</h2><p><span class="command"><strong>id</strong></span>(1), <span class="command"><strong>login</strong></span>(1).</p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="passwd"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>passwd &#8212; Change password or password attributes</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">passwd</code>   [-S] |  {
	    [ -l  |   -u ]
	     [ -c  |   -C ]
	     [ -e  |   -E ]
	     [ -p  |   -P ]
	  }  [-d <em class="replaceable"><code>SERVER</code></em>] [<em class="replaceable"><code>USER</code></em>]</p></div><div class="cmdsynopsis"><p><code class="command">passwd</code>   -R </p></div><div class="cmdsynopsis"><p><code class="command">passwd</code>    -i <em class="replaceable"><code>NUM</code></em>  |   -n <em class="replaceable"><code>MINDAYS</code></em>  |   -x <em class="replaceable"><code>MAXDAYS</code></em>  |   -L <em class="replaceable"><code>LEN</code></em>  </p></div><div class="cmdsynopsis"><p><code class="command">passwd</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="passwd-options"></a><h2>Options</h2><pre class="screen">
User operations:
  -l, --lock               lock USER's account.
  -u, --unlock             unlock USER's account.
  -c, --cannot-change      USER can't change password.
  -C, --can-change         USER can change password.
  -e, --never-expires      USER's password never expires.
  -E, --expires            USER's password expires according to system's
                           password aging rule.
  -p, --pwd-not-required   no password required for USER.
  -P, --pwd-required       password is required for USER.
  -R, --reg-store-pwd      enter password to store it in the registry for
                           later usage by services to be able to switch
                           to this user context with network credentials.

System operations:
  -i, --inactive NUM       set NUM of days before inactive accounts are disabled
                           (inactive accounts are those with expired passwords).
  -n, --minage MINDAYS     set system minimum password age to MINDAYS days.
  -x, --maxage MAXDAYS     set system maximum password age to MAXDAYS days.
  -L, --length LEN         set system minimum password length to LEN.

Other options:
  -d, --logonserver SERVER connect to SERVER (e.g. domain controller).
                           Usually not required.
  -S, --status             display password status for USER (locked, expired,
                           etc.) plus global system password settings.
  -h, --help               output usage information and exit.
  -V, --version            output version information and exit.

If no option is given, change USER's password.  If no user name is given,
operate on current user.  System operations must not be mixed with user
operations.  Don't specify a USER when triggering a system operation.

Don't specify a user or any other option together with the -R option.
Non-Admin users can only store their password if cygserver is running.
Note that storing even obfuscated passwords in the registry is not overly
secure.  Use this feature only if the machine is adequately locked down.
Don't use this feature if you don't need network access within a remote
session.  You can delete your stored password by using `passwd -R' and
specifying an empty password.
</pre></div><div class="refsect1"><a name="passwd-desc"></a><h2>Description</h2><p> <span class="command"><strong>passwd</strong></span> changes passwords for user accounts. A
      normal user may only change the password for their own account, but
      administrators may change passwords on any account.
      <span class="command"><strong>passwd</strong></span> also changes account information, such as
      password expiry dates and intervals.</p><p>For password changes, the user is first prompted for their old
      password, if one is present. This password is then encrypted and compared
      against the stored password. The user has only one chance to enter the
      correct password. The administrators are permitted to bypass this step so
      that forgotten passwords may be changed.</p><p>The user is then prompted for a replacement password.
      <span class="command"><strong>passwd</strong></span> will prompt twice for this replacement and
      compare the second entry against the first. Both entries are required to
      match in order for the password to be changed.</p><p>After the password has been entered, password aging information is
      checked to see if the user is permitted to change their password at this
      time. If not, <span class="command"><strong>passwd</strong></span> refuses to change the password
      and exits.</p><p> To get current password status information, use the
      <code class="literal">-S</code> option. Administrators can use
      <span class="command"><strong>passwd</strong></span> to perform several account maintenance
      functions (users may perform some of these functions on their own
      accounts). Accounts may be locked with the <code class="literal">-l</code> flag and
      unlocked with the <code class="literal">-u</code> flag. Similarly,
      <code class="literal">-c</code> disables a user's ability to change passwords, and
      <code class="literal">-C</code> allows a user to change passwords. For password
      expiry, the <code class="literal">-e</code> option disables expiration, while the
      <code class="literal">-E</code> option causes the password to expire according to
      the system's normal aging rules. Use <code class="literal">-p</code> to disable the
      password requirement for a user, or <code class="literal">-P</code> to require a
      password. </p><p>Administrators can also use <span class="command"><strong>passwd</strong></span> to change
      system-wide password expiry and length requirements with the
      <code class="literal">-i</code>, <code class="literal">-n</code>, <code class="literal">-x</code>, and
      <code class="literal">-L</code> options. The <code class="literal">-i</code> option is used
      to disable an account after the password has been expired for a number of
      days. After a user account has had an expired password for
      <span class="emphasis"><em>NUM</em></span> days, the user may no longer sign on to the
      account. The <code class="literal">-n</code> option is used to set the minimum
      number of days before a password may be changed. The user will not be
      permitted to change the password until <span class="emphasis"><em>MINDAYS</em></span> days
      have elapsed. The <code class="literal">-x</code> option is used to set the maximum
      number of days a password remains valid. After
      <span class="emphasis"><em>MAXDAYS</em></span> days, the password is required to be
      changed. Allowed values for the above options are 0 to 999. The
      <code class="literal">-L</code> option sets the minimum length of allowed passwords
      for users who don't belong to the administrators group to
      <span class="emphasis"><em>LEN</em></span> characters. Allowed values for the minimum
      password length are 0 to 14. In any of the above cases, a value of 0
      means `no restrictions'.</p><p> All operations affecting the current user are by default run against
      the logon server of the current user (taken from the environment variable
      <code class="envar">LOGONSERVER</code>. When password or account information of other
      users should be changed, the logon server is evaluated automatically.
      In rare cases, it might be necessary to switch to another domain
      controller to perform the action.  In this case, use the
      <code class="literal">-d</code> option to specify the machine to run the command
      against. Note that the current user must have account operator permissions
      to perform user account changes in a domain. </p><p>Users can use the <span class="command"><strong>passwd -R</strong></span> to enter a password
      which then gets stored in a special area of the registry on the local
      system, which is also used by Windows to store passwords of accounts
      running Windows services. When a privileged Cygwin application calls the
      <span class="command"><strong>set{e}uid(user_id)</strong></span> system call, Cygwin checks if a
      password for that user has been stored in this registry area. If so, it
      uses this password to switch to this user account using that password.
      This allows you to logon through, for instance, <span class="command"><strong>ssh</strong></span>
      with public key authentication and get a full qualified user token with
      all credentials for network access. However, the method has some
      drawbacks security-wise. This is explained in more detail in <a class="xref" href="#ntsec" title="POSIX accounts, permission, and security">the section called &#8220;POSIX accounts, permission, and security&#8221;</a>.</p><p>Please note that storing passwords in that registry area is a
      privileged operation which only administrative accounts are allowed to
      do. Administrators can enter the password for other user accounts into
      the registry by specifying the username on the commandline. If normal,
      non-admin users should be allowed to enter their passwords using
      <span class="command"><strong>passwd -R</strong></span>, it's required to run
      <span class="command"><strong>cygserver</strong></span> as a service under the LocalSystem account
      before running <span class="command"><strong>passwd -R</strong></span>. This only affects storing
      passwords. Using passwords in privileged processes does not require
      <span class="command"><strong>cygserver</strong></span> to run.</p><p>Limitations: Users may not be able to change their password on some
      systems.</p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="pldd"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>pldd &#8212; List dynamic shared objects loaded into a process</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">pldd</code>   <em class="replaceable"><code>PID</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">pldd</code>    -?  |   --usage  |   -V  </p></div></div><div class="refsect1"><a name="pldd-options"></a><h2>Options</h2><pre class="screen">
  -?, --help                 Give this help list
      --usage                Give a short usage message
  -V, --version              Print program version
</pre></div><div class="refsect1"><a name="pldd-desc"></a><h2>Description</h2><p><span class="command"><strong>pldd</strong></span> prints the shared libraries (DLLs) loaded by
      the process with the given PID.</p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="profiler"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>profiler &#8212; Sampling profiler of Cygwin programs with their DLLs</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">profiler</code>  [-defw] [-o <em class="replaceable"><code>FILENAME</code></em>] [-s <em class="replaceable"><code>N</code></em>]   
	     <em class="replaceable"><code>PROGRAM</code></em> 
	      <em class="replaceable"><code>ARG</code></em>... 
	    |   -p <em class="replaceable"><code>PID</code></em>  </p></div><div class="cmdsynopsis"><p><code class="command">profiler</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="profiler-options"></a><h2>Options</h2><pre class="screen">
  -d, --debug            Display debugging messages (toggle: default false)
  -e, --events           Display Windows DEBUG_EVENTS (toggle: default false)
  -f, --fork-profile     Profiles child processes (toggle: default false)
  -h, --help             Display usage information and exit
  -o, --output=FILENAME  Write output to file FILENAME rather than stdout
  -p, --pid=N            Attach to running program with Cygwin pid N
                         ...                    or with Windows pid -N
  -s, --sample-rate=N    Set IP sampling rate to N Hz (default 100)
  -v, --verbose          Display more status messages (toggle: default false)
  -V, --version          Display version information and exit
  -w, --new-window       Launch given command in a new window
</pre></div><div class="refsect1"><a name="profiler-desc"></a><h2>Description</h2><p>The <span class="command"><strong>profiler</strong></span> utility executes a given program and
      any children of that program, collecting the location of the CPU
      instruction pointer (IP) many times per second. (It is optional to
      collect this info from child processes.) This info gives a profile
      of the program's execution, showing where the most time is being spent.
      This profiling technique is called "IP sampling".</p><p>A novel feature of <span class="command"><strong>profiler</strong></span> is that time spent in
      DLLs loaded with or by your program is profiled too. You use
      <span class="command"><strong>gprof</strong></span> to process and display the resulting profile
      information. In this fashion you can determine whether your own code,
      the Cygwin DLL, or another DLL has "hot spots" that might benefit from
      tuning.</p><p>(See also <span class="command"><strong>ssp</strong></span>, another profiler that
      operates in a different fashion: stepping by instruction. This can
      provide a different view on your program's operation.)</p><p>Here is an example of <span class="command"><strong>profiler</strong></span> operation:</p><pre class="screen">
$ profiler du -khs .
22G     .
97 samples across 83 buckets written to gmon.out.5908.cygwin1.dll
4 samples across 4 buckets written to gmon.out.5908.KernelBase.dll
1 sample across 1 bucket written to gmon.out.5908.kernel32.dll
7318 samples across 42 buckets written to gmon.out.5908.ntdll.dll
5 samples across 4 buckets written to gmon.out.5908.du.exe
</pre></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="ps"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ps &#8212; Report process status</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">ps</code>  [-aeflsW] [-u <em class="replaceable"><code>UID</code></em>] [-p <em class="replaceable"><code>PID</code></em>]</p></div><div class="cmdsynopsis"><p><code class="command">ps</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="ps-options"></a><h2>Options</h2><pre class="screen">
 -a, --all       show processes of all users
 -e, --everyone  show processes of all users
 -f, --full      show process uids, ppids and command line
 -h, --help      output usage information and exit
 -l, --long      show process uids, ppids, pgids, winpids
 -p, --process   show information for specified PID
 -s, --summary   show process summary
 -u, --user      list processes owned by UID
 -V, --version   output version information and exit
 -W, --windows   show windows as well as cygwin processes
With no options, ps outputs the long format by default
</pre></div><div class="refsect1"><a name="ps-desc"></a><h2>Description</h2><p>The <span class="command"><strong>ps</strong></span> program gives the status of all the Cygwin
      processes running on the system (ps = "process status"). Due to the
      limitations of simulating a POSIX environment under Windows, there is
      little information to give. </p><p> The PID column is the process ID you need to give to the
      <span class="command"><strong>kill</strong></span> command. The PPID is the parent process ID, and
      PGID is the process group ID. The WINPID column is the process ID
      displayed by NT's Task Manager program. The TTY column gives which
      pseudo-terminal a process is running on, or a <code class="literal">'?'</code> for
      services. The UID column shows which user owns each process. STIME is the
      time the process was started, and COMMAND gives the name of the program
      running. Listings may also have a status flag in column zero;
      <code class="literal">S</code> means stopped or suspended (in other words, in the
      background), <code class="literal">I</code> means waiting for input or interactive
      (foreground), and <code class="literal">O</code> means waiting to output. </p><p> By default, <span class="command"><strong>ps</strong></span> will only show processes owned by
      the current user. With either the <code class="literal">-a</code> or
      <code class="literal">-e</code> option, all user's processes (and system processes)
      are listed. There are historical UNIX reasons for the synonomous options,
      which are functionally identical. The <code class="literal">-f</code> option
      outputs a "full" listing with usernames for UIDs and the command line
      of the process, rather than just the full path to the executable. The
      <code class="literal">-l</code> option is the default display mode, showing a
      "long" listing with all the above columns. The other display option is
      <code class="literal">-s</code>, which outputs a shorter listing of just PID, TTY,
      STIME, and COMMAND. The <code class="literal">-u</code> option allows you to show
      only processes owned by a specific user. The <code class="literal">-p</code> option
      allows you to show information for only the process with the specified
      PID. The <code class="literal">-W</code> option causes <span class="command"><strong>ps</strong></span> show
      non-Cygwin Windows processes as well as Cygwin processes. The WINPID is
      also the PID, and they can be killed with the Cygwin
      <span class="command"><strong>kill</strong></span> command's <code class="literal">-f</code> option. </p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="regtool"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>regtool &#8212; View or edit the Windows registry</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">regtool</code>  [-qvwW]  add|check|get|list|remove|unset|load|unload|save   <em class="replaceable"><code>KEY</code></em>  [ <em class="replaceable"><code>PATH</code></em>  |   <em class="replaceable"><code>DATA</code></em>... ]</p></div><div class="cmdsynopsis"><p><code class="command">regtool</code>   add   <em class="replaceable"><code>KEY\SUBKEY</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">regtool</code>   check   <em class="replaceable"><code>KEY</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">regtool</code>  [-bnx]  get   <em class="replaceable"><code>KEY</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">regtool</code>  [-klp]  list   <em class="replaceable"><code>KEY</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">regtool</code>   remove   <em class="replaceable"><code>KEY</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">regtool</code>  [-bDeimnQsf]  set   <em class="replaceable"><code>KEY\VALUE</code></em>  [<em class="replaceable"><code>DATA</code></em>...]</p></div><div class="cmdsynopsis"><p><code class="command">regtool</code>  [-f]  unset   <em class="replaceable"><code>KEY\VALUE</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">regtool</code>   load   <em class="replaceable"><code>KEY\SUBKEY</code></em>   <em class="replaceable"><code>PATH</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">regtool</code>   unload   <em class="replaceable"><code>KEY\SUBKEY</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">regtool</code>   save   <em class="replaceable"><code>KEY\SUBKEY</code></em>   <em class="replaceable"><code>PATH</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">regtool</code>  [-f]  restore   <em class="replaceable"><code>KEY/SUBKEY</code></em>   <em class="replaceable"><code>PATH</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">regtool</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="regtool-options"></a><h2>Options</h2><pre class="screen">
Actions:

 add KEY\SUBKEY             add new SUBKEY
 check KEY                  exit 0 if KEY exists, 1 if not
 get KEY\VALUE              prints VALUE to stdout
 list KEY                   list SUBKEYs and VALUEs
 remove KEY                 remove KEY
 set KEY\VALUE [data ...]   set VALUE
 unset KEY\VALUE            removes VALUE from KEY
 load KEY\SUBKEY PATH       load hive from PATH into new SUBKEY
 unload KEY\SUBKEY          unload hive and remove SUBKEY
 save KEY\SUBKEY PATH       save SUBKEY into new file PATH
 restore KEY\SUBKEY PATH    restore SUBKEY from file PATH

Options for 'list' Action:

 -k, --keys           print only KEYs
 -l, --list           print only VALUEs
 -p, --postfix        like ls -p, appends '\' postfix to KEY names

Options for 'get' Action:

 -b, --binary         print REG_BINARY data as hex bytes
 -n, --none           print data as stream of bytes as stored in registry
 -x, --hex            print numerical data as hex numbers

Options for 'set' Action:

 -b, --binary         set type to REG_BINARY (hex args or '-')
 -D, --dword-be       set type to REG_DWORD_BIG_ENDIAN
 -e, --expand-string  set type to REG_EXPAND_SZ
 -i, --integer        set type to REG_DWORD
 -m, --multi-string   set type to REG_MULTI_SZ
 -n, --none           set type to REG_NONE
 -Q, --qword          set type to REG_QWORD
 -s, --string         set type to REG_SZ

Options for 'set' and 'unset' Actions:

 -K&lt;c&gt;, --key-separator[=]&lt;c&gt;  set key separator to &lt;c&gt; instead of '\'

Options for 'restore' action:

 -f, --force    restore even if open handles exist at or beneath the location
                in the registry hierarchy to which KEY\SUBKEY points

Other Options:

 -h, --help     output usage information and exit
 -q, --quiet    no error output, just nonzero return if KEY/VALUE missing
 -v, --verbose  verbose output, including VALUE contents when applicable
 -w, --wow64    access 64 bit registry view (ignored on 32 bit Windows)
 -W, --wow32    access 32 bit registry view (ignored on 32 bit Windows)
 -V, --version  output version information and exit

KEY is in the format [host]\prefix\KEY\KEY\VALUE, where host is optional
remote host in either \\hostname or hostname: format and prefix is any of:
  root     HKCR  HKEY_CLASSES_ROOT (local only)
  config   HKCC  HKEY_CURRENT_CONFIG (local only)
  user     HKCU  HKEY_CURRENT_USER (local only)
  machine  HKLM  HKEY_LOCAL_MACHINE
  users    HKU   HKEY_USERS

You can use forward slash ('/') as a separator instead of backslash, in
that case backslash is treated as an escape character.
You can also supply the registry path prefix /proc/registry{,32,64}/ to
use path completion.
Example:
  regtool list '/HKLM/SOFTWARE/Classes/MIME/Database/Content Type/audio\\/wav'
</pre></div><div class="refsect1"><a name="regtool-desc"></a><h2>Description</h2><p>The <span class="command"><strong>regtool</strong></span> program allows shell scripts to access
      and modify the Windows registry. Note that modifying the Windows registry
      is dangerous, and carelessness here can result in an unusable system. Be
      careful.</p><p>The <code class="literal">-v</code> option means "verbose". For most commands,
      this causes additional or lengthier messages to be printed. Conversely,
      the <code class="literal">-q</code> option supresses error messages, so you can use
      the exit status of the program to detect if a key exists or not (for
      example).</p><p>The <code class="literal">-w</code> option allows you to access the 64 bit view
      of the registry. Several subkeys exist in a 32 bit and a 64 bit version
      when running on Windows 64. Since Cygwin is running in 32 bit mode, it
      only has access to the 32 bit view of these registry keys. When using the
      <code class="literal">-w</code> switch, the 64 bit view is used and
      <span class="command"><strong>regtool</strong></span> can access the entire registry. This option is
      simply ignored when running on 32 bit Windows versions. </p><p>The <code class="literal">-W</code> option allows you to access the 32 bit view
      on the registry. The purpose of this option is mainly for symmetry. It
      permits creation of OS agnostic scripts which would also work in a
      hypothetical 64 bit version of Cygwin.</p><p>You must provide <span class="command"><strong>regtool</strong></span> with an
      <span class="emphasis"><em>action</em></span> following options (if any). Currently, the
      action must be <code class="literal">add</code>, <code class="literal">set</code>,
      <code class="literal">check</code>, <code class="literal">get</code>,
      <code class="literal">list</code>, <code class="literal">remove</code>,
      <code class="literal">set</code>, or <code class="literal">unset</code>. </p><p>The <code class="literal">add</code> action adds a new key. The
      <code class="literal">check</code> action checks to see if a key exists (the exit
      code of the program is zero if it does, nonzero if it does not). The
      <code class="literal">get</code> action gets the value of a key, and prints it (and
      nothing else) to stdout. Note: if the value doesn't exist, an error
      message is printed and the program returns a non-zero exit code. If you
      give <code class="literal">-q</code>, it doesn't print the message but does return
      the non-zero exit code.</p><p> The <code class="literal">list</code> action lists the subkeys and values
      belonging to the given key. With <code class="literal">list</code>, the
      <code class="literal">-k</code> option instructs <span class="command"><strong>regtool</strong></span> to
      print only KEYs, and the <code class="literal">-l</code> option to print only
      VALUEs. The <code class="literal">-p</code> option postfixes a
      <code class="literal">'/'</code> to each KEY, but leave VALUEs with no postfix. The
      <code class="literal">remove</code> action removes a key. Note that you may need to
      remove everything in the key before you may remove it, but don't rely on
      this stopping you from accidentally removing too much. </p><p>The <code class="literal">get</code> action prints a value within a key. With
      the <code class="literal">-b</code> option, data is printed as hex bytes.
      <code class="literal">-n</code> allows to print the data as a typeless stream of
      bytes. Integer values (REG_DWORD, REG_QWORD) are usually printed as
      decimal values. The <code class="literal">-x</code> option allows to print the
      numbers as hexadecimal values.</p><p>The <code class="literal">set</code> action sets a value within a key.
      <code class="literal">-b</code> means it's binary data (REG_BINARY). The binary
      values are specified as hex bytes in the argument list. If the argument
      is <code class="literal">'-'</code>, binary data is read from stdin instead.
      <code class="literal">-d</code> or <code class="literal">-i</code> means the value is a 32
      bit integer value (REG_DWORD). <code class="literal">-D</code> means the value is a
      32 bit integer value in Big Endian representation (REG_DWORD_BIG_ENDIAN).
      <code class="literal">-Q</code> means the value is a 64 bit integer value
      (REG_QWORD). <code class="literal">-s</code> means the value is a string (REG_SZ).
      <code class="literal">-e</code> means it's an expanding string (REG_EXPAND_SZ) that
      contains embedded environment variables. <code class="literal">-m</code> means it's
      a multi-string (REG_MULTI_SZ). If you don't specify one of these,
      <span class="command"><strong>regtool</strong></span> tries to guess the type based on the value you
      give. If it looks like a number, it's a DWORD, unless it's value doesn't
      fit into 32 bit, in which case it's a QWORD. If it starts with a percent,
      it's an expanding string. If you give multiple values, it's a
      multi-string. Else, it's a regular string.</p><p>The <code class="literal">unset</code> action removes a value from a
      key.</p><p>The <code class="literal">load</code> action adds a new subkey and loads the
      contents of a registry hive into it. The parent key must be
      HKEY_LOCAL_MACHINE or HKEY_USERS. The <code class="literal">unload</code> action
      unloads the file and removes the subkey. </p><p>The <code class="literal">save</code> action saves a subkey into a registry
      file.  Ideally you append the suffix <code class="filename">.reg</code> to the file
      so it gets automatically recognized as registry file by
      <span class="command"><strong>Windows Explorer</strong></span>.</p><p>The <code class="literal">restore</code> action restores a registry subkey
      from a file saved via the aforementioned <code class="literal">save</code> action.
      </p><p> By default, the last "\" or "/" is assumed to be the separator
      between the key and the value. You can use the <code class="literal">-K</code>
      option to provide an alternate key/value separator character. </p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="setfacl"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>setfacl &#8212; Modify file and directory access control lists (ACLs)</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">setfacl</code>  [-n] { -f <em class="replaceable"><code>ACL_FILE</code></em>  |   -s <em class="replaceable"><code>acl_entries</code></em> }  <em class="replaceable"><code>FILE</code></em>... </p></div><div class="cmdsynopsis"><p><code class="command">setfacl</code>  [-n] {
	   [-bk] |  [-x <em class="replaceable"><code>acl_entries</code></em>] 
	   [-m <em class="replaceable"><code>acl_entries</code></em>]
	}  <em class="replaceable"><code>FILE</code></em>... </p></div><div class="cmdsynopsis"><p><code class="command">setfacl</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="setfacl-options"></a><h2>Options</h2><pre class="screen">
  -b, --remove-all       remove all extended ACL entries
  -x, --delete           delete one or more specified ACL entries
  -f, --set-file         set ACL entries for FILE to ACL entries read
                         from ACL_FILE
  -k, --remove-default   remove all default ACL entries
  -m, --modify           modify one or more specified ACL entries
  -n, --no-mask          don't recalculate the effective rights mask
      --mask             do recalculate the effective rights mask
  -s, --set              set specified ACL entries on FILE
  -V, --version          print version and exit
  -h, --help             this help text

At least one of (-b, -x, -f, -k, -m, -s) must be specified
</pre></div><div class="refsect1"><a name="setfacl-desc"></a><h2>Description</h2><p> For each file given as parameter, <span class="command"><strong>setfacl</strong></span> will
      either replace its complete ACL (<code class="literal">-s</code>,
      <code class="literal">-f</code>), or it will add, modify, or delete ACL entries.
      For more information on Cygwin and Windows ACLs, see
      <a class="xref" href="#ntsec" title="POSIX accounts, permission, and security">the section called &#8220;POSIX accounts, permission, and security&#8221;</a> in the Cygwin User's Guide. </p><p> Acl_entries are one or more comma-separated ACL entries from the
      following list:
      </p><pre class="screen">
         u[ser]::perm
         u[ser]:uid:perm
         g[roup]::perm
         g[roup]:gid:perm
         m[ask]::perm
         o[ther]::perm
</pre><p>
      Default entries are like the above with the additional default
      identifier. For example:
      </p><pre class="screen">
         d[efault]:u[ser]:uid:perm
</pre><p> </p><p> <span class="emphasis"><em>perm</em></span> is either a 3-char permissions string in
      the form "rwx" with the character <code class="literal">'-'</code> for no
      permission or it is the octal representation of the permissions, a value
      from 0 (equivalent to "---") to 7 ("rwx"). <span class="emphasis"><em>uid</em></span> is a
      user name or a numerical uid. <span class="emphasis"><em>gid</em></span> is a group name or
      a numerical gid. </p><p> The following options are supported: </p><p> <code class="literal">-b</code>,<code class="literal">--remove-all</code> Remove all
      extended ACL entries.  The base ACL entries of the owner, group and
      others are retained.  This option can be combined with the
      <code class="literal">-k</code>,<code class="literal">--remove-default</code> option
      to delete all non-standard POSIX permissions.</p><p> <code class="literal">-x</code>,<code class="literal">--delete</code> Delete one or
      more specified entries from the file's ACL. The owner, group and others
      entries must not be deleted.  Acl_entries to be deleted should be
      specified without permissions, as in the following list:
      </p><pre class="screen">
         u[ser]:uid[:]
         g[roup]:gid[:]
         m[ask][:]
         d[efault]:u[ser][:uid]
         d[efault]:g[roup][:gid]
         d[efault]:m[ask][:]
         d[efault]:o[ther][:]
</pre><p> </p><p> <code class="literal">-f</code>,<code class="literal">--set-file</code> Take the Acl_entries
      from ACL_FILE one per line. Whitespace characters are ignored, and the
      character "#" may be used to start a comment. The special filename "-"
      indicates reading from stdin. Note that you can use this with
      <span class="command"><strong>getfacl</strong></span> and <span class="command"><strong>setfacl</strong></span> to copy ACLs
      from one file to another:
      </p><pre class="screen">
$ getfacl source_file | setfacl -f - target_file
</pre><p> </p><p> Required entries are: one user entry for the owner of the file, one
      group entry for the group of the file, and one other entry. </p><p> If additional user and group entries are given: a mask entry for the
      file group class of the file, and no duplicate user or group entries with
      the same uid/gid. </p><p> If it is a directory: one default user entry for the owner of the
      file, one default group entry for the group of the file, one default mask
      entry for the file group class, and one default other entry. </p><p> <code class="literal">-k</code>,<code class="literal">--remove-default</code> Remove all
      default ACL entries. If no default ACL entries exist, no warnings are
      issued.  This option can be combined with the
      <code class="literal">-b</code>,<code class="literal">--remove-all</code> option
      to delete all non-standard POSIX permissions.</p><p> <code class="literal">-m</code>,<code class="literal">--modify</code> Add or modify one
      or more specified ACL entries. Acl_entries is a comma-separated list of
      entries from the same list as above. </p><p> <code class="literal">-n</code>,<code class="literal">--no-mask</code> Valid in
      conjunction with -m.  Do not recalculate the effective rights mask.
      The default behavior of setfacl is to recalculate the ACL mask entry,
      unless a mask entry was explicitly given.  The mask entry is set to
      the union of all permissions of the owning group, and all named user
      and group entries.  (These are exactly the entries affected by the
      mask entry). </p><p> <code class="literal">--mask</code> Valid in conjunction with -m.  Do
      recalculate the effective rights mask, even if an ACL mask entry was
      explicitly given. (See the -n option.) </p><p> <code class="literal">-s</code>,<code class="literal">--set</code> Like
      <code class="literal">-f</code>, but set the file's ACL with Acl_entries
      specified in a comma-separated list on the command line. </p><p> While the <code class="literal">-x</code> and <code class="literal">-m</code> options
      may be used in the same command, the <code class="literal">-f</code> and
      <code class="literal">-s</code> options may be used only exclusively. </p><p> Directories may contain default ACL entries. Files created in a
      directory that contains default ACL entries will have permissions
      according to the combination of the current umask, the explicit
      permissions requested and the default ACL entries.</p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="setmetamode"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>setmetamode &#8212; Get or set keyboard meta mode</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">setmetamode</code>  [ metabit  |   escprefix ]</p></div><div class="cmdsynopsis"><p><code class="command">setmetamode</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="setmetamode-options"></a><h2>Options</h2><pre class="screen">
  Without argument, it shows the current meta key mode.

  metabit|meta|bit     The meta key sets the top bit of the character.
  escprefix|esc|prefix The meta key sends an escape prefix.

Other options:

  -h, --help           This text
  -V, --version        Print program version and exit
</pre></div><div class="refsect1"><a name="setmetamode-desc"></a><h2>Description</h2><p><span class="command"><strong>setmetamode</strong></span> can be used to determine and set the
      key code sent by the meta (aka <code class="literal">Alt</code>) key.</p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="ssp"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ssp &#8212; The Single Step Profiler</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">ssp</code>  [-cdelstv]  <em class="replaceable"><code>low_pc</code></em>   <em class="replaceable"><code>high_pc</code></em>   <em class="replaceable"><code>command</code></em>... </p></div><div class="cmdsynopsis"><p><code class="command">ssp</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="ssp-options"></a><h2>Options</h2><pre class="screen">
 -c, --console-trace  trace every EIP value to the console. *Lots* slower.
 -d, --disable        disable single-stepping by default; use
                      OutputDebugString ("ssp on") to enable stepping
 -e, --enable         enable single-stepping by default; use
                      OutputDebugString ("ssp off") to disable stepping
 -h, --help           output usage information and exit
 -l, --dll            enable dll profiling.  A chart of relative DLL usage
                      is produced after the run.
 -s, --sub-threads    trace sub-threads too.  Dangerous if you have
                      race conditions.
 -t, --trace-eip      trace every EIP value to a file TRACE.SSP.  This
                      gets big *fast*.
 -v, --verbose        output verbose messages about debug events.
 -V, --version        output version information and exit

Example: ssp 0x401000 0x403000 hello.exe
</pre></div><div class="refsect1"><a name="ssp-desc"></a><h2>Description</h2><p> The SSP is a program that uses the Win32 debug API to run a program
      one ASM instruction at a time. It records the location of each
      instruction used, how many times that instruction is used, and all
      function calls. The results are saved in a format that is usable by the
      profiling program <span class="command"><strong>gprof</strong></span>, although
      <span class="command"><strong>gprof</strong></span> will claim the values are seconds, they really
      are instruction counts. More on that later. </p><p>(See also <span class="command"><strong>profiler</strong></span>, another profiler that
      operates in a different fashion: IP sampling. This can provide a
      different view on your program's operation.)</p><p> Because the SSP was originally designed to profile the Cygwin DLL,
      it does not automatically select a block of code to report statistics on.
      You must specify the range of memory addresses to keep track of manually,
      but it's not hard to figure out what to specify. Use the "objdump"
      program to determine the bounds of the target's ".text" section. Let's
      say we're profiling cygwin1.dll. Make sure you've built it with debug
      symbols (else <span class="command"><strong>gprof</strong></span> won't run) and run objdump like
      this: </p><pre class="screen">
$ objdump -h cygwin1.dll
</pre><p> It will print a report
      like this:
      </p><pre class="screen">
cygwin1.dll:     file format pei-i386

Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .text         0007ea00  61001000  61001000  00000400  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE, DATA
  1 .data         00008000  61080000  61080000  0007ee00  2**2
                  CONTENTS, ALLOC, LOAD, DATA
  . . .
</pre><p> </p><p> The only information we're concerned with are the VMA of the .text
      section and the VMA of the section after it (sections are usually
      contiguous; you can also add the Size to the VMA to get the end address).
      In this case, the VMA is 0x61001000 and the ending address is either
      0x61080000 (start of .data method) or 0x6107fa00 (VMA+Size method). </p><p> There are two basic ways to use SSP - either profiling a whole
      program, or selectively profiling parts of the program. </p><p> To profile a whole program, just run <span class="command"><strong>ssp</strong></span> without
      options. By default, it will step the whole program. Here's a simple
      example, using the numbers above:
      </p><pre class="screen">
$ ssp 0x61001000 0x61080000 hello.exe
</pre><p> This will step
      the whole program. It will take at least 8 minutes on a PII/300 (yes,
      really). When it's done, it will create a file called "gmon.out". You can
      turn this data file into a readable report with <span class="command"><strong>gprof</strong></span>:
      </p><pre class="screen">
$ gprof -b cygwin1.dll
</pre><p> The "-b" means 'skip the help
      pages'. You can omit this until you're familiar with the report layout.
      The <span class="command"><strong>gprof</strong></span> documentation explains a lot about this
      report, but <span class="command"><strong>ssp</strong></span> changes a few things. For example, the
      first part of the report reports the amount of time spent in each
      function, like this:
      </p><pre class="screen">
Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total
 time   seconds   seconds    calls  ms/call  ms/call  name
 10.02    231.22    72.43       46  1574.57  1574.57  strcspn
  7.95    288.70    57.48      130   442.15   442.15  strncasematch
</pre><p>
      The "seconds" columns are really CPU opcodes, 1/100 second per opcode.
      So, "231.22" above means 23,122 opcodes. The ms/call values are 10x too
      big; 1574.57 means 157.457 opcodes per call. Similar adjustments need to
      be made for the "self" and "children" columns in the second part of the
      report. </p><p> OK, so now we've got a huge report that took a long time to
      generate, and we've identified a spot we want to work on optimizing.
      Let's say it's the time() function. We can use SSP to selectively profile
      this function by using OutputDebugString() to control SSP from within the
      program. Here's a sample program:
      </p><pre class="screen">
	#include &lt;windows.h&gt;
	main()
	{
	  time_t t;
	  OutputDebugString("ssp on");
	  time(&amp;t);
	  OutputDebugString("ssp off");
	}
</pre><p> </p><p> Then, add the <code class="literal">-d</code> option to ssp to default to
      *disabling* profiling. The program will run at full speed until the first
      OutputDebugString, then step until the second. You can then use
      <span class="command"><strong>gprof</strong></span> (as usual) to see the performance profile for
      just that portion of the program's execution. </p><p> There are many options to ssp. Since step-profiling makes your
      program run about 1,000 times slower than normal, it's best to understand
      all the options so that you can narrow down the parts of your program you
      need to single-step. </p><p> <code class="literal">-v</code> - verbose. This prints messages about threads
      starting and stopping, OutputDebugString calls, DLLs loading, etc. </p><p> <code class="literal">-t</code> and <code class="literal">-c</code> - tracing. With
      <code class="literal">-t</code>, *every* step's address is written to the file
      "trace.ssp". This can be used to help debug functions, since it can trace
      multiple threads. Clever use of scripts can match addresses with
      disassembled opcodes if needed. Warning: creates *huge* files, very
      quickly. <code class="literal">-c</code> prints each address to the console, useful
      for debugging key chunks of assembler. Use <code class="literal">addr2line -C -f -s -e
      foo.exe &lt; trace.ssp &gt; lines.ssp</code> and then <code class="literal">perl
      cvttrace</code> to convert to symbolic traces. </p><p> <code class="literal">-s</code> - subthreads. Usually, you only need to trace
      the main thread, but sometimes you need to trace all threads, so this
      enables that. It's also needed when you want to profile a function that
      only a subthread calls. However, using OutputDebugString automatically
      enables profiling on the thread that called it, not the main thread. </p><p> <code class="literal">-l</code> - dll profiling. Generates a pretty table of
      how much time was spent in each dll the program used. No sense optimizing
      a function in your program if most of the time is spent in the DLL. I
      usually use the <code class="literal">-v</code>, <code class="literal">-s</code>, and
      <code class="literal">-l</code> options:
      </p><pre class="screen">
$ ssp <code class="literal">-v</code> <code class="literal">-s</code> <code class="literal">-l</code> <code class="literal">-d</code> 0x61001000 0x61080000 hello.exe
</pre><p>
    </p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="strace"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>strace &#8212; Trace system calls and signals</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">strace</code>  [-defnqtuw] [-b <em class="replaceable"><code>SIZE</code></em>] [-m <em class="replaceable"><code>MASK</code></em>] [-o <em class="replaceable"><code>FILENAME</code></em>] [-f <em class="replaceable"><code>PERIOD</code></em>] { <em class="replaceable"><code>command-line</code></em>...  |   
	    [-T]
	      -p <em class="replaceable"><code>pid</code></em> 
	   }</p></div><div class="cmdsynopsis"><p><code class="command">strace</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="strace-options"></a><h2>Options</h2><pre class="screen">
  -b, --buffer-size=SIZE       set size of output file buffer
  -d, --no-delta               don't display the delta-t microsecond timestamp
  -e, --events                 log all Windows DEBUG_EVENTS (toggle - default true)
  -f, --trace-children         trace child processes (toggle - default true)
  -h, --help                   output usage information and exit
  -m, --mask=MASK              set message filter mask
  -n, --crack-error-numbers    output descriptive text instead of error
                               numbers for Windows errors
  -o, --output=FILENAME        set output file to FILENAME
  -p, --pid=n                  attach to executing program with cygwin pid n
  -q, --quiet                  toggle "quiet" flag.  Defaults to on if "-p",
                               off otherwise.
  -S, --flush-period=PERIOD    flush buffered strace output every PERIOD secs
  -t, --timestamp              use an absolute hh:mm:ss timestamp insted of
                               the default microsecond timestamp.  Implies -d
  -T, --toggle                 toggle tracing in a process already being
                               traced. Requires -p &lt;pid&gt;
  -u, --usecs                  toggle printing of microseconds timestamp
  -V, --version                output version information and exit
  -w, --new-window             spawn program under test in a new window

    MASK can be any combination of the following mnemonics and/or hex values
    (0x is optional).  Combine masks with '+' or ',' like so:

                      --mask=wm+system,malloc+0x00800

    Mnemonic Hex     Corresponding Def  Description
    =========================================================================
    all      0x000001 (_STRACE_ALL)      All strace messages.
    flush    0x000002 (_STRACE_FLUSH)    Flush output buffer after each message.
    inherit  0x000004 (_STRACE_INHERIT)  Children inherit mask from parent.
    uhoh     0x000008 (_STRACE_UHOH)     Unusual or weird phenomenon.
    syscall  0x000010 (_STRACE_SYSCALL)  System calls.
    startup  0x000020 (_STRACE_STARTUP)  argc/envp printout at startup.
    debug    0x000040 (_STRACE_DEBUG)    Info to help debugging.
    paranoid 0x000080 (_STRACE_PARANOID) Paranoid info.
    termios  0x000100 (_STRACE_TERMIOS)  Info for debugging termios stuff.
    select   0x000200 (_STRACE_SELECT)   Info on ugly select internals.
    wm       0x000400 (_STRACE_WM)       Trace Windows msgs (enable _strace_wm).
    sigp     0x000800 (_STRACE_SIGP)     Trace signal and process handling.
    minimal  0x001000 (_STRACE_MINIMAL)  Very minimal strace output.
    pthread  0x002000 (_STRACE_PTHREAD)  Pthread calls.
    exitdump 0x004000 (_STRACE_EXITDUMP) Dump strace cache on exit.
    system   0x008000 (_STRACE_SYSTEM)   Serious error; goes to console and log.
    nomutex  0x010000 (_STRACE_NOMUTEX)  Don't use mutex for synchronization.
    malloc   0x020000 (_STRACE_MALLOC)   Trace malloc calls.
    thread   0x040000 (_STRACE_THREAD)   Thread-locking calls.
    special  0x100000 (_STRACE_SPECIAL)  Special debugging printfs for
                                         non-checked-in code
</pre></div><div class="refsect1"><a name="strace-desc"></a><h2>Description</h2><p>The <span class="command"><strong>strace</strong></span> program executes a program, and
      optionally the children of the program, reporting any Cygwin DLL output
      from the program(s) to stdout, or to a file with the
      <code class="literal">-o</code> option. With the <code class="literal">-w</code> option, you
      can start an strace session in a new window, for example:
      </p><pre class="screen">
$ strace -o tracing_output -w sh -c 'while true; do echo "tracing..."; done' &amp;
</pre><p>
      This is particularly useful for <span class="command"><strong>strace</strong></span> sessions that
      take a long time to complete. </p><p> Note that <span class="command"><strong>strace</strong></span> is a standalone Windows program
      and so does not rely on the Cygwin DLL itself (you can verify this with
      <span class="command"><strong>cygcheck</strong></span>). As a result it does not understand
      symlinks. This program is mainly useful for debugging the Cygwin DLL
      itself.</p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="tzset"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>tzset &#8212; Print POSIX-compatible timezone ID from current Windows timezone setting</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">tzset</code>  [ -h  |   -V ]</p></div></div><div class="refsect1"><a name="tzset-options"></a><h2>Options</h2><pre class="screen">
Options:
  -h, --help               output usage information and exit.
  -V, --version            output version information and exit.
      </pre></div><div class="refsect1"><a name="tzset-desc"></a><h2>Description</h2><p>
      Use tzset to set your TZ variable. In POSIX-compatible shells like bash,
      dash, mksh, or zsh:
      </p><pre class="screen">
export TZ=$(tzset)
      </pre><p>
      In csh-compatible shells like tcsh:
      </p><pre class="screen">
setenv TZ `tzset`
      </pre><p>
      </p><p>The <span class="command"><strong>tzset</strong></span> tool reads the current timezone from
      Windows and generates a POSIX-compatible timezone information for the TZ
      environment variable from that information. That's all there is to it.
      For the way how to use it, see the above usage information.</p></div></div><div class="refentry"><div class="refentry.separator"><hr></div><a name="umount"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>umount &#8212; Unmount filesystems</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">umount</code>   <em class="replaceable"><code>POSIXPATH</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">umount</code>   -U </p></div><div class="cmdsynopsis"><p><code class="command">umount</code>    -h  |   -V  </p></div></div><div class="refsect1"><a name="umount-options"></a><h2>Options</h2><pre class="screen">
  -h, --help                    output usage information and exit
  -U, --remove-user-mounts      remove all user mounts
  -V, --version                 output version information and exit
</pre></div><div class="refsect1"><a name="umount-desc"></a><h2>Description</h2><p>The <span class="command"><strong>umount</strong></span> program removes mounts from the mount
      table in the current session. If you specify a POSIX path that
      corresponds to a current mount point, <span class="command"><strong>umount</strong></span> will
      remove it from the current mount table. Note that you can only remove
      user mount points. The <code class="literal">-U</code> flag may be used to specify
      removing all user mount points from the current user session.</p><p>See <a class="xref" href="#mount-table" title="The Cygwin Mount Table">the section called &#8220;The Cygwin Mount Table&#8221;</a> for more information on the mount
      table.</p></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-effectively"></a>Using Cygwin effectively with Windows</h2></div></div></div><p>
Cygwin is not a full operating system, and so must rely on Windows for
accomplishing some tasks. For example, Cygwin provides a POSIX view
of the Windows filesystem, but does not provide filesystem drivers of 
its own. Therefore part of using Cygwin effectively is learning to use
Windows effectively. 
Many Windows utilities provide a good way to interact with Cygwin's 
predominately command-line environment. For example, 
<span class="command"><strong>ipconfig.exe</strong></span> provides information about network 
configuration, and <span class="command"><strong>net.exe</strong></span> views and configures
network file and printer resources.  Most of these tools
support the <code class="literal">/?</code> switch to display usage information. 
</p><p>
Unfortunately, no standard set of tools included with all versions of 
Windows exists.  Generally, the younger the Windows version, the more
complete are the on-board tools.  Additionally, many independent
sites such as 
<a class="ulink" href="http://download.com" target="_top">download.com</a>, 
<a class="ulink" href="http://simtel.net" target="_top">simtel.net</a>, 
and Microsoft's own
<a class="ulink" href="http://technet.microsoft.com/en-us/sysinternals/default.aspx" target="_top">Sysinternals</a>
provide quite useful command-line utilities, as far as they are not
already provided by Cygwin.  A few Windows tools, such as 
<span class="command"><strong>find.exe</strong></span>, <span class="command"><strong>link.exe</strong></span> and
<span class="command"><strong>sort.exe</strong></span>, may conflict with the Cygwin versions
make sure that you use the full path (<span class="command"><strong>/usr/bin/find</strong></span>)
or that your Cygwin <code class="literal">bin</code> directory comes first in your
<code class="envar">PATH</code>.
</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="using-pathnames-effectively"></a>Pathnames</h3></div></div></div><p>
Windows programs do not understand POSIX pathnames, so any arguments 
that reference the filesystem must be in Windows (or DOS) format or 
translated.  Cygwin provides the <span class="command"><strong>cygpath</strong></span> utility for 
converting between Windows and POSIX paths. A complete description of its 
options and examples of its usage are in <a class="xref" href="#cygpath" title="cygpath"><span class="refentrytitle">cygpath</span>(1)</a>, 
including a shell script for starting Windows Explorer in any directory. 
The same format works for most Windows programs, for example 
</p><pre class="screen">
<code class="literal">notepad.exe "$(cygpath -aw "Desktop/Phone Numbers.txt")"</code>
</pre><p>
A few programs require a Windows-style, semicolon-delimited path list, 
which <span class="command"><strong>cygpath</strong></span> can translate from a POSIX path with the
<code class="literal">-p</code> option. For example, a Java compilation from 
<span class="command"><strong>bash</strong></span> might look like this: 
</p><pre class="screen">
<code class="literal">javac -cp "$(cygpath -pw "$CLASSPATH")" hello.java</code>
</pre><p>
Since using quoting and subshells is somewhat awkward, it is often 
preferable to use <span class="command"><strong>cygpath</strong></span> in shell scripts.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="using-net"></a>Cygwin and Windows Networking</h3></div></div></div><p>
Many popular Cygwin packages, such as <code class="systemitem">ncftp</code>, 
<code class="systemitem">lynx</code>, and <code class="systemitem">wget</code>, require a 
network connection.  Since Cygwin relies on Windows for connectivity, 
if one of these tools is not working as expected you may need to 
troubleshoot using Windows tools. The first test is to see if you
can reach the URL's host with <span class="command"><strong>ping.exe</strong></span>, one of the 
few utilities included with every Windows version since Windows 95.
If you chose to install the <code class="systemitem">inetutils</code> package, 
you may have both
Windows and Cygwin versions of utilities such as <span class="command"><strong>ftp</strong></span>
and <span class="command"><strong>telnet</strong></span>. If you are having problems using one
of these programs, see if the alternate one works as expected. 
</p><p>
There are a variety of other programs available for specific situations.
If your system does not have an always-on network connection, you 
may be interested in <span class="command"><strong>rasdial.exe</strong></span> for automating dialup
connections.  
Users who frequently change their network 
configuration can script these changes with <span class="command"><strong>netsh.exe</strong></span>.
For proxy users, the open source 
<a class="ulink" href="http://apserver.sourceforge.net" target="_top">
NTLM Authorization Proxy Server</a> or the no-charge
<a class="ulink" href="http://www.hummingbird.com/products/nc/socks/index.html" target="_top">
Hummingbird SOCKS Proxy</a> may allow you to use Cygwin network
programs in your environment.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="using-shortcuts"></a>Creating shortcuts</h3></div></div></div><p>
By default, Cygwin does not create symlinks as .lnk files, but there's an
option to do that, see <a class="xref" href="#using-cygwinenv" title="The CYGWIN environment variable">the section called &#8220;The <code class="envar">CYGWIN</code> environment
variable&#8221;</a>.
These symlink .lnk files are compatible with Windows-created .lnk files,
but they are still different.  They do not include much of the information
that is available in a standard Microsoft shortcut, such as the working
directory, an icon, etc.  The <code class="systemitem">cygutils</code>
package includes a <span class="command"><strong>mkshortcut</strong></span> utility for creating
standard native Microsoft .lnk files from the command line.
</p><p>
But here's the problem.  If Cygwin handled these native shortcuts like any
other symlink, you could not archive Microsoft .lnk files into
<span class="command"><strong>tar</strong></span> archives and keep all the information in them. 
After unpacking, these shortcuts would have lost all the extra information
and would be no different than standard Cygwin symlinks. Therefore these two
types of links are treated differently.  Unfortunately, this means that the 
usual Unix way of creating and using symlinks does not work with native
Windows shortcuts. 
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="using-printing"></a>Printing</h3></div></div></div><p>
There are several options for printing from Cygwin, including the 
<span class="command"><strong>lpr</strong></span> found in <code class="systemitem">cygutils-extra</code>
(not to be confused with the native Windows <span class="command"><strong>lpr.exe</strong></span>).
The easiest way to use <code class="systemitem">cygutils-extra</code>'s
<span class="command"><strong>lpr</strong></span> is to specify a default device name in the 
<code class="envar">PRINTER</code> environment variable.  You may also specify a device 
on the command line with the <code class="literal">-d</code> or <code class="literal">-P</code> 
options, which will override the environment variable setting. 
</p><p>
A device name 
may be a UNC path (<code class="literal">\\server_name\printer_name</code>), a reserved 
DOS device name (<code class="literal">prn</code>, <code class="literal">lpt1</code>), or a 
local port name that is mapped to a printer share. Note that forward slashes 
may be used in a UNC path (<code class="literal">//server_name/printer_name</code>),
which is helpful when using <span class="command"><strong>lpr</strong></span> from a shell that uses
the backslash as an escape character. 
</p><p>
<span class="command"><strong>lpr</strong></span> sends raw data to the printer; no formatting is done.
Many, but not all, printers accept plain text as input. If your printer 
supports PostScript, packages such as 
<code class="systemitem">a2ps</code> and <code class="systemitem">enscript</code> can prepare 
text files for printing. The <code class="systemitem">ghostscript</code> package also 
provides some translation
from PostScript to various native printer languages. Additionally, a native 
Windows application for printing PostScript, <span class="command"><strong>gsprint</strong></span>, is 
available from the <a class="ulink" href="http://www.cs.wisc.edu/~ghost/" target="_top">Ghostscript
website</a>.
</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="programming"></a>Chapter 4. Programming with Cygwin</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="sect1"><a href="#gcc">Using GCC with Cygwin</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gcc-default">Standard Usage</a></span></dt><dt><span class="sect2"><a href="#gcc-64">Building applications for 64 bit Cygwin</a></span></dt><dt><span class="sect2"><a href="#gcc-gui">GUI Mode Applications</a></span></dt></dl></dd><dt><span class="sect1"><a href="#gdb">Debugging Cygwin Programs</a></span></dt><dt><span class="sect1"><a href="#dll">Building and Using DLLs</a></span></dt><dd><dl><dt><span class="sect2"><a href="#dll-build">Building DLLs</a></span></dt><dt><span class="sect2"><a href="#dll-link">Linking Against DLLs</a></span></dt></dl></dd><dt><span class="sect1"><a href="#windres">Defining Windows Resources</a></span></dt><dt><span class="sect1"><a href="#gprof">Profiling Cygwin Programs</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gprof-intro">Introduction</a></span></dt><dt><span class="sect2"><a href="#gprof-ex">Examples</a></span></dt><dt><span class="sect2"><a href="#gprof-ss">Special situations</a></span></dt><dd><dl><dt><span class="sect3"><a href="#gprof-mt">Profiling multi-threaded programs</a></span></dt><dt><span class="sect3"><a href="#gprof-fork">Profiling programs that fork</a></span></dt><dt><span class="sect3"><a href="#gprof-res">Getting better profiling resolution</a></span></dt><dt><span class="sect3"><a href="#gprof-lib">Profiling programs with their libraries</a></span></dt><dt><span class="sect3"><a href="#gprof-cyg">Profiling Cygwin itself</a></span></dt></dl></dd></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="gcc"></a>Using GCC with Cygwin</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="gcc-default"></a>Standard Usage</h3></div></div></div><p>Use gcc to compile, just like under UNIX.  Refer to the GCC User's Guide
for information on standard usage and options.  Here's a simple example:</p><div class="example"><a name="gcc-hello-world"></a><p class="title"><b>Example 4.1. Building Hello World with GCC</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">bash$</code> <strong class="userinput"><code>gcc hello.c -o hello.exe</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>hello.exe</code></strong>
Hello, World

<code class="prompt">bash$</code>
</pre></div></div><br class="example-break"></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="gcc-64"></a>Building applications for 64 bit Cygwin</h3></div></div></div><p>The 64 bit Cygwin toolchain uses the
<a class="ulink" href="http://en.wikipedia.org/wiki/X86_calling_convention#Microsoft_x64_calling_convention" target="_top">Microsoft x64 calling convention</a>
by default, so you can create applications using the Win32 API just as with
the 32 bit Cygwin toolchain.</p><p>There's just one important difference.  The 64 bit Cygwin compilers use
a different data model than the Mingw and Microsoft compilers.  For reference,
see the Wikipedia entry on
<a class="ulink" href="http://en.wikipedia.org/wiki/64-bit_computing#64-bit_data_models" target="_top">64-bit computing</a>.</p><p>While the Mingw and Microsoft compilers use the <code class="literal">LLP64</code>
data model, Cygwin compilers use the <code class="literal">LP64</code> data model, just
like Linux.  This affects the size of the type <code class="literal">long</code>.  In the
<code class="literal">LLP64</code> model preferred by Microsoft,
<code class="function">sizeof(long)</code> is 4.  This applies for the related Win32
types like <code class="literal">LONG</code>, <code class="literal">ULONG</code>,
<code class="literal">DWORD</code>, etc., too.</p><p>In the <code class="literal">LP64</code> model used by Cygwin, <code class="function">sizeof(long)</code> is 8,
just like the size of pointers or the types <code class="literal">size_t/ssize_t</code>.
This simplifies porting Linux applications to 64 bit Cygwin, but it requires
due diligence when calling Windows functions taking LONG, ULONG, DWORD, or any
other equivalent type.  This is especially important in conjunction with
pointers.</p><p>Here's an example.  The Win32 function <code class="function">ReadFile</code>
returns the number of read bytes via a pointer to a DWORD variable:</p><pre class="screen">
BOOL WINAPI ReadFile (HANDLE, PVOID, DWORD, PDWORD, LPOVERLAPPED);
</pre><p>Note that the forth parameter is a pointer to a DWORD, thus it's a 
pointer to a 4 byte type, on 32 as well as on 64 bit Windows.  Now we write
our own <code class="function">my_read</code> function using ReadFile:</p><div class="example"><a name="gcc-64-ex1"></a><p class="title"><b>Example 4.2. 64bit-programming, Using ReadFile, 1st try</b></p><div class="example-contents"><pre class="screen">
ssize_t
my_read (int fd, void *buffer, size_t bytes_to_read)
{
  HANDLE fh = _get_osfhandle (fd);
  ssize_t bytes_read;

  if (ReadFile (fh, buffer, bytes_to_read, (PDWORD) &amp;bytes_read, NULL))
    return bytes_read;
  set_errno_from_get_last_error ();
  return -1;
}
</pre></div></div><br class="example-break"><p>While this example code works fine on 32 bit Windows, it has in fact
a bad bug.  The assumption that the size of ssize_t is the same as the size
of DWORD is wrong for 64 bit.  In fact, since
<code class="function">sizeof(ssize_t)</code> is 8, <code class="function">ReadFile</code>
will write the number of read bytes into the lower 4 bytes of the variable
<code class="literal">bytes_read</code>, while the upper 4 bytes will contain an
undefined value.  <code class="function">my_read</code> will very likely return the
wrong number of read bytes to the caller.</p><p>Here's the fixed version of <code class="function">my_read</code>:</p><div class="example"><a name="gcc-64-ex2"></a><p class="title"><b>Example 4.3. 64bit-programming, Using ReadFile, 2nd try</b></p><div class="example-contents"><pre class="screen">
ssize_t
my_read (int fd, void *buffer, size_t bytes_to_read)
{
  HANDLE fh = _get_osfhandle (fd);
  DWORD bytes_read;

  if (ReadFile (fh, buffer, bytes_to_read, &amp;bytes_read, NULL))
    return (ssize_t) bytes_read;
  set_errno_from_get_last_error ();
  return -1;
}
</pre></div></div><br class="example-break"></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="gcc-gui"></a>GUI Mode Applications</h3></div></div></div><p>Cygwin comes with an X server, so usually you should compile your
GUI applications as X applications to allow better interoperability with
other Cygwin GUI applications.</p><p>Other than that, Cygwin allows you to build programs with full access
to the standard Windows API, including the GUI functions as defined in
any Microsoft or off-the-shelf publication.</p><p>The build process is similar to any other build process.  The only
difference is that you use <span class="command"><strong>gcc -mwindows</strong></span> to link your
program into a GUI application instead of a command-line application.
Here's an example Makefile:</p><pre class="screen">

myapp.exe : myapp.o myapp.res
	gcc -mwindows myapp.o myapp.res -o $@

myapp.res : myapp.rc resource.h
	windres $&lt; -O coff -o $@

</pre><p>Note the use of <code class="filename">windres</code> to compile the
Windows resources into a COFF-format <code class="filename">.res</code> file.
That will include all the bitmaps, icons, and other resources you
need, into one handy object file.  For more information on
<code class="filename">windres</code>, consult the Binutils manual.  </p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="gdb"></a>Debugging Cygwin Programs</h2></div></div></div><p>When your program doesn't work right, it usually has a "bug" in
it, meaning there's something wrong with the program itself that is
causing unexpected results or crashes.  Diagnosing these bugs and
fixing them is made easy by special tools called
<span class="emphasis"><em>debuggers</em></span>.  In the case of Cygwin, the debugger
is GDB, which stands for "GNU DeBugger".  This tool lets you run your
program in a controlled environment where you can investigate the
state of your program while it is running or after it crashes.
Crashing programs sometimes create "core" files. In Cygwin these are 
regular text files that cannot be used directly by GDB.
</p><p>Before you can debug your program, you need to prepare your
program for debugging.  What you need to do is add
<code class="literal">-g</code> to all the other flags you use when compiling
your sources to objects.</p><div class="example"><a name="gdb-g"></a><p class="title"><b>Example 4.4. Compiling with -g</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">bash$</code> gcc -g -O2 -c myapp.c
<code class="prompt">bash$</code> gcc -g myapp.c -o myapp
</pre></div></div><br class="example-break"><p>What this does is add extra information to the objects (they get
much bigger too) that tell the debugger about line numbers, variable
names, and other useful things.  These extra symbols and debugging
information give your program enough information about the original
sources so that the debugger can make debugging much easier for
you.</p><p>To invoke GDB, simply type <span class="command"><strong>gdb myapp.exe</strong></span> at the
command prompt.  It will display some text telling you about itself,
then <code class="literal">(gdb)</code> will appear to prompt you to enter
commands.  Whenever you see this prompt, it means that gdb is waiting
for you to type in a command, like <span class="command"><strong>run</strong></span> or
<span class="command"><strong>help</strong></span>.  Oh <code class="literal">:-)</code> type
<span class="command"><strong>help</strong></span> to get help on the commands you can type in, or
read the [<span class="citation">GDB User's Manual</span>] for a complete
description of GDB and how to use it.</p><p>If your program crashes and you're trying to figure out why it
crashed, the best thing to do is type <span class="command"><strong>run</strong></span> and let
your program run.  After it crashes, you can type
<span class="command"><strong>where</strong></span> to find out where it crashed, or
<span class="command"><strong>info locals</strong></span> to see the values of all the local
variables.  There's also a <span class="command"><strong>print</strong></span> that lets you look
at individual variables or what pointers point to.</p><p>If your program is doing something unexpected, you can use the
<span class="command"><strong>break</strong></span> command to tell gdb to stop your program when it
gets to a specific function or line number:</p><div class="example"><a name="gdb-break"></a><p class="title"><b>Example 4.5. "break" in gdb</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">(gdb)</code> break my_function
<code class="prompt">(gdb)</code> break 47
</pre></div></div><br class="example-break"><p>Now, when you type <span class="command"><strong>run</strong></span> your program will stop
at that "breakpoint" and you can use the other gdb commands to look at
the state of your program at that point, modify variables, and
<span class="command"><strong>step</strong></span> through your program's statements one at a
time.</p><p>Note that you may specify additional arguments to the
<span class="command"><strong>run</strong></span> command to provide command-line arguments to
your program.  These two cases are the same as far as your program is
concerned:</p><div class="example"><a name="gdb-cliargs"></a><p class="title"><b>Example 4.6. Debugging with command line arguments</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">bash$</code> myprog -t foo --queue 47

<code class="prompt">bash$</code> gdb myprog
<code class="prompt">(gdb)</code> run -t foo --queue 47
</pre></div></div><br class="example-break"></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dll"></a>Building and Using DLLs</h2></div></div></div><p>DLLs are Dynamic Link Libraries, which means that they're linked
into your program at run time instead of build time.  There are three
parts to a DLL:</p><div class="itemizedlist"><ul class="itemizedlist compact" style="list-style-type: disc; "><li class="listitem"><p> the exports </p></li><li class="listitem"><p> the code and data </p></li><li class="listitem"><p> the import library </p></li></ul></div><p>The code and data are the parts you write - functions,
variables, etc.  All these are merged together, like if you were
building one big object files, and put into the dll.  They are not
put into your .exe at all.</p><p>The exports contains a list of functions and variables that the
dll makes available to other programs.  Think of this as the list of
"global" symbols, the rest being hidden.  Normally, you'd create this
list by hand with a text editor, but it's possible to do it
automatically from the list of functions in your code.  The
<code class="filename">dlltool</code> program creates the exports section of
the dll from your text file of exported symbols.</p><p>The import library is a regular UNIX-like
<code class="filename">.a</code> library, but it only contains the tiny bit of
information needed to tell the OS how your program interacts with
("imports") the dll.  This information is linked into your
<code class="filename">.exe</code>.  This is also generated by
<code class="filename">dlltool</code>.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="dll-build"></a>Building DLLs</h3></div></div></div><p>This page gives only a few simple examples of gcc's DLL-building 
capabilities. To begin an exploration of the many additional options,
see the gcc documentation and website, currently at 
<a class="ulink" href="http://gcc.gnu.org/" target="_top">http://gcc.gnu.org/</a>
</p><p>Let's go through a simple example of how to build a dll.
For this example, we'll use a single file
<code class="filename">myprog.c</code> for the program
(<code class="filename">myprog.exe</code>) and a single file
<code class="filename">mydll.c</code> for the contents of the dll
(<code class="filename">mydll.dll</code>).</p><p>Fortunately, with the latest gcc and binutils the process for building a dll
is now pretty simple. Say you want to build this minimal function in mydll.c:</p><pre class="screen">
#include &lt;stdio.h&gt;

int
hello()
{
  printf ("Hello World!\n");
}  
</pre><p>First compile mydll.c to object code:</p><pre class="screen">gcc -c mydll.c</pre><p>Then, tell gcc that it is building a shared library:</p><pre class="screen">gcc -shared -o mydll.dll mydll.o</pre><p>
That's it! To finish up the example, you can now link to the
dll with a simple program:
</p><pre class="screen">
int 
main ()
{
  hello ();
}  
</pre><p>
Then link to your dll with a command like:
</p><pre class="screen">gcc -o myprog myprog.c -L./ -lmydll</pre><p>However, if you are building a dll as an export library,
you will probably want to use the complete syntax:</p><pre class="screen">gcc -shared -o cyg${module}.dll \
    -Wl,--out-implib=lib${module}.dll.a \
    -Wl,--export-all-symbols \
    -Wl,--enable-auto-import \
    -Wl,--whole-archive ${old_libs} \
    -Wl,--no-whole-archive ${dependency_libs}</pre><p>
The name of your library is <code class="literal">${module}</code>, prefixed with
<code class="literal">cyg</code> for the DLL and <code class="literal">lib</code> for the
import library. Cygwin DLLs use the <code class="literal">cyg</code> prefix to 
differentiate them from native-Windows MinGW DLLs, see 
<a class="ulink" href="http://mingw.org" target="_top">the MinGW website</a> for more details.
<code class="literal">${old_libs}</code> are all
your object files, bundled together in static libs or single object
files and the <code class="literal">${dependency_libs}</code> are import libs you 
need to link against, e.g 
<strong class="userinput"><code>'-lpng -lz -L/usr/local/special -lmyspeciallib'</code></strong>.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="dll-link"></a>Linking Against DLLs</h3></div></div></div><p>If you have an existing DLL already, you need to build a
Cygwin-compatible import library.  If you have the source to compile
the DLL, see <a class="xref" href="#dll-build" title="Building DLLs">the section called &#8220;Building DLLs&#8221;</a> for details on having 
<code class="filename">gcc</code> build one for you.  If you do not have the
source or a supplied working import library, you can get most of
the way by creating a .def file with these commands (you might need to
do this in <code class="filename">bash</code> for the quoting to work
correctly):</p><pre class="screen">
echo EXPORTS &gt; foo.def
nm foo.dll | grep ' T _' | sed 's/.* T _//' &gt;&gt; foo.def
</pre><p>Note that this will only work if the DLL is not stripped.
Otherwise you will get an error message: "No symbols in
foo.dll".</p><p>Once you have the <code class="filename">.def</code> file, you can create
an import library from it like this:</p><pre class="screen">
dlltool --def foo.def --dllname foo.dll --output-lib foo.a
</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="windres"></a>Defining Windows Resources</h2></div></div></div><p><code class="filename">windres</code> reads a Windows resource file
(<code class="filename">*.rc</code>) and converts it to a res or coff file.
The syntax and semantics of the input file are the same as for any
other resource compiler, so please refer to any publication describing
the Windows resource format for details.  Also, the
<code class="filename">windres</code> program itself is fully documented in the
Binutils manual.  Here's an example of using it in a project:</p><pre class="screen">

myapp.exe : myapp.o myapp.res
	gcc -mwindows myapp.o myapp.res -o $@

myapp.res : myapp.rc resource.h
	windres $&lt; -O coff -o $@

</pre><p>What follows is a quick-reference to the syntax
<code class="filename">windres</code> supports.</p><pre class="screen">

id ACCELERATORS suboptions
BEG
"^C" 12
"Q" 12
65 12
65 12 , VIRTKEY ASCII NOINVERT SHIFT CONTROL ALT
65 12 , VIRTKEY, ASCII, NOINVERT, SHIFT, CONTROL, ALT
(12 is an acc_id)
END

SHIFT, CONTROL, ALT require VIRTKEY


id BITMAP memflags "filename"
memflags defaults to MOVEABLE


id CURSOR memflags "filename"
memflags defaults to MOVEABLE,DISCARDABLE


id DIALOG memflags exstyle x,y,width,height styles BEG controls END
id DIALOGEX memflags exstyle x,y,width,height styles BEG controls END
id DIALOGEX memflags exstyle x,y,width,height,helpid styles BEG controls END

memflags defaults to MOVEABLE
exstyle may be EXSTYLE=number
styles:	CAPTION "string"
	CLASS id
	STYLE  FOO | NOT FOO | (12)
	EXSTYLE number
	FONT number, "name"
	FONT number, "name",weight,italic
	MENU id
	CHARACTERISTICS number
	LANGUAGE number,number
	VERSIONK number
controls:
	AUTO3STATE params
	AUTOCHECKBOX params
	AUTORADIOBUTTON params
	BEDIT params
	CHECKBOX params
	COMBOBOX params
	CONTROL ["name",] id, class, style, x,y,w,h [,exstyle] [data]
	CONTROL ["name",] id, class, style, x,y,w,h, exstyle, helpid [data]
	CTEXT params
	DEFPUSHBUTTON params
	EDITTEXT params
	GROUPBOX params
	HEDIT params
	ICON ["name",] id, x,y [data]
	ICON ["name",] id, x,y,w,h, style, exstyle [data]
	ICON ["name",] id, x,y,w,h, style, exstyle, helpid [data]
	IEDIT params
	LISTBOX params
	LTEXT params
	PUSHBOX params
	PUSHBUTTON params
	RADIOBUTTON params
	RTEXT params
	SCROLLBAR params
	STATE3 params
	USERBUTTON "string", id, x,y,w,h, style, exstyle
params:
	["name",] id, x, y, w, h, [data]
	["name",] id, x, y, w, h, style [,exstyle] [data]
	["name",] id, x, y, w, h, style, exstyle, helpid [data]

[data] is optional BEG (string|number) [,(string|number)] (etc) END


id FONT memflags "filename"
memflags defaults to MOVEABLE|DISCARDABLE

id ICON memflags "filename"
memflags defaults to MOVEABLE|DISCARDABLE

LANGUAGE num,num

id MENU options BEG items END
items:
	"string", id, flags
	SEPARATOR
	POPUP "string" flags BEG menuitems END
flags:
	CHECKED
	GRAYED
	HELP
	INACTIVE
	MENUBARBREAK
	MENUBREAK

id MENUEX suboptions BEG items END
items:
	MENUITEM "string"
	MENUITEM "string", id
	MENUITEM "string", id, type [,state]
	POPUP "string" BEG items END
	POPUP "string", id BEG items END
	POPUP "string", id, type BEG items END
	POPUP "string", id, type, state [,helpid] BEG items END

id MESSAGETABLE memflags "filename"
memflags defaults to MOVEABLE

id RCDATA suboptions BEG (string|number) [,(string|number)] (etc) END

STRINGTABLE suboptions BEG strings END
strings:
	id "string"
	id, "string"

(User data)
id id suboptions BEG (string|number) [,(string|number)] (etc) END

id VERSIONINFO stuffs BEG verblocks END
stuffs:	FILEVERSION num,num,num,num
	PRODUCTVERSION num,num,num,num
	FILEFLAGSMASK num
	FILEOS num
	FILETYPE num
	FILESUBTYPE num
verblocks:
	BLOCK "StringFileInfo" BEG BLOCK BEG vervals END END
	BLOCK "VarFileInfo" BEG BLOCK BEG vertrans END END
vervals: VALUE "foo","bar"
vertrans: VALUE num,num



suboptions:
	memflags
	CHARACTERISTICS num
	LANGUAGE num,num
	VERSIONK num

memflags are MOVEABLE/FIXED PURE/IMPURE PRELOAD/LOADONCALL DISCARDABLE

</pre></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="gprof"></a>Profiling Cygwin Programs</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="gprof-intro"></a>Introduction</h3></div></div></div><p>Profiling is a way to analyze your program to find out where it is
spending its time. You might need to do this if it seems your program is
taking more time to do its job than you think it should. It is always
preferable to profile your program than to just guess where the time is
being spent; even expert programmers are known to guess badly at this.
</p><p>In Cygwin, you enable profiling with a compiler flag and you display
the resulting profiling data with gprof.  Read on to find out how.
</p><p>To enable profiling of your program, first compile it with an
additional gcc flag: <strong class="userinput"><code>-pg</code></strong>. That flag should be used
when compiling every source file of the program. If your program has a
Makefile, you would add the flag to all gcc compilation commands or to the
CFLAGS= setting. A manual compilation that enables profiling looks like this:
</p><pre class="screen">
<code class="prompt">bash$</code> <strong class="userinput"><code>gcc -pg -g -o myapp myapp.c</code></strong>
</pre><p>The <strong class="userinput"><code>-pg</code></strong> flag causes gcc to do two additional
things as it compiles your program. First, a small bit of code is added to
the beginning of each function that records its address and the address it
was called from at run time. gprof uses this data to generate a call graph.
Second, gcc arranges to have a special "front end" added to the beginning
of your program. The front end starts a recurring timer and every time the
timer fires, 100 times per second, the currently executing address is saved.
gprof uses this data to generate a "flat profile" showing where your
program is spending its time.
</p><p>After compiling your program (and linking it, if you do that as a
separate step), you are ready to profile it. Just run it as you normally
would. If there are specific code paths you want to profile, take the
actions that would exercise those code paths. When your program exits,
you will have an additional file in the current directory: gmon.out.
That file contains the profiling data gprof processes and displays.
</p><p>gprof has many flags to control its operation. The
[<span class="citation">gprof man page</span>] details everything gprof can do. We
will only use a few of gprof's flags here. You launch gprof as follows:
</p><pre class="screen">
<code class="prompt">bash$</code> <strong class="userinput"><code>gprof [flags] appname [datafile]...</code></strong>
</pre><p>
If you don't specify any flags, gprof operates as if you gave it flags
<strong class="userinput"><code>-p -q</code></strong> which means: generate a flat profile with
descriptive text and generate a call graph with more descriptive text. In
the examples below we will give specific flags to gprof to demonstrate
specific displays. We'll also use flag <strong class="userinput"><code>-b</code></strong> which
means: be brief, i.e. don't display the descriptive text. You can also
specify a trailing list of one or more profiling data files. If you don't,
gprof assumes gmon.out is the only file to process and display.
</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="gprof-ex"></a>Examples</h3></div></div></div><div class="example"><a name="gprof-flat"></a><p class="title"><b>Example 4.7. Flat profile</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">bash$</code> <strong class="userinput"><code>gprof -b -p myapp</code></strong>
<code class="literal">Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total
 time   seconds   seconds    calls   s/call   s/call  name
 25.11     13.34    13.34        1    13.34    13.34  func0
 25.00     26.62    13.28        1    13.28    13.28  func1
 25.00     39.90    13.28        1    13.28    13.28  func3
 24.89     53.12    13.22        1    13.22    13.22  func2
</code> </pre></div></div><br class="example-break"><div class="example"><a name="gprof-cg"></a><p class="title"><b>Example 4.8. Call graph</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">bash$</code> <strong class="userinput"><code>gprof -b -q myapp</code></strong>
<code class="literal">                        Call graph


granularity: each sample hit covers 4 byte(s) for 0.02% of 53.12 seconds

index % time    self  children    called     name
                                                 &lt;spontaneous&gt;
[1]    100.0    0.00   53.12                 main [1]
               13.34    0.00       1/1           func0 [2]
               13.28    0.00       1/1           func1 [3]
               13.28    0.00       1/1           func3 [4]
               13.22    0.00       1/1           func2 [5]
-----------------------------------------------
               13.34    0.00       1/1           main [1]
[2]     25.1   13.34    0.00       1         func0 [2]
-----------------------------------------------
               13.28    0.00       1/1           main [1]
[3]     25.0   13.28    0.00       1         func1 [3]
-----------------------------------------------
               13.28    0.00       1/1           main [1]
[4]     25.0   13.28    0.00       1         func3 [4]
-----------------------------------------------
               13.22    0.00       1/1           main [1]
[5]     24.9   13.22    0.00       1         func2 [5]
-----------------------------------------------


Index by function name

   [2] func0                   [5] func2
   [3] func1                   [4] func3
</code> </pre></div></div><br class="example-break"><div class="example"><a name="gprof-line"></a><p class="title"><b>Example 4.9. Source line profile</b></p><div class="example-contents"><pre class="screen">
<code class="prompt">bash$</code> <strong class="userinput"><code>gprof -b -l myapp</code></strong>
<code class="literal">Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total
 time   seconds   seconds    calls   s/call   s/call  name
 25.11     13.34    13.34        1    13.34    13.34  func0 (myapp.c:9 @ 1004010e0)
 25.00     26.62    13.28        1    13.28    13.28  func1 (myapp.c:10 @ 10040111a)
 25.00     39.90    13.28        1    13.28    13.28  func3 (myapp.c:12 @ 10040118e)
 24.89     53.12    13.22        1    13.22    13.22  func2 (myapp.c:11 @ 100401154)


                        Call graph


granularity: each sample hit covers 4 byte(s) for 0.02% of 53.12 seconds

index % time    self  children    called     name
               13.34    0.00       1/1           main (myapp.c:26 @ 10040123c) [1]
[2]     25.1   13.34    0.00       1         func0 (myapp.c:9 @ 1004010e0) [2]
-----------------------------------------------
               13.28    0.00       1/1           main (myapp.c:26 @ 10040123c) [1]
[3]     25.0   13.28    0.00       1         func1 (myapp.c:10 @ 10040111a) [3]
-----------------------------------------------
               13.28    0.00       1/1           main (myapp.c:28 @ 100401246) [5]
[4]     25.0   13.28    0.00       1         func3 (myapp.c:12 @ 10040118e) [4]
-----------------------------------------------
               13.22    0.00       1/1           main (myapp.c:27 @ 100401241) [7]
[6]     24.9   13.22    0.00       1         func2 (myapp.c:11 @ 100401154) [6]
-----------------------------------------------


Index by function name

   [2] func0 (myapp.c:9 @ 1004010e0) [6] func2 (myapp.c:11 @ 100401154)
   [3] func1 (myapp.c:10 @ 10040111a) [4] func3 (myapp.c:12 @ 10040118e)
</code> </pre></div></div><br class="example-break"></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="gprof-ss"></a>Special situations</h3></div></div></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="gprof-mt"></a>Profiling multi-threaded programs</h4></div></div></div><p>Multi-threaded programs are profiled just like single-threaded programs.
There is no mechanism to turn profiling on or off for specific threads.
gprof combines the data for all threads when generating its displays.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="gprof-fork"></a>Profiling programs that fork</h4></div></div></div><p>Programs that fork, i.e., use the fork() system call with or without
using exec() afterwards, require special care. Since there is only one
gmon.out file, profiling data from the parent process might get overwritten
by the child process, or vice-versa, after a fork(). You can avoid this by
setting the environment variable GMON_OUT_PREFIX before running your
program. If the variable is non-empty, its contents will be used as a
prefix to name the profiling data files. Here's an example:
</p><div class="example"><a name="gprof-prefix"></a><p class="title"><b>Example 4.10. </b></p><div class="example-contents"><pre class="screen">
<code class="prompt">bash$</code> <strong class="userinput"><code>export GMON_OUT_PREFIX=myapp.out</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>./myapp -fork</code></strong>
<code class="prompt">bash$</code> <strong class="userinput"><code>ls myapp.out*</code></strong>
<code class="literal">myapp.out.2728  myapp.out.3224
</code>
<code class="prompt">bash$</code> <strong class="userinput"><code>gprof -bp myapp myapp.out.2728</code></strong>
<code class="literal">Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total
 time   seconds   seconds    calls   s/call   s/call  name
 50.25     30.28    30.28        2    15.14    15.14  func3
 24.99     45.34    15.06        1    15.06    15.06  func1
 24.76     60.26    14.92        1    14.92    14.92  func2
</code>
<code class="prompt">bash$</code> <strong class="userinput"><code>gprof -bp myapp myapp.out.3224</code></strong>
<code class="literal">Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total
 time   seconds   seconds    calls   s/call   s/call  name
 49.25     29.36    29.36        2    14.68    14.68  func3
 25.43     44.52    15.16        1    15.16    15.16  func1
 25.33     59.62    15.10        1    15.10    15.10  func2
</code>
<code class="prompt">bash$</code> <strong class="userinput"><code>gprof -bp myapp myapp.out*</code></strong>
<code class="literal">Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total
 time   seconds   seconds    calls   s/call   s/call  name
 49.75     59.64    59.64        4    14.91    14.91  func3
 25.21     89.86    30.22        2    15.11    15.11  func1
 25.04    119.88    30.02        2    15.01    15.01  func2
</code> </pre></div></div><br class="example-break"><p>As the last gprof command above shows, gprof can combine the data
from a selection of profiling data files to generate its displays. Just
list the names of those files at the end of the gprof command; you can use
a wildcard here. NOTE: If you update your program, remember to remove stale
profiling data files before profiling your program again. If you aren't
careful about this, gprof could combine data from your most recent version
with stale data from prior versions, possibly giving misleading displays.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="gprof-res"></a>Getting better profiling resolution</h4></div></div></div><p>To get better resolution (i.e., more data points) when profiling
your program, try running it multiple times with the environment variable
GMON_OUT_PREFIX set, as described in the previous situation. There will be
multiple profiling data files generated and you can have gprof combine
the data from all of them into one display.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="gprof-lib"></a>Profiling programs with their libraries</h4></div></div></div><p>At the time of this writing Cygwin's profiling support only allows
for one range of addresses per program. It is hard-wired to be the range
covering the .text segment of your program, which is where your code resides.
If you build your program with static libraries (e.g., libfoo.a), the code
from those libraries is linked into your program's .text segment so will be
included when profiling. But dynamic libraries (e.g., libfoo.dll) reside in
other address ranges and code within them won't be included.
</p></div><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="gprof-cyg"></a>Profiling Cygwin itself</h4></div></div></div><p>Due to the issue mentioned in the previous situation and other issues,
at the time of this writing there is no support for profiling Cygwin itself.
</p></div></div></div></div></div></body></html>
